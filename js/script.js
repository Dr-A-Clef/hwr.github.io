"use strict";function visible(t){return t.length&&!t.is(":hidden")}function dateDiffInDays(t,e){var i=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()),n=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate());return Math.floor((n-i)/864e5)}function initAndUpdate(t){$(window).on("load",t).resize(t)}function scrollSpy(t,e,i){var n=$(t);if(!visible(n))return;e=e||0;i=i||"active";var o=null,s=$(),a=n.outerHeight()+e,r=n.find("a").map(function(){var t=$($(this).attr("href"));if(t.length)return t[0]});$(window).scroll(function(){var t=$(this).scrollTop()+a;var e=r.filter(function(){return $(this).offset().top<t}).last().attr("id")||"";if(o!==e){s.removeClass(i);var l=[];for(var c=n.find("[href='#"+e+"']");c.length&&!c.is(n);c=c.parent()){if(c.is("li"))l.push(c[0])}s=$(l).addClass(i).trigger("scrollspy");o=e}})}function makeSticky(t,e){var i=$(t);if(!visible(i))return;e=e||{};var n=$(e.below||"#header").height(),o=$(e.within||"#primary"),s=i.position().top,a=0;initAndUpdate(function(){var t=o.position().top+o.outerHeight();a=t-i.height()});$(window).scroll(function(){var t=$(window).scrollTop(),e;if(t<n)e=s-t;else if(a>t)e=s-n;else e=a-t;i.css("top",e)})}$(function(){$(".widget.widget-links").load("/components/links.html");$(".widget.recent-posts").load("/components/recent-posts.html",function(t,e){if("success"===e){var i=$(this).find(".list").attr("data-suffix");$(this).find(".update-time").each(function(){var t=new Date($(this).attr("data-date")),e=dateDiffInDays(t,new Date);if(30>=e)$(this).html(e+i)})}})});$(function(){var t,e=false;$(".dropdown").hover(function(){var i=$(this);if(t){clearTimeout(t);t=null}if(!i.hasClass("selected")){i.addClass("selected");e=true}},function(){var i=$(this);if(i.hasClass("selected")&&e){t=setTimeout(function(){i.removeClass("selected");e=false;clearTimeout(t);t=null},100)}});$("#global-nav").click(function(){if($(window).width()<768){$(this).children(".gnul").toggleClass("collapse")}})});$(function(){var t=$("#totop"),e=$("#totop-canvas"),i=$("#totop-percent"),n=e.width(),o=e.height(),s=n/2,a=parseInt((n-3)/2),r=e[0].getContext("2d");function l(t,e){r.beginPath();r.arc(s,s,a,-Math.PI/2,Math.PI*1.5*e,false);r.strokeStyle=t;r.lineCap="round";r.lineWidth=3;r.stroke()}t.click(function(){$("body, html").animate({scrollTop:0},800)});$(window).scroll(function(){var e=$(document).height()-$(window).height(),s=$(window).scrollTop(),a=parseInt(s/e*100);if(s>=200){t.addClass("display");r.clearRect(0,0,n,o);l("#efefef",1);l("#555555",a/100)}else t.removeClass("display");i.attr("data-percent",a)})});$(function(){var t=$("#toc");if(!visible(t))return;var e=t.children(),i;initAndUpdate(function(){i=e.height()});scrollSpy(t);makeSticky(t,{within:".post-body"});$(".toc-item").on("scrollspy",function(){var t=e.scrollTop(),n=$(this).children(".toc-link"),o=n.position().top;if($(this).height()!=n.height())return;if(o<=0)e.scrollTop(t+o);else if(i<=o)e.scrollTop(t+o+n.outerHeight()-i)})});$(function(){if(!$(".footnotes").length)return;$(".footnote-ref").each(function(){var t=$($(this).children("a").attr("href")),e=$("<span>",{class:"fn-content"}),i=$("<span>",{class:"fn-text"});t.find(".footnote-backref").remove();$(this).append(e.append(i.html(t.html())))});initAndUpdate(function(){var t=$(".fn-content").removeAttr("style");if($(window).width()<640)t.css("width",$(window).width()/2);else t.css("width",340);t.each(function(){var t=$(this).children(".fn-text").outerWidth();$(this).css({width:t,"margin-left":t/-2})})});var t=$();$("#primary").click(function(e){var i=$(e.target),n=i.closest(".footnote-ref");if(!t.is(n)){t.removeClass("active");n.addClass("active");t=n}else if(i.is("a"))t.toggleClass("active")})});$(function(){var t=$("#archive-nav");if(!visible(t))return;scrollSpy(t);makeSticky(t)});
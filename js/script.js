"use strict";function visible(t){return t.length&&!t.is(":hidden")}function dateDiffInDays(t,i){var e=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()),n=Date.UTC(i.getFullYear(),i.getMonth(),i.getDate());return Math.floor((n-e)/864e5)}function initAndUpdate(t){$(window).on("load",t).resize(t)}function scrollSpy(t,i){var e=$(t);if(!visible(e))return;i=i||{};var n=i.offset||0;var a=i.activeClassName||"active";var o=e.find("a").map(function(){var t=$($(this).attr("href"));if(t.length)return t[0]}),s=null,r=$();$(window).scroll(function(){var t=$(this).scrollTop()+n;var i=o.filter(function(){return $(this).offset().top<t}).last().attr("id")||"";if(s!==i){r.removeClass(a);var l=[];for(var c=e.find("[href='#"+i+"']");c.length&&!c.is(e);c=c.parent()){if(c.is("li"))l.push(c[0])}r=$(l).addClass(a).trigger("scrollspy");s=i}})}function makeSticky(t,i){var e=$(t);if(!visible(e))return;i=i||{};var n=$(i.below||"#header").height(),a=$(i.within||"#primary"),o=e.position().top,s=0;initAndUpdate(function(){var t=a.position().top+a.outerHeight();s=t-e.height()});$(window).scroll(function(){var t=$(window).scrollTop(),i;if(t<n)i=o-t;else if(s>t)i=o-n;else i=s-t;e.css("top",i)})}function template(t,i){var e=$(t).html().split(/\{\{([^\}]+)\}\}/g);return i.map(function(t){return e.map(function(t,i){return i%2?item[t]:t}).join("")})}$(function(){$("#friend-links").load("/parts/links.html");$("#recent-posts").load("/parts/recent-posts.html",function(t,i){if("success"===i){var e=$(this).find(".list").attr("data-suffix");$(this).find(".update-time").each(function(){var t=new Date($(this).attr("data-date")),i=dateDiffInDays(t,new Date);if(30>=i)$(this).html(i+e)})}})});$(function(){var t,i=false;$("#dropdown").hover(function(){var e=$(this);if(t){clearTimeout(t);t=null}if(!e.hasClass("active")){e.addClass("active");i=true}},function(){var e=$(this);if(e.hasClass("active")&&i){t=setTimeout(function(){e.removeClass("active");i=false;clearTimeout(t);t=null},100)}});$("#global-nav").click(function(){if($(window).width()<768){$(this).toggleClass("collapse")}})});$(function(){var t=$("#totop"),i=$("#totop-canvas"),e=$("#totop-percent"),n=i.width(),a=i.height(),o=n/2,s=parseInt((n-3)/2),r=i[0].getContext("2d");function l(t,i){r.beginPath();r.arc(o,o,s,-Math.PI/2,Math.PI*1.5*i,false);r.strokeStyle=t;r.lineCap="round";r.lineWidth=3;r.stroke()}t.click(function(){$("body, html").animate({scrollTop:0},800)});$(window).scroll(function(){var i=$(document).height()-$(window).height(),o=$(window).scrollTop(),s=parseInt(o/i*100);if(o>=200){t.addClass("display");r.clearRect(0,0,n,a);l("#efefef",1);l("#555555",s/100)}else t.removeClass("display");e.attr("data-percent",s)})});$(function(){var t=$("#toc");if(!visible(t))return;var i=t.children(),e=0;initAndUpdate(function(){e=i.height()});scrollSpy(t,{offset:200});makeSticky(t,{within:".post-body"});$(".toc-item").on("scrollspy",function(){var t=i.scrollTop(),n=$(this).children(".toc-link"),a=n.position().top;if($(this).height()!=n.height())return;if(a<=0)i.scrollTop(t+a);else if(e<=a)i.scrollTop(t+a+n.outerHeight()-e)})});$(function(){if(!$(".footnotes").length)return;$(".footnote-ref").each(function(){var t=$($(this).children("a").attr("href")),i=$("<span>",{"class":"fn-content"}),e=$("<span>",{"class":"fn-text"});t.find(".footnote-backref").remove();$(this).append(i.append(e.html(t.html())))});initAndUpdate(function(){var t=$(".fn-content").removeAttr("style");if($(window).width()<640)t.css("width",$(window).width()/2);else t.css("width",340);t.each(function(){var t=$(this).children(".fn-text").outerWidth();$(this).css({width:t,"margin-left":t/-2})})});var t=$();$("#primary").click(function(i){var e=$(i.target),n=e.closest(".footnote-ref");if(!t.is(n)){t.removeClass("active");n.addClass("active");t=n}else if(e.is("a"))t.toggleClass("active")})});$(function(){var t=$("#archive-nav");if(!visible(t))return;scrollSpy(t,{offset:150});makeSticky(t)});
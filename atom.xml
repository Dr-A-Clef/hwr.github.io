<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>BUG研发中心</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://unnamed42.github.io/"/>
  <updated>2018-04-20T17:13:27.243Z</updated>
  <id>https://unnamed42.github.io/</id>
  
  <author>
    <name>Dr. A. Clef</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>论如何拯救你的黑魂3存档</title>
    <link href="https://unnamed42.github.io/2018-04-04-rescue-darksoulsIII-save.html"/>
    <id>https://unnamed42.github.io/2018-04-04-rescue-darksoulsIII-save.html</id>
    <published>2018-04-03T18:26:16.000Z</published>
    <updated>2018-04-20T17:13:27.243Z</updated>
    
    <content type="html"><![CDATA[<p><del>王姐，</del>我的黑暗之魂3存档没了怎么办？</p><p><del>王姐，</del>我的黑暗之魂3号不小心删了怎么办？</p><p><s>上大铁棍子医院找童主任啊</s></p><a id="more"></a><p>steam版的黑魂3的存档居然不是云同步的，一代都有的功能，不知道宫崎英高怎么想的。</p><p>steam黑魂3的存档位置就在<code>C:\Users\用户名\AppData\Romaing\DarkSoulsIII\</code>下面的一个乱七八糟名字文件夹里面，文件扩展名是<code>.sl2</code>。<code>AppData</code>文件夹是隐藏的，你需要打开隐藏才能看见，或者直接在地址栏里输入名称。</p><p><code>C:\Users\用户名\</code>是Windows 7及以上的路径，如果你是Windows XP的话……哇，都2018了你还在用XP？</p><h2 id="重装系统了存档没了-怎么办？">重装系统了存档没了，怎么办？</h2><p><img src="/images/bianque-hopeless.png" alt="扁鹊三连"></p><h2 id="存档文件不小心删了-怎么办？">存档文件不小心删了，怎么办？</h2><p>文件被删这种事情好办，随便找个文件恢复软件试试就行了，只要你发现得不太晚，你的文件记录还没被覆盖掉那就万事大吉，否则……</p><p><img src="/images/bianque-hopeless.png" alt="扁鹊三连"></p><h2 id="手一抖删了个角色-怎么办？">手一抖删了个角色，怎么办？</h2><p>其实黑魂3的删除角色，并没有物理上的删除，你删之前是9090KB的存档文件，删之后依然是9090KB，只是在存档里把这部分空间标记为“可用”而已，和文件的删除是一个道理。要想恢复的话：</p><ol><li>首先把你的存档复制一份出来（是真的接下来有用，不是为了以防万一）；</li><li>然后打开游戏，创建一个角色，名字和你之前删掉的角色相同（出身、性别、脸型什么的不用相同），创建完成进入到灰烬墓地，此时小退，停留在“请按任意键”界面（别进主菜单，更加不要退出游戏）；</li><li>保持游戏运行，切出到文件管理，把你之前复制的那份存档直接覆盖到游戏存档；</li><li>切回游戏，进入你的那个角色，见证奇迹吧。</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;del&gt;王姐，&lt;/del&gt;我的黑暗之魂3存档没了怎么办？&lt;/p&gt;&lt;p&gt;&lt;del&gt;王姐，&lt;/del&gt;我的黑暗之魂3号不小心删了怎么办？&lt;/p&gt;&lt;p&gt;&lt;s&gt;上大铁棍子医院找童主任啊&lt;/s&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="生活娱乐" scheme="https://unnamed42.github.io/categories/%E7%94%9F%E6%B4%BB%E5%A8%B1%E4%B9%90/"/>
    
    
      <category term="黑暗之魂3" scheme="https://unnamed42.github.io/tags/%E9%BB%91%E6%9A%97%E4%B9%8B%E9%AD%823/"/>
    
  </entry>
  
  <entry>
    <title>jquery.min.js的async加载</title>
    <link href="https://unnamed42.github.io/2018-04-02-jquery-async-load.html"/>
    <id>https://unnamed42.github.io/2018-04-02-jquery-async-load.html</id>
    <published>2018-04-01T17:43:55.000Z</published>
    <updated>2018-04-20T17:27:19.307Z</updated>
    
    <content type="html"><![CDATA[<p>&#x4F5C;&#x4E3A;&#x6709;&#x70B9;&#x5F3A;&#x8FEB;&#x75C7;&#x7684;&#x4EBA;&#xFF0C;&#x770B;&#x89C1;&#x7AD9;&#x70B9;&#x901F;&#x5EA6;&#x8BC4;&#x6D4B;&#x7F51;&#x7AD9;&#x7ED9;&#x4F60;&#x7684;&#x535A;&#x5BA2;&#x52A0;&#x8F7D;&#x6263;&#x4E86;&#x5206;&#xFF0C;&#x539F;&#x56E0;&#x662F;<code>jquery.min.js</code>&#x5BFC;&#x81F4;&#x4E86;&#x4E00;&#x5927;&#x7968;js&#x662F;&#x540C;&#x6B65;&#x52A0;&#x8F7D;&#xFF0C;&#x8FD9;&#x600E;&#x4E48;&#x80FD;&#x5FCD;&#xFF1F;</p><a id="more"></a><h2 id="&#x8BD5;&#x8BD5;defer">&#x8BD5;&#x8BD5;defer</h2><p><code>defer</code>&#x5C5E;&#x6027;&#x8868;&#x793A;&#xFF0C;&#x8FD9;&#x4E2A;&#x811A;&#x672C;&#x5C06;&#x5728;&#x9875;&#x9762;&#x89E3;&#x6790;&#x5B8C;&#x6BD5;&#x4E4B;&#x540E;&#xFF0C;<code>DOMContentLoaded</code>&#x89E6;&#x53D1;&#x4E4B;&#x524D;&#x6267;&#x884C;&#xFF08;<a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script" target="_blank" rel="noopener">MDN</a>&#x662F;&#x8FD9;&#x4E48;&#x8BF4;&#x7684;&#xFF0C;&#x7C97;&#x7565;&#x626B;&#x4E86;&#x4E00;&#x4E0B;<a href="https://www.w3.org/TR/html5/semantics-scripting.html#element-attrdef-script-defer" target="_blank" rel="noopener">HTML5 spec</a>&#x5E76;&#x6CA1;&#x6709;&#x63D0;&#x5230;<code>defer</code>&#x6267;&#x884C;&#x987A;&#x5E8F;&#x7684;&#x4E8B;&#x60C5;&#xFF09;&#x3002;&#x770B;&#x8D77;&#x6765;&#x5F88;&#x7F8E;&#x597D;&#xFF0C;&#x4F46;&#x662F;&#x5176;&#x652F;&#x6301;&#x4E0D;&#x5982;<code>async</code>&#x5E7F;&#x6CDB;&#xFF0C;&#x800C;&#x4E14;&#x5185;&#x5D4C;<code>script</code>&#x4E5F;&#x6CA1;&#x6CD5;&#x7528;&#x4E86;&#x3002;&#x9664;&#x6B64;&#x4E4B;&#x5916;&#xFF0C;&#x4F60;&#x5F97;&#x6E05;&#x695A;&#x5730;&#x77E5;&#x9053;<code>script</code>&#x95F4;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x548C;<code>async</code>&#x4E00;&#x6837;&#x51FA;&#x73B0;<code>xxx is undefined</code>&#x8FD9;&#x6837;&#x7684;&#x4E8B;&#x60C5;&#x3002;</p><h2 id="so&#x5927;&#x6CD5;&#x597D;">SO&#x5927;&#x6CD5;&#x597D;&#xFF01;</h2><p>&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x6E90;&#x81EA;SO&#x7684;<a href="https://stackoverflow.com/a/46808443" target="_blank" rel="noopener">&#x8FD9;&#x7BC7;&#x56DE;&#x7B54;</a>&#x3002;</p><p>&#x5982;&#x679C;&#x76F4;&#x63A5;&#x628A;<code>jquery.min.js</code>&#x548C;&#x76F8;&#x5173;&#x811A;&#x672C;&#x6253;&#x4E0A;<code>async</code>&#xFF0C;&#x90A3;&#x4E48;&#xFF1A;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Uncaught ReferenceError: $ is not defined</span><br><span class="line">    at blahblah.html:3</span><br></pre></td></tr></table></figure><p>&#x539F;&#x6765;<code>async</code>&#x811A;&#x672C;&#x7684;&#x6267;&#x884C;&#x987A;&#x5E8F;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x4FDD;&#x969C;&#xFF0C;&#x60E8;&#x75DB;&#x7684;&#x6559;&#x8BAD;&#x3002;</p><p>&#x4F5C;&#x4E3A;&#x672C;&#x535A;&#x5BA2;&#x4E3B;&#x9898;&#x7684;&#x7EF4;&#x62A4;&#x8005;&#xFF0C;&#x6211;&#x62E5;&#x6709;&#x5168;&#x90E8;javascript&#x4EE3;&#x7801;&#x7684;&#x63A7;&#x5236;&#x6743;&#xFF0C;&#x56E0;&#x6B64;&#x6211;&#x77E5;&#x9053;&#x6211;&#x7684;&#x4EE3;&#x7801;&#x53EA;&#x662F;&#x4F9D;&#x8D56;<code>$(function() {...})</code>&#x7684;&#x3002;&#x65E2;&#x7136;&#x53EA;&#x7528;&#x5230;&#x4E86;<code>$(...)</code>&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x5C31;&#x505A;&#x4E00;&#x4E2A;&#x5047;&#x7684;<code>$</code>&#x51FA;&#x6765;&#xFF0C;&#x628A;&#x4F20;&#x7ED9;&#x5B83;&#x7684;&#x53C2;&#x6570;&#x4FDD;&#x5B58;&#x8D77;&#x6765;&#xFF0C;&#x5230;&#x771F;&#x6B63;&#x7684;jQuery&#x52A0;&#x8F7D;&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#x518D;&#x518D;<code>apply</code>&#x7ED9;&#x771F;&#x6B63;&#x7684;jQuery&#xFF0C;&#x5C82;&#x4E0D;&#x7F8E;&#x54C9;&#xFF1F;</p><p>&#x4FDD;&#x8BC1;&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x5728;&#x6240;&#x6709;&#x4F7F;&#x7528;&#x5230;&#x4E86;<code>$</code>&#x7684;&#x811A;&#x672C;&#x4E4B;&#x524D;&#x6267;&#x884C;&#xFF1A;</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(!(<span class="string">&quot;jQuery&quot;</span> <span class="keyword">in</span> <span class="built_in">window</span>)) {</span><br><span class="line">    <span class="built_in">window</span>._jqQ = []; <span class="comment">// jQuery call queue</span></span><br><span class="line">    <span class="built_in">window</span>.jQuery = <span class="built_in">window</span>.$ = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">        _jqQ.push(<span class="built_in">arguments</span>);</span><br><span class="line">    };</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x7136;&#x540E;&#x60F3;&#x529E;&#x6CD5;&#x8BA9;jQuery&#x52A0;&#x8F7D;&#x5B8C;&#x6210;&#x65F6;&#x6267;&#x884C;&#x8FD9;&#x6BB5;&#x811A;&#x672C;&#xFF08;&#x6211;&#x9009;&#x62E9;&#x4F7F;&#x7528;<code>script</code>&#x7684;<code>onload</code>&#xFF09;&#xFF1A;</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">_jqQ.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">args</span>) </span>{</span><br><span class="line">    $.apply($,args);</span><br><span class="line">});</span><br><span class="line"></span><br><span class="line"><span class="keyword">delete</span> <span class="built_in">window</span>._jqQ;</span><br></pre></td></tr></table></figure><h3 id="&#x672C;&#x65B9;&#x6CD5;&#x7684;&#x7F3A;&#x70B9;">&#x672C;&#x65B9;&#x6CD5;&#x7684;&#x7F3A;&#x70B9;</h3><p>&#x9996;&#x5148;&#xFF0C;&#x6240;&#x6709;jQuery&#x7684;&#x8C03;&#x7528;&#x90FD;&#x5F97;&#x5305;&#x88C5;&#x5728;<code>$(function() {...})</code>&#x91CC;&#x9762;&#xFF0C;&#x8FD9;&#x4E2A;&#x65E0;&#x6240;&#x8C13;&#x4E86;&#xFF0C;&#x4F46;&#x662F;<code>$(document).ready</code>&#x8FD9;&#x79CD;&#x5199;&#x6CD5;&#x662F;&#x4E0D;&#x884C;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x7684;&#x5047;<code>$</code>&#x5BF9;&#x8C61;&#x4E2D;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;jQuery&#x7684;API&#x3002;</p><p>&#x5176;&#x6B21;&#xFF0C;&#x8FD8;&#x662F;&#x56E0;&#x4E3A;API&#x7684;&#x7F18;&#x6545;&#xFF0C;&#x90A3;&#x79CD;&#x4F7F;&#x7528;<code>prototype</code>&#x6765;&#x505A;jQuery&#x6269;&#x5C55;&#x7684;&#x65B9;&#x6CD5;&#x5C31;&#x5E9F;&#x6389;&#x4E86;&#xFF08;<code>jQuery.fn</code>&#x5C31;&#x662F;&#x5B83;&#x7684;<code>prototype</code>&#xFF09;&#xFF0C;&#x4F60;&#x53EA;&#x80FD;&#x627E;&#x4E2A;&#x66FF;&#x4EE3;&#x54C1;&#x3002;<span class="spoiler">&#x6211;&#x7684;Bootstrap scrollspy&#x554A;&#xFF0C;&#x5C31;&#x8FD9;&#x4E48;&#x8BF4;&#x518D;&#x89C1;&#x4E86;</span></p><h3 id="&#x597D;&#x5B69;&#x5B50;&#x4E0D;&#x8981;&#x5B66;">&#x597D;&#x5B69;&#x5B50;&#x4E0D;&#x8981;&#x5B66;</h3><p>&#x4ECE;&#x70AB;&#x6280;&#x7684;&#x89D2;&#x5EA6;&#x51FA;&#x53D1;&#xFF0C;&#x4E27;&#x5FC3;&#x75C5;&#x72C2;&#x5730;&#x4F7F;&#x7528;<code>bind</code>&#x6765;&#x907F;&#x514D;&#x5728;<code>forEach</code>&#x90E8;&#x5206;&#x5199;&#x4E2A;<code>function</code>&#xFF0C;one liner&#x4E07;&#x5C81;&#xFF01;</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_jqQ.forEach($.apply.bind($, $));</span><br></pre></td></tr></table></figure><p><span class="spoiler">&#x5176;&#x5B9E;C++&#x51FA;&#x8EAB;&#x7684;&#x6211;&#x4E3A;&#x4E86;&#x60F3;&#x660E;&#x767D;&#x4E0A;&#x9762;&#x90A3;&#x6BB5;js&#x4EE3;&#x7801;&#x7684;<code>this</code>&#x95EE;&#x9898;&#xFF0C;&#x5934;&#x90FD;&#x70B8;&#x4E86;</span></p><p>&#x7136;&#x540E;&#x770B;&#x4E86;&#x4E00;&#x7BC7;&#x5173;&#x4E8E;<code>function</code>, <code>call</code>&#x548C;<code>bind</code>&#x7684;<a href="https://jsperf.com/bind-vs-closure-setup/32" target="_blank" rel="noopener">benchmark&#x8BC4;&#x6D4B;</a>&#xFF0C;&#x4EE5;&#x53CA;&#x4ECE;&#x53EF;&#x8BFB;&#x6027;&#x89D2;&#x5EA6;&#x8003;&#x8651;&#xFF0C;&#x679C;&#x65AD;&#x653E;&#x5F03;&#x70AB;&#x6280;&#x4EE3;&#x7801;&#xFF0C;&#x6734;&#x7D20;&#x624D;&#x662F;&#x771F;&#x554A;&#x3002;</p><h2 id="&#x53C2;&#x8003;&#x6587;&#x732E;">&#x53C2;&#x8003;&#x6587;&#x732E;</h2><ol><li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script" target="_blank" rel="noopener">&lt;script&gt;: The Script element</a></li><li><a href="https://www.w3.org/TR/html5/semantics-scripting.html#element-attrdef-script-defer" target="_blank" rel="noopener">The script element</a></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;#x4F5C;&amp;#x4E3A;&amp;#x6709;&amp;#x70B9;&amp;#x5F3A;&amp;#x8FEB;&amp;#x75C7;&amp;#x7684;&amp;#x4EBA;&amp;#xFF0C;&amp;#x770B;&amp;#x89C1;&amp;#x7AD9;&amp;#x70B9;&amp;#x901F;&amp;#x5EA6;&amp;#x8BC4;&amp;#x6D4B;&amp;#x7F51;&amp;#x7AD9;&amp;#x7ED9;&amp;#x4F60;&amp;#x7684;&amp;#x535A;&amp;#x5BA2;&amp;#x52A0;&amp;#x8F7D;&amp;#x6263;&amp;#x4E86;&amp;#x5206;&amp;#xFF0C;&amp;#x539F;&amp;#x56E0;&amp;#x662F;&lt;code&gt;jquery.min.js&lt;/code&gt;&amp;#x5BFC;&amp;#x81F4;&amp;#x4E86;&amp;#x4E00;&amp;#x5927;&amp;#x7968;js&amp;#x662F;&amp;#x540C;&amp;#x6B65;&amp;#x52A0;&amp;#x8F7D;&amp;#xFF0C;&amp;#x8FD9;&amp;#x600E;&amp;#x4E48;&amp;#x80FD;&amp;#x5FCD;&amp;#xFF1F;&lt;/p&gt;
    
    </summary>
    
      <category term="编程" scheme="https://unnamed42.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
    
      <category term="jQuery" scheme="https://unnamed42.github.io/tags/jQuery/"/>
    
  </entry>
  
  <entry>
    <title>VPS的使用方式——服务篇</title>
    <link href="https://unnamed42.github.io/2018-02-28-vps-services.html"/>
    <id>https://unnamed42.github.io/2018-02-28-vps-services.html</id>
    <published>2018-02-27T16:56:59.000Z</published>
    <updated>2018-06-21T16:39:22.918Z</updated>
    
    <content type="html"><![CDATA[<p>作为一名有着Google刚需的编程界人士，应该有随时随地都能访问Google等404服务的手段。除了给自己打开一扇世界之窗之外，VPS还有其他各种各样的打开方式。</p><p>如果你使用了<code>iptables</code>等防火墙，记得配置完之后开放对应的端口。</p><p>UPDATED 2018/6/22: 修改SS配置样例</p><a id="more"></a><h2 id="科学上网">科学上网</h2><p>相信大多数人买个VPS的目的就是为了科学上网。Debian 9默认源里就有<code>shadowsocks-libev</code>，不过我还是推荐从<code>stretch-backports</code>里安装最新版。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt -t stretch-backports install shadowsocks-libev</span><br><span class="line"><span class="comment"># 利用systemd开启shadowsocks</span></span><br><span class="line">systemctl <span class="built_in">enable</span> shadowsocks-libev-server@config.service &amp;&amp; systemctl start shadowsocks-libev-server@config.service</span><br></pre></td></tr></table></figure><p>之后创建<code>/etc/shadowsocks-libev/config.json</code>：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"server"</span>: <span class="string">"0.0.0.0"</span>,</span><br><span class="line">    <span class="attr">"server_port"</span>: &lt;ss-port-number&gt;,</span><br><span class="line">    <span class="attr">"local_address"</span>: <span class="string">"127.0.0.1"</span>,</span><br><span class="line">    <span class="attr">"local_port"</span>: <span class="number">1080</span>,</span><br><span class="line">    <span class="attr">"password"</span>: <span class="string">"&lt;ss-password&gt;"</span>,</span><br><span class="line">    <span class="attr">"timeout"</span>: <span class="number">60</span>,</span><br><span class="line">    <span class="attr">"method"</span>: <span class="string">"aes-256-cfb"</span>,</span><br><span class="line">    <span class="attr">"fast_open"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"workers"</span>: <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果你需要IPv4和IPv6双栈的SS，那么针对<code>shadowsocks-libev</code>来说<code>server</code>得设置成<code>[&quot;[::0]&quot;,&quot;0.0.0.0&quot;]</code>。网上其他文章里说设置成<code>&quot;[::0]&quot;</code>就行的，那是针对其他SS服务器端，在<code>shadowsocks-libev</code>就得这么设置。</p><p><code>server_port</code>是给SS服务器端分配的端口号，记得选个不那么常用的（被各大教程使用的8080端口由于使用人数太多导致极其容易被监测）。还有些人喜欢占用https的443端口假装自己是在浏览网页，其实这种做法……破绽很大，因为能够在443上面发现明显不是https协议的通讯。要想真正的假装在上http/https，还得用SSR的混淆功能，或者是<code>simple-obfs</code>插件。</p><p>在其他地方教程的配置文件中，可能会有<code>local_port</code>和<code>local_address</code>这两个对SS服务器端完全无用的条目，不建议填写。在<code>shadowsocks-libev</code>更新3.2.0之后，我的服务器端如果有这两个条目会直接导致服务器端启动报错。</p><p><code>fast_open</code>建议关闭，开启的话会增大你被发现的机率<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>。</p><p><code>method</code>指定一个加密算法，最简单、计算速度最快的是<code>rc4-md5</code>但是容易被查出来（RC4和MD5算法都已经被攻破了）；兼容性好的是<code>aes-256-cfb</code>；新潮的就使用<code>chacha20</code>系列（计算量比AES系列小，因此对移动端有加成），但是可能部分SS客户端不支持这系列算法。在这里要强调一点：SS的加密算法设计出来并不是为了保证数据安全，而是为了加密流量增加方校长他们的监测难度。加密算法在网络速度中占不了太大比重，反倒是服务器带宽最重要。</p><p>iOS的SS客户端我使用<a href="https://itunes.apple.com/us/app/firstwingy/id1316416848?mt=8" target="_blank" rel="noopener">FirstWingy</a>（不支持SSR），Wingy国区弄不到，小火箭又要钱……</p><p>如果你担心自己的SS被查出来，那么可以去使用SSR开启混淆；如果你觉得你的SS速度太慢，可以外面套一层<a href="https://github.com/xtaci/kcptun" target="_blank" rel="noopener">kcptun</a>加速（kcptun是通过多发包消耗流量来换取速度，慎用）。</p><p>如果你想给SS配置多个用户的话，那么删掉<code>server_port</code>和<code>password</code>，改成如下内容：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    ...,</span><br><span class="line">    "port_password": &#123;</span><br><span class="line">        "&lt;port1&gt;": "&lt;password1&gt;",</span><br><span class="line">        "&lt;port2&gt;": "&lt;password2&gt;",</span><br><span class="line">        ...</span><br><span class="line">    &#125;,</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>但是<code>shadowsocks-libev</code>主程序<code>ss-server</code>不支持<code>port_password</code>选项，要么更换成<code>ss-manager</code>，要么<code>ss-server</code>多开。下面是我用的systemd service unit文件（文件名为<code>ss-manager@.service</code>）：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Unit]</span></span><br><span class="line"><span class="attr">Description</span>=Shadowsocks manager server</span><br><span class="line"><span class="attr">After</span>=network.target</span><br><span class="line"></span><br><span class="line"><span class="section">[Service]</span></span><br><span class="line"><span class="attr">Type</span>=simple</span><br><span class="line"><span class="attr">ExecStart</span>=/usr/bin/ss-manager --manager-address /var/run/shadowsocks-manager.sock -c /etc/shadowsocks-libev/%i.json</span><br><span class="line"></span><br><span class="line"><span class="section">[Install]</span></span><br><span class="line"><span class="attr">WantedBy</span>=multi-user.target</span><br></pre></td></tr></table></figure><p>不过据说SS给多人使用会增加被发现的机率。</p><h2 id="aria2离线下载">aria2离线下载</h2><p>百度云的离线下载容易被查，离线完了下载速度还有限制，超烦的。都有了自己的服务器为什么不自己弄一个离线下载呢？</p><p><a href="https://aria2.github.io/" target="_blank" rel="noopener">aria2</a>是一个轻量级的下载器，还支持多线程下载、BT/磁力下载，还提供了JSON/XML的远程控制方式，超强。</p><p>首先来一发<code>apt install aria2</code>安装好。之后创建文件<code>/etc/aria2/aria2.conf</code>作为aria2的配置：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载目的地，自己选个路径吧</span></span><br><span class="line">dir=/var/www/files</span><br><span class="line"><span class="comment"># 开启断点续传</span></span><br><span class="line"><span class="built_in">continue</span>=<span class="literal">true</span></span><br><span class="line"><span class="comment"># 保存/读取未完成任务，需要创建一个空文件/etc/aria2/aria2.session</span></span><br><span class="line">input-file=/etc/aria2/aria2.session</span><br><span class="line">save-session=/etc/aria2/aria2.session</span><br><span class="line"><span class="comment"># 日志路径，需要创建空文件/var/log/aria2.log</span></span><br><span class="line"><span class="built_in">log</span>=/var/<span class="built_in">log</span>/aria2.log</span><br><span class="line"><span class="comment"># 日志等级</span></span><br><span class="line"><span class="built_in">log</span>-level=warn</span><br><span class="line"></span><br><span class="line"><span class="comment"># 最大下载线程</span></span><br><span class="line">max-concurrent-downloads=10</span><br><span class="line">max-connection-per-server=5</span><br><span class="line"><span class="comment"># 文件分块下载最小大小</span></span><br><span class="line">min-split-size=10M</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开启RPC</span></span><br><span class="line"><span class="built_in">enable</span>-rpc=<span class="literal">true</span></span><br><span class="line"><span class="comment"># 为了使用Web端控制台，必须开启这两项</span></span><br><span class="line">rpc-allow-origin-all=<span class="literal">true</span></span><br><span class="line">rpc-listen-all=<span class="literal">true</span></span><br><span class="line"><span class="comment"># RPC端口，默认6800</span></span><br><span class="line">rpc-listen-port=6800</span><br><span class="line"><span class="comment"># RPC控制的密码，最好是开启</span></span><br><span class="line">rpc-secret=PyaM9DBv</span><br><span class="line"><span class="comment"># 使用SSL加密，可选</span></span><br><span class="line">rpc-secure=<span class="literal">true</span></span><br><span class="line">rpc-certificate=&lt;certificate-file&gt;</span><br><span class="line">rpc-private-key=&lt;private-key-file&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 磁力下载到种子之后暂停，而不是自动下载全部文件</span></span><br><span class="line">pause-metadata=<span class="literal">true</span></span><br><span class="line"><span class="comment"># 保存DHT的路径，需要创建空文件/etc/aria2/dht&#123;,6&#125;.dat</span></span><br><span class="line">dht-file-path=/etc/aria2/dht.dat</span><br><span class="line">dht-file-path6=/etc/aria2/dht6.dat</span><br><span class="line"><span class="comment"># 伪装为Transmission客户端</span></span><br><span class="line">peer-id-prefix=-TR2770-</span><br><span class="line">user-agent=Transmission/2.77</span><br><span class="line"><span class="comment"># BT断点续传需要，可以开启</span></span><br><span class="line">bt-seed-unverified=<span class="literal">true</span></span><br><span class="line"><span class="comment"># 保存磁力下载到的种子文件</span></span><br><span class="line">bt-save-metadata=<span class="literal">true</span></span><br></pre></td></tr></table></figure><p>之后写一个<code>aria2c.service</code>来配置aria2后端，可以放在<code>/etc/systemd/system/</code>或者<code>/lib/systemd/system/</code>里：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Unit]</span></span><br><span class="line"><span class="attr">Description</span>=Aria2 download manager</span><br><span class="line"><span class="attr">After</span>=network.target</span><br><span class="line"></span><br><span class="line"><span class="section">[Service]</span></span><br><span class="line"><span class="attr">Type</span>=simple</span><br><span class="line"><span class="attr">ExecStart</span>=/usr/bin/aria2c --console-log-level=warn --enable-rpc --rpc-listen-all --conf-path=/etc/aria2/aria2.conf</span><br><span class="line"></span><br><span class="line"><span class="section">[Install]</span></span><br><span class="line"><span class="attr">WantedBy</span>=multi-user.target</span><br></pre></td></tr></table></figure><p>之后<code>systemctl daemon-reload &amp;&amp; systemctl enable aria2c &amp;&amp; systemctl start aria2c</code>就行了。</p><p>如果你需要BT作种，得开放对应的端口。在VPS上其实不推荐使用BT下载，因为盗版大多数是BT，VPS服务商为了避免版权纠纷在这方面查得比较严，稍有不慎你的VPS就可能会被封掉。</p><p>配置好aria2后端之后推荐使用一个WebUI配套。我个人推荐使用<a href="https://github.com/mayswind/AriaNg" target="_blank" rel="noopener">AriaNG</a>，还有很多其他的可以用。你可以在自己的VPS上放一个WebUI，也可以用别人做好的。WebUI在哪里都无所谓，毕竟是远程管理不用和aria2后端放在一起。以下是比较有名的WebUI：</p><ul><li>AriaNG - <a href="https://github.com/mayswind/AriaNg" target="_blank" rel="noopener">source</a> - <a href="http://ariang.mayswind.net/latest/" target="_blank" rel="noopener">WebUI</a></li><li>webui-aria2 - <a href="https://github.com/ziahamza/webui-aria2" target="_blank" rel="noopener">source</a> - <a href="https://ziahamza.github.io/webui-aria2/" target="_blank" rel="noopener">WebUI</a></li><li>yaaw - <a href="https://github.com/binux/yaaw" target="_blank" rel="noopener">source</a> - <a href="http://binux.github.io/yaaw/demo/" target="_blank" rel="noopener">WebUI</a></li></ul><h2 id="kms服务器">KMS服务器</h2><p>KMS是用于激活微软批量授权产品的技术，网上很多Windows/Office授权破解其实是自己弄了个KMS服务器，然后每180天上这里来刷新一下授权状态。网上流传很多KMS破解工具，但是用起来实在不放心，带毒没带毒你也说不好，不如自己弄一个KMS省心。</p><p>要弄自己的KMS的话你得使用<a href="https://github.com/Wind4/vlmcsd" target="_blank" rel="noopener">vlmcsd</a>，它是一个KMS模拟器，支持许多代协议。从vlmcsd <a href="https://github.com/Wind4/vlmcsd/releases" target="_blank" rel="noopener">Releases</a>下载编译好的二进制（目前最新的版本是<a href="https://github.com/Wind4/vlmcsd/releases/download/svn1111/binaries.tar.gz" target="_blank" rel="noopener">svn1111</a>），再写一个systemd unit，差不多就配置完了。</p><p>KMS服务的端口号是TCP的<code>1688</code>，记得打开。</p><p>压缩包里包含了所有平台所有OS的二进制，我们这个64位Debian 9就选择<code>Linux/intel/glibc/vlmcsd-x64-glibc</code>就行了（注意有个<code>d</code>），解压之后放到<code>/usr/local/bin/</code>。</p><p>创建<code>vlmcsd.service</code>如下：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Unit]</span></span><br><span class="line"><span class="attr">Description</span>=KMS Emulator</span><br><span class="line"><span class="attr">After</span>=network.target</span><br><span class="line"></span><br><span class="line"><span class="section">[Service]</span></span><br><span class="line"><span class="attr">Type</span>=simple</span><br><span class="line"><span class="attr">User</span>=nobody</span><br><span class="line"><span class="attr">ExecStart</span>=/usr/local/bin/vlmcsd -D -e</span><br><span class="line"></span><br><span class="line"><span class="section">[Install]</span></span><br><span class="line"><span class="attr">WantedBy</span>=multi-user.target</span><br></pre></td></tr></table></figure><p>（可选）创建<code>vlmcsd.socket</code>如下：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Unit]</span></span><br><span class="line"><span class="attr">Description</span>=KMS Emulator socket</span><br><span class="line"></span><br><span class="line"><span class="section">[Socket]</span></span><br><span class="line"><span class="attr">ListenStream</span>=<span class="number">1688</span></span><br><span class="line"><span class="attr">Accept</span>=<span class="literal">yes</span></span><br><span class="line"></span><br><span class="line"><span class="section">[Install]</span></span><br><span class="line"><span class="attr">WantedBy</span>=sockets.target</span><br></pre></td></tr></table></figure><p><code>daemon-reload</code>, <code>enable</code>, <code>start</code>三连，OK。</p><h3 id="kms激活windows">KMS激活Windows</h3><p>开一个管理员权限的cmd，然后：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 设置对应Windows版本的批量授权序列号</span><br><span class="line">slmgr -ipk xxxxx-xxxxx-xxxxx-xxxxx</span><br><span class="line"># 设置KMS服务器地址</span><br><span class="line">slmgr /skms &lt;VPS IP或域名&gt;</span><br><span class="line"># 执行激活</span><br><span class="line">slmgr /ato</span><br></pre></td></tr></table></figure><p>有关序列号，访问<a href="https://technet.microsoft.com/en-us/library/jj612867.aspx" target="_blank" rel="noopener">Appendix A: KMS Client Setup Keys</a>找到自己系统对应的序列号。</p><h3 id="kms激活office">KMS激活Office</h3><p>此方法仅支持VOL版Office，零售版是不支持的。</p><p>开一个管理员权限的cmd，进入你的Office目录（比如Office 2016 64位就需要进入<code>C:\Program Files\Microsoft Office\Office16</code>，如果目录正确的话应该有个<code>OSPP.VBS</code>的文件），然后：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 配置KMS服务器</span><br><span class="line">cscript ospp.vbs /sethst:&lt;VPS IP或域名&gt;</span><br><span class="line"># 开始激活</span><br><span class="line">cscript ospp.vbs /act</span><br><span class="line"># 检查激活状态</span><br><span class="line">cscript ospp.vbs /dstatus</span><br></pre></td></tr></table></figure><p>如果激活状态中出现<code>LICENSE STATUS: —LICENSED—</code>说明成功了。</p><h2 id="私有云盘服务">私有云盘服务</h2><p>神奇的8秒教育视频把你的小姐姐给替换没了，好气啊，怎么办？自己弄一个云盘服务啊！</p><p>出现得早的<a href="https://owncloud.org/" target="_blank" rel="noopener">ownCloud</a>和它的fork <a href="https://nextcloud.com/" target="_blank" rel="noopener">nextCloud</a>都需要LAMP环境，我这种小门小户的小鸡支撑不起。<a href="https://www.seafile.com/home/" target="_blank" rel="noopener">Seafile</a>是Python开发、可以使用SQLite做MySQL的替代，就它了。其实还有其他更加轻量级的私有云方案，比如<a href="https://syncthing.net/" target="_blank" rel="noopener">Syncthing</a>，但它没有好用的iOS客户端，只好忍痛放弃了。</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="https://github.com/shadowsocks/shadowsocks-libev/issues/1552" target="_blank" rel="noopener">tcp fast open可能会导致ss被发现？</a> <a href="#fnref1" class="footnote-backref">↩</a></p></li></ol></section>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;作为一名有着Google刚需的编程界人士，应该有随时随地都能访问Google等404服务的手段。除了给自己打开一扇世界之窗之外，VPS还有其他各种各样的打开方式。&lt;/p&gt;&lt;p&gt;如果你使用了&lt;code&gt;iptables&lt;/code&gt;等防火墙，记得配置完之后开放对应的端口。&lt;/p&gt;&lt;p&gt;UPDATED 2018/6/22: 修改SS配置样例&lt;/p&gt;
    
    </summary>
    
      <category term="学习" scheme="https://unnamed42.github.io/categories/%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="VPS" scheme="https://unnamed42.github.io/tags/VPS/"/>
    
  </entry>
  
  <entry>
    <title>VPS的使用方式——配置篇</title>
    <link href="https://unnamed42.github.io/2018-02-27-vps-configs.html"/>
    <id>https://unnamed42.github.io/2018-02-27-vps-configs.html</id>
    <published>2018-02-27T13:54:15.000Z</published>
    <updated>2018-03-05T13:13:39.904Z</updated>
    
    <content type="html"><![CDATA[<p>&#x51FA;&#x4E8E;&#x5F04;&#x4E2A;&#x5B8C;&#x5168;&#x5728;&#x638C;&#x63A7;&#x4E4B;&#x4E2D;&#x7684;&#x68AF;&#x5B50;&#x7684;&#x60F3;&#x6CD5;&#xFF0C;&#x6211;&#x5728;&#x4E00;&#x6708;&#x65F6;&#x62A2;&#x5230;&#x4E86;<a href="https://bwh1.net/aff.php?aff=3525&amp;pid=53" target="_blank" rel="noopener">&#x642C;&#x74E6;&#x5DE5;&#x4E2D;&#x56FD;&#x5927;&#x9646;&#x76F4;&#x8FDE;&#x4F18;&#x5316;&#x5957;&#x9910;</a>&#xFF0C;512M&#x5185;&#x5B58;&#x3001;10G SSD&#x3001;1T&#x6D41;&#x91CF;/&#x6708;&#x3001;&#x8D85;&#x9AD8;&#x5E26;&#x5BBD;&#x3001;$19.99&#xFF08;&#xFFE5;120&#x5DE6;&#x53F3;&#xFF09;/&#x5E74;&#xFF0C;&#x8D70;&#x8FC7;&#x8DEF;&#x8FC7;&#x4E0D;&#x8981;&#x9519;&#x8FC7;&#x3002;&#x5728;&#x6B64;&#x611F;&#x8C22;&#x77E5;&#x4E4E;<a href="https://www.zhihu.com/people/feng-shuo-3" target="_blank" rel="noopener">@&#x51AF;&#x7855;</a>&#x7684;&#x56DE;&#x7B54;<a href="https://www.zhihu.com/question/20800554/answer/71397836" target="_blank" rel="noopener">&#x6709;&#x54EA;&#x4E9B;&#x4FBF;&#x5B9C;&#x7A33;&#x5B9A;&#xFF0C;&#x901F;&#x5EA6;&#x4E5F;&#x4E0D;&#x9519;&#x7684;Linux VPS &#x63A8;&#x8350;&#xFF1F;</a>&#x642C;&#x74E6;&#x5DE5;&#x4EF7;&#x683C;&#x4EB2;&#x6C11;&#xFF0C;&#x652F;&#x4ED8;&#x65B9;&#x4FBF;&#xFF08;&#x53EF;&#x4EE5;&#x652F;&#x4ED8;&#x5B9D;&#xFF09;&#xFF0C;&#x8FD8;&#x4E0D;&#x5FEB;&#x53BB;&#x4E70;&#xFF1F;</p><p>&#x76F4;&#x8FDE;&#x4F18;&#x5316;&#x5957;&#x9910;&#x76F8;&#x6BD4;<a href="https://bwh1.net/cart.php?a=add&amp;pid=43" target="_blank" rel="noopener">&#x901A;&#x7528;&#x5957;&#x9910;</a>&#x636E;&#x8BF4;&#x662F;&#x5BF9;&#x5927;&#x9646;&#x4E09;&#x7F51;&#x6709;&#x4F18;&#x5316;&#xFF0C;&#x800C;&#x4E14;&#x76F8;&#x6BD4;&#x6765;&#x8BF4;&#x6708;&#x6D41;&#x91CF;&#x7FFB;&#x4E86;&#x4E00;&#x500D;&#xFF0C;&#x4E0D;&#x8FC7;&#x552F;&#x4E00;&#x7684;&#x7F3A;&#x70B9;&#x662F;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x673A;&#x623F;&#x7ED9;&#x4F60;&#x4F7F;&#x7528;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x51FA;&#x4E86;&#x4E8B;&#x7684;&#x8BDD;&#x4F60;&#x7684;IP&#x662F;&#x6362;&#x4E0D;&#x4E86;&#x7684;&#xFF0C;&#x6362;&#x53E5;&#x8BDD;&#x8BF4;&#x8FD9;&#x4E2A;VPS&#x4F60;&#x5C31;&#x7838;&#x624B;&#x4E0A;&#x4E86;&#xFF08;&#x8D2D;&#x4E70;30&#x5929;&#x5185;&#x53EF;&#x9000;&#x6B3E;&#xFF0C;&#x8FD9;&#x6837;&#x81F3;&#x5C11;&#x635F;&#x5931;&#x4E0D;&#x5927;&#xFF09;&#xFF0C;&#x6240;&#x4EE5;&#x4E14;&#x7528;&#x4E14;&#x73CD;&#x60DC;&#x3002;<a href="http://www.bwh1.net/aff.php?aff=3525&amp;pid=56" target="_blank" rel="noopener">&#x7535;&#x4FE1;CN2&#x7279;&#x522B;&#x7248;</a>&#x8D35;&#x4E86;10&#x7F8E;&#x91D1;&#xFF0C;&#x9664;&#x4E86;&#x7535;&#x4FE1;&#x7528;&#x6237;&#x901F;&#x5EA6;&#x63D0;&#x5347;&#x4E4B;&#x5916;&#xFF0C;&#x786C;&#x76D8;&#x4E5F;&#x7ED9;&#x780D;&#x4E86;5G&#x3002;&#x4E2A;&#x4EBA;&#x89C9;&#x5F97;&#x4E0D;&#x662F;&#x90A3;&#x4E48;&#x503C;&#xFF0C;&#x6BD5;&#x7ADF;&#x8D70;&#x6765;&#x56DE;&#x4E00;&#x8D9F;&#x6D1B;&#x6749;&#x77F6;100ms&#x5EF6;&#x8FDF;&#x662F;&#x8DD1;&#x4E0D;&#x4E86;&#x7684;&#x3002;</p><p>&#x5BF9;&#x4E86;&#xFF0C;&#x8D2D;&#x4E70;&#x7684;&#x65F6;&#x5019;&#x5C3D;&#x91CF;&#x4E70;KVM&#x67B6;&#x6784;&#x7684;&#xFF0C;&#x5B8C;&#x5168;&#x865A;&#x62DF;&#xFF0C;&#x53EF;&#x4EE5;&#x73A9;&#x7684;&#x9ED1;&#x79D1;&#x6280;&#x6BD4;OpenVZ&#x67B6;&#x6784;&#x7684;&#x4E0D;&#x77E5;&#x9053;&#x591A;&#x5230;&#x54EA;&#x91CC;&#x53BB;&#x4E86;&#x3002;</p><span class="spoiler">&#x642C;&#x74E6;&#x5DE5;6% off&#x4F18;&#x60E0;&#x7801; BWH1ZBPVK</span><a id="more"></a><h2 id="&#x5F04;&#x4E2A;&#x57DF;&#x540D;">&#x5F04;&#x4E2A;&#x57DF;&#x540D;</h2><p>&#x5F04;&#x4E2A;&#x4E2A;&#x6027;&#x57DF;&#x540D;&#x65B9;&#x4FBF;&#x81EA;&#x5DF1;&#x9020;&#x798F;&#x4ED6;&#x4EBA;&#x3002;&#x9996;&#x5148;&#x4ECE;&#x57DF;&#x540D;&#x670D;&#x52A1;&#x5546;&#x4E70;&#x4E2A;&#x57DF;&#x540D;&#xFF0C;&#x63A8;&#x8350;<a href="https://www.godaddy.com/" target="_blank" rel="noopener">godaddy</a>&#xFF0C;&#x90A3;&#x91CC;&#x751A;&#x81F3;&#x53EF;&#x4EE5;&#x652F;&#x4ED8;&#x5B9D;&#x3002;&#x8981;&#x662F;&#x5FC3;&#x75BC;&#x94B1;&#x7684;&#x8BDD;&#xFF0C;&#x4E0A;<a href="http://freenom.com/" target="_blank" rel="noopener">freenom</a>&#x5F04;&#x4E2A;&#x4E00;&#x5E74;&#x514D;&#x8D39;&#x7684;.tk&#x57DF;&#x540D;&#xFF0C;&#x5230;&#x671F;&#x8FD8;&#x53EF;&#x4EE5;&#x514D;&#x8D39;&#x7EED;&#x3002;&#x514D;&#x8D39;&#x57DF;&#x540D;&#x7684;&#x7F3A;&#x70B9;&#x662F;&#x9996;&#x5148;tk&#x57DF;&#x540D;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#x4E0D;&#x4F1A;&#x4E3B;&#x52A8;&#x6536;&#x5F55;&#xFF0C;&#x5176;&#x6B21;&#x5982;&#x679C;&#x4F60;&#x7684;&#x57DF;&#x540D;&#x4EF7;&#x503C;&#x5347;&#x9AD8;&#x7684;&#x8BDD;&#x670D;&#x52A1;&#x5546;&#x4F1A;&#x6084;&#x6084;&#x5730;&#x6536;&#x56DE;&#x3002;&#x6700;&#x540E;&#xFF0C;<strong>&#x5343;&#x4E07;&#x5343;&#x4E07;&#x4E0D;&#x8981;&#x4E70;cn&#x57DF;&#x540D;</strong>&#x3002;</p><p>&#x5F04;&#x5230;&#x57DF;&#x540D;&#x4E4B;&#x540E;&#xFF0C;&#x4E0A;<a href="https://www.dnspod.cn/" target="_blank" rel="noopener">DNSPod</a>&#x6DFB;&#x52A0;&#x81EA;&#x5DF1;&#x7684;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x8BB0;&#x5F55;&#xFF0C;&#x540C;&#x65F6;&#x5728;&#x57DF;&#x540D;&#x63D0;&#x4F9B;&#x5546;&#x90A3;&#x91CC;&#x628A;&#x81EA;&#x5DF1;&#x57DF;&#x540D;&#x7684;NS&#xFF08;nameserver&#xFF09;&#x6539;&#x6210;DNSPod&#x7684;NS&#x3002;&#x8FD9;&#x4E00;&#x90E8;&#x5206;&#x7684;&#x56FE;&#x6587;&#x6559;&#x7A0B;&#x53EF;&#x4EE5;&#x53C2;&#x8003;<a href="https://sspai.com/post/40615" target="_blank" rel="noopener">&#x5C11;&#x6570;&#x6D3E;&#x2014;&#x2014;&#x514D;&#x8D39;&#x57DF;&#x540D;&#x7533;&#x8BF7;&#x53CA;&#x4F7F;&#x7528;</a>&#x3002;DNSPod&#x8BB0;&#x5F55;&#x6DFB;&#x52A0;&#x540E;&#x6700;&#x8FDF;72&#x5C0F;&#x65F6;&#x540E;&#x751F;&#x6548;&#xFF0C;&#x751F;&#x6548;&#x4E4B;&#x540E;&#x7684;&#x8BB0;&#x5F55;&#x4FEE;&#x6539;&#x751F;&#x6548;&#x5C31;&#x98DE;&#x5FEB;&#x4E86;&#x3002;</p><h2 id="ssh&#x5BC6;&#x94A5;&#x767B;&#x5F55;">ssh&#x5BC6;&#x94A5;&#x767B;&#x5F55;</h2><p>&#x642C;&#x74E6;&#x5DE5;&#x5728;&#x8FD9;&#x65B9;&#x9762;&#x505A;&#x5F97;&#x597D;&#xFF0C;&#x9ED8;&#x8BA4;ssh&#x7AEF;&#x53E3;&#x548C;&#x9ED8;&#x8BA4;root&#x5BC6;&#x7801;&#x90FD;&#x662F;&#x968F;&#x673A;&#x7684;&#x3002;&#x4E0D;&#x8FC7;&#x6211;&#x4EEC;&#x8981;&#x5728;&#x6B64;&#x57FA;&#x7840;&#x4E0A;&#x66F4;&#x8FDB;&#x4E00;&#x6B65;&#xFF0C;&#x4F7F;&#x7528;&#x5BC6;&#x94A5;&#x767B;&#x5F55;ssh&#x5E76;&#x7981;&#x6B62;&#x5BC6;&#x7801;&#x767B;&#x5F55;&#x3002;&#x9996;&#x5148;&#x751F;&#x6210;&#x6211;&#x4EEC;&#x7684;ssh&#x5BC6;&#x94A5;&#xFF0C;&#x5728;&#x672C;&#x5730;&#x6216;&#x8005;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x90FD;&#x53EF;&#x4EE5;&#xFF1A;</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure><p>&#x622A;&#x81F3;2018/02/27&#xFF0C;Windows 10&#x7684;OpenSSH Beta&#x7248;&#x5BA2;&#x6237;&#x7AEF;&#x4F9D;&#x7136;&#x4E0D;&#x652F;&#x6301;RSA&#x683C;&#x5F0F;&#x5BC6;&#x94A5;&#xFF0C;&#x53EA;&#x652F;&#x6301;ED25519&#x683C;&#x5F0F;<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>&#xFF0C;&#x6240;&#x4EE5;&#x4F7F;&#x7528;&#x5BC6;&#x94A5;&#x767B;&#x5F55;&#x7684;&#x8BDD;&#x5728;Windows&#x4E0A;&#x8FD8;&#x662F;&#x5F97;&#x7528;<a href="https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html" target="_blank" rel="noopener">PuTTY</a>&#x3002;</p><p>&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#x5E94;&#x8BE5;&#x4F1A;&#x751F;&#x6210;&#x4E24;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;<code>id_rsa</code>&#xFF08;&#x79C1;&#x94A5;&#xFF09;&#x548C;<code>id_rsa.pub</code>&#xFF08;&#x516C;&#x94A5;&#xFF09;&#x3002;&#x628A;&#x516C;&#x94A5;&#x6587;&#x4EF6;&#x5F04;&#x8FDB;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x7684;<code>~/.ssh/authorized_keys</code>&#x6587;&#x4EF6;&#x91CC;&#x9762;&#x5C31;&#x5DEE;&#x4E0D;&#x591A;&#x4E86;&#x3002;&#x5728;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x751F;&#x6210;&#x7684;&#x5C31;&#x76F4;&#x63A5;<code>mv</code>&#xFF0C;&#x8BB0;&#x5F97;&#x628A;&#x79C1;&#x94A5;&#x5F04;&#x4E0B;&#x6765;&#xFF1B;&#x672C;&#x5730;&#x751F;&#x6210;&#x7684;&#x5C31;&#x4F7F;&#x7528;</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat ~/.ssh/id_rsa.pub | ssh &lt;username&gt;@&lt;address&gt; <span class="string">&quot;mkdir -p ~/.ssh &amp;&amp; chmod 700 ~/.ssh &amp;&amp; cat &gt;&gt;  ~/.ssh/authorized_keys&quot;</span></span><br></pre></td></tr></table></figure><p>&#x5C06;&#x5BC6;&#x94A5;&#x9001;&#x4E0A;&#x53BB;&#x3002;</p><p>&#x63A5;&#x4E0B;&#x6765;&#x914D;&#x7F6E;&#x672C;&#x5730;&#x548C;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x7684;ssh&#xFF1A;</p><p>&#x5728;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#xFF0C;&#x4FEE;&#x6539;<code>/etc/ssh/ssh<strong>d</strong>_config</code>&#xFF08;&#x6CE8;&#x610F;&#x662F;&#x6709;<code>d</code>&#x7684;&#x90A3;&#x4E2A;&#xFF09;&#xFF1A;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># &#x4F7F;&#x7528;&#x5B89;&#x5168;&#x7684;&#x4E8C;&#x4EE3;&#x534F;&#x8BAE;</span><br><span class="line">Protocol 2</span><br><span class="line"># &#x4FEE;&#x6539;&#x670D;&#x52A1;&#x5668;&#x7AEF;ssh&#x7AEF;&#x53E3;&#x53F7;</span><br><span class="line">Port &lt;port-number&gt;</span><br><span class="line"># &#x9650;&#x5236;root&#x53EA;&#x80FD;&#x5BC6;&#x94A5;&#x767B;&#x5F55;</span><br><span class="line">PermitRootLogin without-password</span><br><span class="line"># &#x542F;&#x7528;&#x5BC6;&#x94A5;&#x767B;&#x5F55;</span><br><span class="line">PubkeyAuthentication yes</span><br><span class="line"># no&#x4EE3;&#x8868;&#x6240;&#x6709;&#x7528;&#x6237;&#x53EA;&#x80FD;&#x4F7F;&#x7528;&#x5BC6;&#x94A5;&#x767B;&#x5F55;&#xFF0C;&#x914C;&#x60C5;&#x4F7F;&#x7528;</span><br><span class="line">PasswordAuthentication no</span><br></pre></td></tr></table></figure><p>&#x4E4B;&#x540E;<code>systemctl reload sshd</code>&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x5C31;&#x914D;&#x7F6E;&#x5B8C;&#x4E86;&#x3002;&#x63A5;&#x4E0B;&#x6765;&#x662F;&#x672C;&#x5730;&#xFF0C;&#x4FEE;&#x6539;<code>~/.ssh/config</code>&#xFF1A;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Host bwg</span><br><span class="line">    # &#x670D;&#x52A1;&#x5668;&#x57DF;&#x540D;&#x6216;&#x8005;IP&#x5730;&#x5740;</span><br><span class="line">    HostName &lt;hostname&gt;</span><br><span class="line">    # &#x670D;&#x52A1;&#x5668;&#x7AEF;ssh&#x7AEF;&#x53E3;&#x53F7;</span><br><span class="line">    Port &lt;port-number&gt;</span><br><span class="line">    # &#x7528;&#x4F5C;&#x767B;&#x5F55;&#x7684;&#x7528;&#x6237;&#xFF0C;&#x642C;&#x74E6;&#x5DE5;&#x9ED8;&#x8BA4;&#x53EA;&#x6709;root</span><br><span class="line">    User &lt;login-user&gt;</span><br><span class="line">    # &#x5BC6;&#x94A5;&#x79C1;&#x94A5;&#x6587;&#x4EF6;</span><br><span class="line">    IdentityFile &lt;private-key&gt;</span><br></pre></td></tr></table></figure><p>&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#xFF0C;&#x4F60;&#x5C31;&#x80FD;&#x76F4;&#x63A5;<code>ssh bwg</code>&#x8FDE;&#x63A5;&#x4F60;&#x7684;&#x670D;&#x52A1;&#x5668;&#x4E86;&#x3002;</p><h2 id="&#x4F7F;&#x7528;zsh">&#x4F7F;&#x7528;zsh</h2><p>zsh&#x914D;&#x7F6E;&#x597D;&#x7684;&#x8BDD;&#xFF0C;&#x5728;&#x5404;&#x79CD;&#x65B9;&#x9762;&#x90FD;&#x6BD4;bash&#x5F3A;&#x4E0D;&#x5C11;&#x3002;&#x6211;&#x4E2A;&#x4EBA;&#x662F;&#x559C;&#x6B22;&#x7528;zsh&#x7684;&#xFF0C;&#x52A0;&#x4E0A;<a href="https://grml.org/zsh/" target="_blank" rel="noopener">grml-zsh-config</a>&#x4F53;&#x9A8C;&#x7B80;&#x76F4;&#x4E0A;&#x5929;&#x3002;</p><p>&#x9996;&#x5148;&#x5B89;&#x88C5;zsh&#xFF1A;<code>apt install zsh</code>&#xFF1B;&#x7136;&#x540E;&#x5207;&#x6362;&#x9ED8;&#x8BA4;shell&#x4E3A;zsh&#xFF1A;<code>chsh -s $(which zsh)</code></p><p>&#x7136;&#x540E;&#x4E0B;&#x8F7D;grml-zshrc&#xFF1A;</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -O ~/.zshrc https://git.grml.org/f/grml-etc-core/etc/zsh/zshrc</span><br></pre></td></tr></table></figure><h2 id="systemd-everything">systemd everything!</h2><p>&#x6709;&#x9274;&#x4E8E;&#x5728;&#x4F7F;&#x7528;Fedora&#x65F6;&#x7684;&#x7CDF;&#x7CD5;&#x4F53;&#x9A8C;&#xFF0C;&#x6211;&#x679C;&#x65AD;&#x628A;&#x7CFB;&#x7EDF;&#x4ECE;CentOS&#x6362;&#x5230;&#x4E86;Debian 9<span class="spoiler">&#x624D;&#x4E0D;&#x662F;&#x5ACC;&#x5F03;CentOS&#x8F6F;&#x4EF6;&#x592A;&#x8001;&#x5462;</span>&#x3002;&#x540C;&#x65F6;&#x4F5C;&#x4E3A;&#x4E00;&#x540D;Archlinux&#x8001;&#x6559;&#x5F92;&#xFF0C;&#x6211;&#x89C9;&#x5F97;&#x628A;&#x7CFB;&#x7EDF;&#x5168;&#x9762;systemd&#x5316;&#x633A;&#x597D;&#x7684;&#x3002;&#x4F46;&#x662F;Debian&#x91CC;&#x9762;&#x6709;&#x4E0D;&#x5C11;&#x7684;sysvinit&#x6B8B;&#x7559;&#xFF0C;&#x56E0;&#x6B64;&#x53EA;&#x80FD;&#x505A;&#x6700;&#x5927;&#x52AA;&#x529B;&#x53BB;&#x529E;&#x4E86;&#x3002;</p><p>&#x4E0B;&#x9762;&#x8FD9;&#x4E24;&#x6761;&#x662F;&#x53C2;&#x7167;&#x6587;&#x6863;<code>/usr/share/doc/systemd/README.Debian.gz</code>&#x63D0;&#x53D6;&#x51FA;&#x6765;&#x7684;&#x3002;</p><h3 id="&#x7528;journald&#x66FF;&#x6362;rsyslog">&#x7528;journald&#x66FF;&#x6362;rsyslog</h3><p>&#x9996;&#x5148;&#x5F00;&#x542F;journald&#x7684;persistent logging&#xFF1A;</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /var/<span class="built_in">log</span>/journal</span><br><span class="line">systemd-tmpfiles --create --prefix /var/<span class="built_in">log</span>/journal</span><br></pre></td></tr></table></figure><p>&#x7136;&#x540E;&#x5378;&#x8F7D;rsyslog&#xFF1A;</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt purge rsyslog</span><br></pre></td></tr></table></figure><h3 id="&#x7528;networkd&#x63A5;&#x7BA1;&#x7F51;&#x7EDC;&#x914D;&#x7F6E;">&#x7528;networkd&#x63A5;&#x7BA1;&#x7F51;&#x7EDC;&#x914D;&#x7F6E;</h3><p>&#x5728;<code>/etc/systemd/network/</code>&#x521B;&#x5EFA;&#x6587;&#x4EF6;<code>default.network</code>&#xFF08;&#x6587;&#x4EF6;&#x540D;&#x5176;&#x5B9E;&#x65E0;&#x6240;&#x8C13;&#xFF0C;&#x91CD;&#x8981;&#x7684;&#x662F;&#x6269;&#x5C55;&#x540D;<code>network</code>&#xFF09;&#xFF0C;&#x5185;&#x5BB9;&#x5982;&#x4E0B;&#xFF1A;</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Match]</span></span><br><span class="line"><span class="attr">Name</span>=eth0</span><br><span class="line"></span><br><span class="line"><span class="section">[Network]</span></span><br><span class="line"><span class="attr">DHCP</span>=<span class="literal">yes</span></span><br></pre></td></tr></table></figure><p>&#x4E4B;&#x540E;<code>stop</code>, <code>disable</code>&#x6389;<code>networking.service</code>, &#x7136;&#x540E;<code>systemctl enable systemd-networkd</code>, <code>systemctl start systemd-networkd</code>&#x4E8C;&#x8FDE;&#xFF0C;&#x987A;&#x4FBF;&#x5378;&#x8F7D;&#x6389;<code>ifupdown</code>&#xFF0C;<code>rm -r</code>&#x6389;<code>/etc/network</code>&#x3002;</p><p>&#x6B64;&#x5916;&#xFF0C;&#x6587;&#x6863;&#x4E2D;&#x8FD8;&#x5EFA;&#x8BAE;networkd&#x914D;&#x5408;resolved&#x4F7F;&#x7528;&#xFF1A;</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> systemd-resolved</span><br><span class="line">ln -sf /run/systemd/resolve/resolv.conf /etc/resolv.conf</span><br></pre></td></tr></table></figure><h2 id="&#x5F00;&#x542F;bbr&#x7B97;&#x6CD5;">&#x5F00;&#x542F;BBR&#x7B97;&#x6CD5;</h2><p>BBR&#x662F;Google&#x5F00;&#x53D1;&#x7684;TCP&#x62E5;&#x585E;&#x63A7;&#x5236;&#x7B97;&#x6CD5;&#xFF0C;&#x76EE;&#x7684;&#x662F;&#x8981;&#x5C3D;&#x91CF;&#x8DD1;&#x6EE1;&#x5E26;&#x5BBD;, &#x5E76;&#x4E14;&#x5C3D;&#x91CF;&#x4E0D;&#x8981;&#x6709;&#x6392;&#x961F;&#x7684;&#x60C5;&#x51B5;, &#x6548;&#x679C;&#x5E76;&#x4E0D;&#x6BD4;&#x9510;&#x901F;&#x5DEE;&#x3002;&#x5F00;&#x542F;&#x4E3B;&#x8981;&#x662F;&#x4E3A;&#x4E86;&#x914D;&#x5408;SS&#xFF0C;&#x7ED9;&#x5B83;&#x63D0;&#x901F;&#x7528;&#x3002;BBR&#x7B97;&#x6CD5;&#x5DF2;&#x7ECF;&#x5408;&#x5E76;&#x8FDB;&#x4E86;kernel 4.9&#xFF0C;&#x6240;&#x4EE5;&#x5C0A;&#x8D35;&#x7684;Debian 9&#x7528;&#x6237;&#x4E0D;&#x9700;&#x8981;&#x81EA;&#x5DF1;&#x7F16;&#x8BD1;&#x5185;&#x6838;&#xFF0C;&#x6539;&#x914D;&#x7F6E;&#x5C31;&#x884C;&#x4E86;&#x3002;OpenVZ&#x73A9;&#x5BB6;&#x6CA1;&#x6CD5;&#x4FEE;&#x6539;&#x5185;&#x6838;&#x914D;&#x7F6E;&#xFF0C;&#x6240;&#x4EE5;&#x2026;&#x2026;&#x6D17;&#x6D17;&#x7761;&#x5427;&#x3002;</p><p>&#x5728;<code>/etc/sysctl.d/</code>&#x4E0B;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;<code>10-bbr.conf</code>&#x6587;&#x4EF6;&#xFF0C;&#x5185;&#x5BB9;&#x5982;&#x4E0B;&#xFF1A;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">net.core.default_qdisc = fq</span><br><span class="line">net.ipv4.tcp_congestion_control = bbr</span><br></pre></td></tr></table></figure><p>&#x7136;&#x540E;<code>sysctl -p /etc/sysctl.d/10-bbr.conf</code>&#x4F7F;&#x66F4;&#x6539;&#x751F;&#x6548;&#x3002;&#x53EF;&#x4EE5;&#x5229;&#x7528;<code>lsmod | grep bbr</code>&#x6765;&#x68C0;&#x6D4B;BBR&#x662F;&#x5426;&#x5DF2;&#x542F;&#x7528;&#xFF0C;&#x5982;&#x679C;&#x51FA;&#x73B0;<code>tcp_bbr</code>&#x5219;&#x8868;&#x793A;&#x6210;&#x529F;&#x3002;</p><h2 id="&#x5229;&#x7528;tunnelbroker&#x4F7F;&#x7528;ipv6">&#x5229;&#x7528;TunnelBroker&#x4F7F;&#x7528;IPv6</h2><p>&#x642C;&#x74E6;&#x5DE5;&#x7684;KVM&#x4E0E;OpenVZ&#x4E3B;&#x673A;&#x76F8;&#x6BD4;&#xFF0C;&#x9664;&#x4E86;&#x6CA1;&#x6709;&#x539F;&#x751F;IPv6&#x5730;&#x5740;&#x4EE5;&#x5916;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x533A;&#x522B;&#x3002;&#x4F46;&#x662F;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x6821;&#x56ED;&#x7F51;&#x7528;&#x6237;&#xFF0C;&#x8D70;IPv6&#x662F;&#x5B8C;&#x5168;&#x514D;&#x8D39;&#x7684;&#x2014;&#x2014;&#x6211;&#x6709;&#x4E00;&#x4E2A;&#x5927;&#x80C6;&#x7684;&#x60F3;&#x6CD5;&#x3002;</p><p>&#x4EE5;&#x9632;&#x4E07;&#x4E00;&#xFF0C;&#x6253;&#x5F00;&#x4F60;&#x5185;&#x6838;&#x7684;IPv6&#x652F;&#x6301;&#xFF1A;&#x4FEE;&#x6539;<code>/etc/sysctl.conf</code>&#x6216;&#x8005;&#x5728;<code>/etc/sysctl.d/</code>&#x65B0;&#x5EFA;&#x6587;&#x4EF6;&#xFF0C;&#x5B8C;&#x4E8B;&#x540E;<code>sysctl -p</code>&#x4E4B;&#x3002;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">net.ipv6.conf.all.disable_ipv6 = 0</span><br><span class="line">net.ipv6.conf.default.disable_ipv6 = 0</span><br><span class="line">net.ipv6.conf.lo.disable_ipv6 = 0</span><br></pre></td></tr></table></figure><p>&#x7531;&#x4E8E;KVM&#x662F;&#x5B8C;&#x5168;&#x7684;&#x865A;&#x62DF;&#xFF0C;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x65B9;&#x4FBF;&#x5730;&#x501F;&#x52A9;tunnel&#x7684;&#x529B;&#x91CF;&#x6765;&#x4F7F;&#x7528;IPv6&#x3002;&#x9996;&#x5148;&#x4E0A;<a href="https://tunnelbroker.net/" target="_blank" rel="noopener">tunnelbroker</a>&#x6CE8;&#x518C;&#x4E2A;&#x5E10;&#x53F7;&#xFF08;&#x7533;&#x8BF7;&#x548C;&#x670D;&#x52A1;&#x662F;&#x5B8C;&#x5168;&#x514D;&#x8D39;&#x7684;&#xFF09;&#xFF0C;&#x5E76;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;Regular Tunnel&#x3002;&#x8F93;&#x5165;&#x4F60;&#x7684;VPS&#x7684;IP&#xFF0C;&#x518D;&#x9009;&#x62E9;&#x4E00;&#x4E2A;<strong>&#x8DDD;&#x79BB;VPS&#x6700;&#x8FD1;&#x7684;</strong>Tunnel Server&#xFF08;&#x4E00;&#x822C;&#x586B;&#x597D;IP&#x4E4B;&#x540E;&#x5B83;&#x4F1A;&#x81EA;&#x52A8;&#x9009;&#x62E9;&#xFF09;&#x3002;&#x521B;&#x5EFA;&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#xFF0C;&#x5728;tunnel&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#x9875;&#x9762;&#x4F1A;&#x7ED9;&#x51FA;&#x56DB;&#x4E2A;&#x91CD;&#x8981;&#x7684;IP&#x5730;&#x5740;&#xFF1A;<code>Server IPv4 Address</code>, <code>Server IPv6 Address</code>, <code>Client IPv4 Address</code>, <code>Client IPv6 Address</code>. &#x5047;&#x8BBE;&#x6211;&#x4EEC;&#x770B;&#x5230;&#x7684;&#x4FE1;&#x606F;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Server IPv4 Address    1.1.1.1</span><br><span class="line">Server IPv6 Address    aaaa:aaa:a:aa::a/64</span><br><span class="line">Client IPv4 Address    2.2.2.2</span><br><span class="line">Client IPv6 Address    bbbb:bbb:b:bb::b/64</span><br></pre></td></tr></table></figure><p>&#x5982;&#x679C;&#x4F60;&#x4E0D;&#x50CF;&#x6211;&#x4E00;&#x6837;&#x4F7F;&#x7528;<code>systemd-networkd</code>&#x7BA1;&#x7406;&#x7F51;&#x7EDC;&#x7684;&#x8BDD;&#xFF0C;&#x53BB;tunnel&#x9875;&#x9762;&#x7684;<code>Example Configurations</code>&#x9875;&#x9762;&#x9009;&#x62E9;&#x4F60;&#x7684;&#x7F51;&#x7EDC;&#x7BA1;&#x7406;&#x7C7B;&#x578B;&#xFF0C;&#x4F1A;&#x81EA;&#x52A8;&#x4E3A;&#x4F60;&#x751F;&#x6210;tunnel&#x7684;&#x7F51;&#x7EDC;&#x914D;&#x7F6E;&#x3002;&#x6211;&#x8FD9;&#x91CC;&#x5199;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x662F;&#x9488;&#x5BF9;<code>systemd-networkd</code>&#x7684;&#x3002;OpenVZ&#x73A9;&#x5BB6;&#x5F97;&#x53BB;&#x4F7F;&#x7528;&#x70B9;<a href="http://blog.throneclay.com/2015/07/05/bwg/#IPV6%E6%9C%8D%E5%8A%A1%E5%90%AF%E5%8A%A8" target="_blank" rel="noopener">&#x5947;&#x6280;&#x6DEB;&#x5DE7;</a>&#xFF0C;&#x7528;&#x8FD9;&#x91CC;&#x5199;&#x7684;&#x7F51;&#x7EDC;&#x914D;&#x7F6E;&#x662F;&#x6CA1;&#x7528;&#x7684;&#x3002;</p><p>&#x5728;<code>/etc/systemd/network/</code>&#x521B;&#x5EFA;<code>he-ipv6.netdev</code>&#x5185;&#x5BB9;&#x5982;&#x4E0B;&#xFF1A;</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Match]</span></span><br><span class="line"></span><br><span class="line"><span class="section">[NetDev]</span></span><br><span class="line"><span class="attr">Name</span>=he-ipv6</span><br><span class="line"><span class="attr">Kind</span>=sit</span><br><span class="line"><span class="attr">MTUBytes</span>=<span class="number">1480</span></span><br><span class="line"></span><br><span class="line"><span class="section">[Tunnel]</span></span><br><span class="line"><span class="comment"># Client IPv4</span></span><br><span class="line"><span class="attr">Local</span>=<span class="number">2.2</span>.<span class="number">2.2</span></span><br><span class="line"><span class="comment"># Server IPv4</span></span><br><span class="line"><span class="attr">Remote</span>=<span class="number">1.1</span>.<span class="number">1.1</span></span><br><span class="line"><span class="attr">TTL</span>=<span class="number">255</span></span><br></pre></td></tr></table></figure><p>&#x4EE5;&#x53CA;<code>he-ipv6.network</code>&#x5185;&#x5BB9;&#x5982;&#x4E0B;&#xFF1A;</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Match]</span></span><br><span class="line"><span class="attr">Name</span>=he-ipv6</span><br><span class="line"></span><br><span class="line"><span class="section">[Network]</span></span><br><span class="line"><span class="comment"># Client IPv6</span></span><br><span class="line"><span class="attr">Address</span>=bbbb:bbb:b:bb::b/<span class="number">64</span></span><br><span class="line"><span class="comment"># Server IPv6</span></span><br><span class="line"><span class="attr">Gateway</span>=aaaa:aaa:a:aa::a</span><br><span class="line"><span class="comment"># Google IPv6 DNS, &#x53EF;&#x9009;&#x914D;&#x7F6E;</span></span><br><span class="line"><span class="attr">DNS</span>=<span class="number">2001</span>:<span class="number">4860</span>:<span class="number">4860</span>::<span class="number">8888</span></span><br><span class="line"><span class="attr">DNS</span>=<span class="number">2001</span>:<span class="number">4860</span>:<span class="number">4860</span>::<span class="number">4444</span></span><br></pre></td></tr></table></figure><p>&#x5E76;&#x5BF9;<code>default.network</code>&#x505A;&#x5982;&#x4E0B;&#x4FEE;&#x6539;&#xFF1A;</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Network]</span></span><br><span class="line"><span class="attr">DHCP</span>=<span class="literal">yes</span></span><br><span class="line"><span class="attr">Tunnel</span>=he-ipv6</span><br></pre></td></tr></table></figure><p>&#x5237;&#x65B0;<code>systemd-networkd</code>&#xFF0C;&#x4F7F;&#x7528;<code>ping6 ipv6.google.com</code>&#x8BD5;&#x8BD5;&#xFF0C;&#x5982;&#x679C;&#x6210;&#x529F;&#x90A3;&#x4E48;&#x8BF4;&#x660E;&#x914D;&#x7F6E;&#x6210;&#x529F;&#xFF0C;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;IPv6&#x6765;&#x8BBF;&#x95EE;VPS&#x4E86;&#x3002;&#x7528;&#x4E8E;VPS&#x7684;&#x516C;&#x7F51;IPv6&#x5730;&#x5740;&#x662F;&#x63D0;&#x4F9B;&#x7ED9;&#x4F60;&#x7684;<code>Client IPv6 Address</code>&#xFF0C;&#x4E0D;&#x8981;&#x7528;&#x9519;&#x4E86;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;VPS&#x4EE3;&#x7406;&#x8BA9;&#x5168;&#x90E8;&#x6D41;&#x91CF;&#x8D70;IPv6&#xFF0C;&#x8FD9;&#x6837;&#x4E00;&#x6765;&#x6821;&#x56ED;&#x7F51;&#x662F;&#x5B8C;&#x5168;&#x7684;&#x767D;&#x5AD6;&#xFF0C;&#x60F3;&#x60F3;&#x8FD8;&#x6709;&#x70B9;&#x5C0F;&#x6FC0;&#x52A8;&#x5462;&#x3002;</p><p>&#x5982;&#x679C;&#x4F60;&#x786E;&#x5B9A;&#x4F60;&#x7684;&#x914D;&#x7F6E;&#x6CA1;&#x6709;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x662F;&#x5C31;&#x662F;&#x4F7F;&#x7528;&#x4E0D;&#x4E86;IPv6&#xFF0C;&#x6709;&#x53EF;&#x80FD;&#x662F;&#x9632;&#x706B;&#x5899;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x68C0;&#x67E5;&#x4E00;&#x4E0B;&#x4F60;&#x7684;<code>ip6tables</code>&#x914D;&#x7F6E;&#x5427;&#x3002;<span class="spoiler">&#x6211;tm&#x56E0;&#x4E3A;ip6tables&#x6CA1;&#x5F00;&#x5BFC;&#x81F4;IPv6&#x5305;&#x5168;&#x90E8;&#x88AB;&#x5C4F;&#x853D;&#xFF0C;&#x88AB;&#x8FD9;&#x4E2A;&#x5751;&#x4E86;&#x597D;&#x4E45;</span></p><h2 id="iptables">iptables</h2><p>&#x4E3A;&#x4E86;&#x9632;&#x6B62;VPS&#x88AB;&#x7834;&#x574F;&#xFF0C;&#x4E3A;&#x4E86;&#x4FDD;&#x536B;&#x7F51;&#x7EDC;&#x548C;&#x5E73;&#xFF0C;&#x672C;&#x4EBA;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;<code>iptables</code>&#x6765;&#x9650;&#x5236;&#x7AEF;&#x53E3;&#x3002;&#x4F7F;&#x7528;&#x524D;&#x4E00;&#x5B9A;&#x5C0F;&#x5FC3;&#xFF0C;&#x522B;&#x628A;ssh&#x8FDE;&#x63A5;&#x7ED9;&#x5C4F;&#x853D;&#x4E86;&#x3002;</p><p>&#x4F7F;&#x7528;&#x4E0B;&#x9762;&#x7684;&#x547D;&#x4EE4;&#x6765;&#x6E05;&#x7A7A;<code>iptables</code>&#x914D;&#x7F6E;&#xFF1A;</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">iptables -F</span><br><span class="line">iptables -X</span><br><span class="line">iptables -Z</span><br></pre></td></tr></table></figure><p>&#x63A5;&#x4E0B;&#x6765;&#x5C31;&#x662F;&#x4E00;&#x901A;&#x9A9A;&#x64CD;&#x4F5C;&#x4E86;&#xFF1A;</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x5141;&#x8BB8;&#x672C;&#x5730;&#x56DE;&#x73AF;&#x63A5;&#x53E3;(&#x5373;&#x5141;&#x8BB8;&#x672C;&#x673A;&#x8BBF;&#x95EE;&#x672C;&#x673A;)&#xFF0C;&#x4E00;&#x5B9A;&#x8981;&#x6709;</span></span><br><span class="line">iptables -A INPUT -i lo -j ACCEPT</span><br><span class="line"><span class="comment"># &#x5141;&#x8BB8;6in4 tunnel&#xFF0C;&#x4F7F;&#x7528;&#x524D;&#x9762;&#x7684;HE Tunnel&#x7684;&#x8BDD;&#x4E00;&#x5B9A;&#x8981;&#x6709;</span></span><br><span class="line">iptables -A INPUT -p ipv6 -j ACCEPT</span><br><span class="line"><span class="comment"># &#x5141;&#x8BB8;&#x5DF2;&#x5EFA;&#x7ACB;&#x7684;&#x6216;&#x76F8;&#x5173;&#x8FDE;&#x7684;&#x901A;&#x884C;</span></span><br><span class="line">iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT</span><br><span class="line"><span class="comment"># &#x5141;&#x8BB8;&#x8BBF;&#x95EE;http&#x7AEF;&#x53E3;</span></span><br><span class="line">iptables -A INPUT -p tcp --dport 80 -j ACCEPT</span><br><span class="line"><span class="comment"># &#x5141;&#x8BB8;&#x8BBF;&#x95EE;https&#x7AEF;&#x53E3;</span></span><br><span class="line">iptables -A INPUT -p tcp --dport 443 -j ACCEPT</span><br><span class="line"><span class="comment"># &#x5141;&#x8BB8;&#x8BBF;&#x95EE;ssh&#x7AEF;&#x53E3;</span></span><br><span class="line">iptables -A INPUT -p tcp --dport &lt;ssh-port&gt; -j ACCEPT</span><br><span class="line"><span class="comment"># &#x5982;&#x679C;&#x6709;&#x5176;&#x4ED6;&#x7AEF;&#x53E3;&#x7684;&#x8BDD;&#xFF0C;&#x89C4;&#x5219;&#x4E5F;&#x7C7B;&#x4F3C;&#xFF0C;&#x4FEE;&#x6539;dport&#x540E;&#x7684;&#x7AEF;&#x53E3;&#x53F7;&#x5C31;&#x884C;</span></span><br><span class="line"><span class="comment"># &#x5141;&#x8BB8;&#x4E00;&#x4E2A;&#x8303;&#x56F4;&#x5185;&#x7684;&#x7AEF;&#x53E3;&#xFF08;&#x4E0B;&#x9762;&#x7684;&#x7AEF;&#x53E3;&#x8303;&#x56F4;&#x662F;&#x5E38;&#x7528;BT&#x7AEF;&#x53E3;&#xFF09;&#xFF1A;</span></span><br><span class="line"><span class="comment"># iptables -A INPUT -p tcp -m multiport --dports 6881:6999 -j ACCEPT</span></span><br><span class="line"><span class="comment"># &#x5141;&#x8BB8;ping</span></span><br><span class="line">iptables -A INPUT -p icmp -m icmp --icmp-type 8 -j ACCEPT</span><br><span class="line"><span class="comment"># &#x5141;&#x8BB8;&#x6240;&#x6709;&#x672C;&#x673A;&#x5411;&#x5916;&#x7684;&#x8BBF;&#x95EE;</span></span><br><span class="line">iptables -A OUTPUT -j ACCEPT</span><br><span class="line"><span class="comment"># &#x7981;&#x6B62;&#x5176;&#x4ED6;&#x672A;&#x5141;&#x8BB8;&#x7684;&#x89C4;&#x5219;&#x8BBF;&#x95EE;&#xFF0C;&#x5728;&#x6267;&#x884C;&#x8FD9;&#x6761;&#x4E4B;&#x524D;&#x4E00;&#x5B9A;&#x8BB0;&#x5F97;&#x628A;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x7684;ssh&#x7AEF;&#x53E3;</span></span><br><span class="line"><span class="comment"># &#x4E5F;&#x653E;&#x8FDB;&#x5141;&#x8BB8;&#x89C4;&#x5219;&#x4E2D;</span></span><br><span class="line">iptables -A INPUT -j REJECT</span><br><span class="line">iptables -A FORWARD -j REJECT</span><br></pre></td></tr></table></figure><p><code>iptables</code>&#x89C4;&#x5219;&#x5982;&#x679C;&#x6CA1;&#x4FDD;&#x5B58;&#x7684;&#x8BDD;&#xFF0C;&#x91CD;&#x542F;&#x5373;&#x5931;&#x6548;&#x3002;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>iptables-save</code>&#x6765;&#x4FDD;&#x5B58;&#xFF0C;<code>iptables-restore</code>&#x6765;&#x8BFB;&#x53D6;&#xFF0C;&#x53EF;&#x4EE5;&#x505A;&#x6210;systemd service unit&#x6765;&#x81EA;&#x52A8;&#x6267;&#x884C;&#x3002;&#x53EF;&#x4EE5;&#x5B89;&#x88C5;&#x8FD9;&#x4E2A;&#x5305;&#xFF0C;&#x91CC;&#x9762;&#x662F;&#x6253;&#x597D;&#x4E86;systemd service unit&#x914D;&#x7F6E;&#xFF1A;<a href="https://github.com/srdja/debian-systemd-iptables/releases/download/1.1.0/systemd-iptables1.1-0.deb" target="_blank" rel="noopener">systemd-iptables1.1-0.deb</a></p><p>&#x5B89;&#x88C5;&#x5305;&#x4E4B;&#x540E;&#xFF0C;<code>enable</code>, <code>start</code>&#x4E8C;&#x8FDE;&#xFF0C;&#x89C4;&#x5219;&#x5B58;&#x50A8;&#x5230;<code>/etc/iptables/iptables.rules</code>&#x5373;&#x53EF;&#x3002;</p><h2 id="apt&#x76F8;&#x5173;">apt&#x76F8;&#x5173;</h2><h3 id="backports&#x6E90;">backports&#x6E90;</h3><p>&#x5076;&#x5C14;&#x4E5F;&#x4F1A;&#x6709;&#x60F3;&#x8981;&#x65B0;&#x9C9C;&#x8F6F;&#x4EF6;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x600E;&#x4E48;&#x529E;&#xFF1F;&#x5FEB;&#x53BB;&#x6253;&#x5F00;backports&#x3002;&#x628A;&#x4E0B;&#x9762;&#x8FD9;&#x884C;&#x6DFB;&#x52A0;&#x5230;<code>/etc/apt/sources.list</code>&#xFF1A;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deb http://deb.debian.org/debian stretch-backports main contrib non-free</span><br></pre></td></tr></table></figure><p>&#x5185;&#x6709;&#x65B0;&#x7248;&#x7684;ss-libev&#x54E6;&#x3002;</p><h3 id="&#x7981;&#x6B62;&#x81EA;&#x52A8;&#x5B89;&#x88C5;&#x63A8;&#x8350;&#x5305;">&#x7981;&#x6B62;&#x81EA;&#x52A8;&#x5B89;&#x88C5;&#x63A8;&#x8350;&#x5305;</h3><p>&#x5728;&#x786C;&#x76D8;&#x5403;&#x7D27;&#x7684;VPS&#x4E0A;&#x8FD9;&#x4E2A;&#x9009;&#x9879;&#x53EF;&#x4EE5;&#x8BF4;&#x662F;&#x5F88;&#x91CD;&#x8981;&#x4E86;&#x3002;&#x5728;<code>/etc/apt/apt.conf.d</code>&#x91CC;&#x65B0;&#x5EFA;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x5E76;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x5185;&#x5BB9;&#xFF1A;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">APT::Install-Recommends &quot;0&quot;; APT-Install-Suggests &quot;0&quot;;</span><br></pre></td></tr></table></figure><p>&#x514D;&#x5F97;&#x66F4;&#x65B0;&#x4E2A;&#x5185;&#x6838;&#x90FD;&#x8981;&#x88C5;&#x5341;&#x51E0;&#x4E2A;&#x6CA1;&#x4EC0;&#x4E48;&#x5375;&#x7528;&#x7684;&#x5305;&#x3002;</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="https://github.com/PowerShell/Win32-OpenSSH/issues/973" target="_blank" rel="noopener">SSH Client fails to use existing id_rsa key</a> <a href="#fnref1" class="footnote-backref">&#x21A9;</a></p></li></ol></section>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;#x51FA;&amp;#x4E8E;&amp;#x5F04;&amp;#x4E2A;&amp;#x5B8C;&amp;#x5168;&amp;#x5728;&amp;#x638C;&amp;#x63A7;&amp;#x4E4B;&amp;#x4E2D;&amp;#x7684;&amp;#x68AF;&amp;#x5B50;&amp;#x7684;&amp;#x60F3;&amp;#x6CD5;&amp;#xFF0C;&amp;#x6211;&amp;#x5728;&amp;#x4E00;&amp;#x6708;&amp;#x65F6;&amp;#x62A2;&amp;#x5230;&amp;#x4E86;&lt;a href=&quot;https://bwh1.net/aff.php?aff=3525&amp;amp;pid=53&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&amp;#x642C;&amp;#x74E6;&amp;#x5DE5;&amp;#x4E2D;&amp;#x56FD;&amp;#x5927;&amp;#x9646;&amp;#x76F4;&amp;#x8FDE;&amp;#x4F18;&amp;#x5316;&amp;#x5957;&amp;#x9910;&lt;/a&gt;&amp;#xFF0C;512M&amp;#x5185;&amp;#x5B58;&amp;#x3001;10G SSD&amp;#x3001;1T&amp;#x6D41;&amp;#x91CF;/&amp;#x6708;&amp;#x3001;&amp;#x8D85;&amp;#x9AD8;&amp;#x5E26;&amp;#x5BBD;&amp;#x3001;$19.99&amp;#xFF08;&amp;#xFFE5;120&amp;#x5DE6;&amp;#x53F3;&amp;#xFF09;/&amp;#x5E74;&amp;#xFF0C;&amp;#x8D70;&amp;#x8FC7;&amp;#x8DEF;&amp;#x8FC7;&amp;#x4E0D;&amp;#x8981;&amp;#x9519;&amp;#x8FC7;&amp;#x3002;&amp;#x5728;&amp;#x6B64;&amp;#x611F;&amp;#x8C22;&amp;#x77E5;&amp;#x4E4E;&lt;a href=&quot;https://www.zhihu.com/people/feng-shuo-3&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;@&amp;#x51AF;&amp;#x7855;&lt;/a&gt;&amp;#x7684;&amp;#x56DE;&amp;#x7B54;&lt;a href=&quot;https://www.zhihu.com/question/20800554/answer/71397836&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&amp;#x6709;&amp;#x54EA;&amp;#x4E9B;&amp;#x4FBF;&amp;#x5B9C;&amp;#x7A33;&amp;#x5B9A;&amp;#xFF0C;&amp;#x901F;&amp;#x5EA6;&amp;#x4E5F;&amp;#x4E0D;&amp;#x9519;&amp;#x7684;Linux VPS &amp;#x63A8;&amp;#x8350;&amp;#xFF1F;&lt;/a&gt;&amp;#x642C;&amp;#x74E6;&amp;#x5DE5;&amp;#x4EF7;&amp;#x683C;&amp;#x4EB2;&amp;#x6C11;&amp;#xFF0C;&amp;#x652F;&amp;#x4ED8;&amp;#x65B9;&amp;#x4FBF;&amp;#xFF08;&amp;#x53EF;&amp;#x4EE5;&amp;#x652F;&amp;#x4ED8;&amp;#x5B9D;&amp;#xFF09;&amp;#xFF0C;&amp;#x8FD8;&amp;#x4E0D;&amp;#x5FEB;&amp;#x53BB;&amp;#x4E70;&amp;#xFF1F;&lt;/p&gt;&lt;p&gt;&amp;#x76F4;&amp;#x8FDE;&amp;#x4F18;&amp;#x5316;&amp;#x5957;&amp;#x9910;&amp;#x76F8;&amp;#x6BD4;&lt;a href=&quot;https://bwh1.net/cart.php?a=add&amp;amp;pid=43&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&amp;#x901A;&amp;#x7528;&amp;#x5957;&amp;#x9910;&lt;/a&gt;&amp;#x636E;&amp;#x8BF4;&amp;#x662F;&amp;#x5BF9;&amp;#x5927;&amp;#x9646;&amp;#x4E09;&amp;#x7F51;&amp;#x6709;&amp;#x4F18;&amp;#x5316;&amp;#xFF0C;&amp;#x800C;&amp;#x4E14;&amp;#x76F8;&amp;#x6BD4;&amp;#x6765;&amp;#x8BF4;&amp;#x6708;&amp;#x6D41;&amp;#x91CF;&amp;#x7FFB;&amp;#x4E86;&amp;#x4E00;&amp;#x500D;&amp;#xFF0C;&amp;#x4E0D;&amp;#x8FC7;&amp;#x552F;&amp;#x4E00;&amp;#x7684;&amp;#x7F3A;&amp;#x70B9;&amp;#x662F;&amp;#x53EA;&amp;#x6709;&amp;#x4E00;&amp;#x4E2A;&amp;#x673A;&amp;#x623F;&amp;#x7ED9;&amp;#x4F60;&amp;#x4F7F;&amp;#x7528;&amp;#xFF0C;&amp;#x4E5F;&amp;#x5C31;&amp;#x662F;&amp;#x8BF4;&amp;#x51FA;&amp;#x4E86;&amp;#x4E8B;&amp;#x7684;&amp;#x8BDD;&amp;#x4F60;&amp;#x7684;IP&amp;#x662F;&amp;#x6362;&amp;#x4E0D;&amp;#x4E86;&amp;#x7684;&amp;#xFF0C;&amp;#x6362;&amp;#x53E5;&amp;#x8BDD;&amp;#x8BF4;&amp;#x8FD9;&amp;#x4E2A;VPS&amp;#x4F60;&amp;#x5C31;&amp;#x7838;&amp;#x624B;&amp;#x4E0A;&amp;#x4E86;&amp;#xFF08;&amp;#x8D2D;&amp;#x4E70;30&amp;#x5929;&amp;#x5185;&amp;#x53EF;&amp;#x9000;&amp;#x6B3E;&amp;#xFF0C;&amp;#x8FD9;&amp;#x6837;&amp;#x81F3;&amp;#x5C11;&amp;#x635F;&amp;#x5931;&amp;#x4E0D;&amp;#x5927;&amp;#xFF09;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x4E14;&amp;#x7528;&amp;#x4E14;&amp;#x73CD;&amp;#x60DC;&amp;#x3002;&lt;a href=&quot;http://www.bwh1.net/aff.php?aff=3525&amp;amp;pid=56&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&amp;#x7535;&amp;#x4FE1;CN2&amp;#x7279;&amp;#x522B;&amp;#x7248;&lt;/a&gt;&amp;#x8D35;&amp;#x4E86;10&amp;#x7F8E;&amp;#x91D1;&amp;#xFF0C;&amp;#x9664;&amp;#x4E86;&amp;#x7535;&amp;#x4FE1;&amp;#x7528;&amp;#x6237;&amp;#x901F;&amp;#x5EA6;&amp;#x63D0;&amp;#x5347;&amp;#x4E4B;&amp;#x5916;&amp;#xFF0C;&amp;#x786C;&amp;#x76D8;&amp;#x4E5F;&amp;#x7ED9;&amp;#x780D;&amp;#x4E86;5G&amp;#x3002;&amp;#x4E2A;&amp;#x4EBA;&amp;#x89C9;&amp;#x5F97;&amp;#x4E0D;&amp;#x662F;&amp;#x90A3;&amp;#x4E48;&amp;#x503C;&amp;#xFF0C;&amp;#x6BD5;&amp;#x7ADF;&amp;#x8D70;&amp;#x6765;&amp;#x56DE;&amp;#x4E00;&amp;#x8D9F;&amp;#x6D1B;&amp;#x6749;&amp;#x77F6;100ms&amp;#x5EF6;&amp;#x8FDF;&amp;#x662F;&amp;#x8DD1;&amp;#x4E0D;&amp;#x4E86;&amp;#x7684;&amp;#x3002;&lt;/p&gt;&lt;p&gt;&amp;#x5BF9;&amp;#x4E86;&amp;#xFF0C;&amp;#x8D2D;&amp;#x4E70;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#x5C3D;&amp;#x91CF;&amp;#x4E70;KVM&amp;#x67B6;&amp;#x6784;&amp;#x7684;&amp;#xFF0C;&amp;#x5B8C;&amp;#x5168;&amp;#x865A;&amp;#x62DF;&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x73A9;&amp;#x7684;&amp;#x9ED1;&amp;#x79D1;&amp;#x6280;&amp;#x6BD4;OpenVZ&amp;#x67B6;&amp;#x6784;&amp;#x7684;&amp;#x4E0D;&amp;#x77E5;&amp;#x9053;&amp;#x591A;&amp;#x5230;&amp;#x54EA;&amp;#x91CC;&amp;#x53BB;&amp;#x4E86;&amp;#x3002;&lt;/p&gt;&lt;span class=&quot;spoiler&quot;&gt;&amp;#x642C;&amp;#x74E6;&amp;#x5DE5;6% off&amp;#x4F18;&amp;#x60E0;&amp;#x7801; BWH1ZBPVK&lt;/span&gt;
    
    </summary>
    
      <category term="学习" scheme="https://unnamed42.github.io/categories/%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="配置" scheme="https://unnamed42.github.io/tags/%E9%85%8D%E7%BD%AE/"/>
    
      <category term="VPS" scheme="https://unnamed42.github.io/tags/VPS/"/>
    
  </entry>
  
  <entry>
    <title>中国政治坐标系测试（北大未名版）</title>
    <link href="https://unnamed42.github.io/2017-03-16-%E4%B8%AD%E5%9B%BD%E6%94%BF%E6%B2%BB%E5%9D%90%E6%A0%87%E7%B3%BB%E6%B5%8B%E8%AF%95.html"/>
    <id>https://unnamed42.github.io/2017-03-16-中国政治坐标系测试.html</id>
    <published>2017-03-16T13:12:46.000Z</published>
    <updated>2017-06-10T05:52:13.000Z</updated>
    
    <content type="html"><![CDATA[<p>本测试转载自政治坐标测试北大未名版之<a href="http://www.zuobiao.me/zuobiao2015/index.php/survey/index" target="_blank" rel="external">中国政治坐标系测试</a>。可惜的是，原网站似乎已经被干掉了，因此该测试的题目及数据处理逻辑源自<a href="http://www.mwjx.com/mwjx/iq_tests/tests_politics.html" target="_blank" rel="external">另一个网站</a>。</p><p>本来这个测试还是很有意义的，而且原作者那边利用测试统计来的数据还写了论文……但是原网站被封的现在数据无法访问，而且原文章中也没有对测试结果的解释，做完之后只能得到几个意味不明的<code>float</code>，可以说是十分可惜。</p><a id="more"></a><script type="text/javascript">$(function(){$("#submit").click(function(){var t=0,a=0,n=0;$('#questions input[name^="c"]:checked').each(function(){t+=parseInt($(this).attr("data-x")),a+=parseInt($(this).attr("data-y")),n+=parseInt($(this).attr("data-z"))}),t=Math.round(t)/20,a=Math.round(a)/20,n=Math.round(n)/10,$("#answer").html("政治立场坐标（左翼<->右翼）"+t+"，经济立场坐标（左翼<->右翼）"+a+"，文化立场坐标（保守<->自由）"+n)})});</script><style>.red{color:red}#wrapper{text-align:center}</style><p>以下测试模仿著名的英文“<a href="https://www.politicalcompass.org/test" target="_blank" rel="external">政治指南针</a>”测试建立。题目经北大未名BBS读书版网友集体讨论创作，版权属于北大未名BBS读书版及相关网友。本blog对该测试的准确性及所造成的一切后果不负责。测试结果不能作为任何学术研究的依据。题目的陈述本身不代表出题人看法。本测试为匿名，本网站不收集任何测试者个人信息。</p><p>本测试的目的是反映答题者政治、经济与社会观念“左与右”的坐标。本测试系统建立于中国政治价值体系基础之上，试图充分反映中国的特殊国情与政治文化。很多问题反映的并非严格意义上的西方政治语汇中的“左右”，而是中国现实语境中的“左右”。测试题目的陈述尽量满足中立性，即，每条陈述都不存在严格意义上的对错，同意或反对都代表彼此平等的看法。<span class="red">请注意，这套题目的目的是区分理念而不是操作手法，也就是说，问题在于你在理想中是否支持，而不是在现实困难面前是否可行。请不要因为具体条件的缺乏而去设想种种复杂背景情况，从而动摇自己意识形态上的坚持。如果犹豫不定，请选择自己的第一直觉。</span></p><p>题目共五十道，必须全部回答。选项中没有中立项，这是为了迫使你选出你心里的倾向而不是回避你不愿意考虑的问题。</p><form id="questions"><ol><li>如果人民没有受过民主教育，他们是不应该拥有普选权的。<br><input name="c1" type="radio" data-x="2" data-y="0" data-z="0" checked>强烈反对<br><input name="c1" type="radio" data-x="1" data-y="0" data-z="0">反对<br><input name="c1" type="radio" data-x="-1" data-y="0" data-z="0">同意<br><input name="c1" type="radio" data-x="-2" data-y="0" data-z="0">强烈同意<br></li><li>令人沮丧的是，经济学家越来越成为富人的代言人。<br><input name="c2" type="radio" data-x="0" data-y="2" data-z="0" checked>强烈反对<br><input name="c2" type="radio" data-x="0" data-y="1" data-z="0">反对<br><input name="c2" type="radio" data-x="0" data-y="-1" data-z="0">同意<br><input name="c2" type="radio" data-x="0" data-y="-2" data-z="0">强烈同意<br></li><li>人权高于主权。<br><input name="c3" type="radio" data-x="-2" data-y="0" data-z="0" checked>强烈反对<br><input name="c3" type="radio" data-x="-1" data-y="0" data-z="0">反对<br><input name="c3" type="radio" data-x="1" data-y="0" data-z="0">同意<br><input name="c3" type="radio" data-x="2" data-y="0" data-z="0">强烈同意<br></li><li>不应指责两个成年人自愿的婚前性行为。<br><input name="c4" type="radio" data-x="0" data-y="0" data-z="-2" checked>强烈反对<br><input name="c4" type="radio" data-x="0" data-y="0" data-z="-1">反对<br><input name="c4" type="radio" data-x="0" data-y="0" data-z="1">同意<br><input name="c4" type="radio" data-x="0" data-y="0" data-z="2">强烈同意<br></li><li>中国近年来经济发展的成果很多都被一小群人占有了，大多数人没得到什么好处。<br><input name="c5" type="radio" data-x="0" data-y="2" data-z="0" checked>强烈反对<br><input name="c5" type="radio" data-x="0" data-y="1" data-z="0">反对<br><input name="c5" type="radio" data-x="0" data-y="-1" data-z="0">同意<br><input name="c5" type="radio" data-x="0" data-y="-2" data-z="0">强烈同意<br></li><li>发生重大社会安全事件时，即使认为信息公开会导致骚乱的风险，政府仍应该开放信息传播。<br><input name="c6" type="radio" data-x="-2" data-y="0" data-z="0" checked>强烈反对<br><input name="c6" type="radio" data-x="-1" data-y="0" data-z="0">反对<br><input name="c6" type="radio" data-x="1" data-y="0" data-z="0">同意<br><input name="c6" type="radio" data-x="2" data-y="0" data-z="0">强烈同意<br></li><li>在重大工程项目的决策中，个人利益应该为社会利益让路。<br><input name="c7" type="radio" data-x="0" data-y="2" data-z="0" checked>强烈反对<br><input name="c7" type="radio" data-x="0" data-y="1" data-z="0">反对<br><input name="c7" type="radio" data-x="0" data-y="-1" data-z="0">同意<br><input name="c7" type="radio" data-x="0" data-y="-2" data-z="0">强烈同意<br></li><li>西方的多党制不适合中国国情。<br><input name="c8" type="radio" data-x="2" data-y="0" data-z="0" checked>强烈反对<br><input name="c8" type="radio" data-x="1" data-y="0" data-z="0">反对<br><input name="c8" type="radio" data-x="-1" data-y="0" data-z="0">同意<br><input name="c8" type="radio" data-x="-2" data-y="0" data-z="0">强烈同意<br></li><li>不应当谈论或者在公开的文字中记录自己的长辈的缺点。<br><input name="c9" type="radio" data-x="0" data-y="0" data-z="2" checked>强烈反对<br><input name="c9" type="radio" data-x="0" data-y="0" data-z="1">反对<br><input name="c9" type="radio" data-x="0" data-y="0" data-z="-1">同意<br><input name="c9" type="radio" data-x="0" data-y="0" data-z="-2">强烈同意<br></li><li>浪费粮食也是个人的自由。<br><input name="c10" type="radio" data-x="0" data-y="-2" data-z="0" checked>强烈反对<br><input name="c10" type="radio" data-x="0" data-y="-1" data-z="0">反对<br><input name="c10" type="radio" data-x="0" data-y="1" data-z="0">同意<br><input name="c10" type="radio" data-x="0" data-y="2" data-z="0">强烈同意<br></li><li>在中国照搬西方式的言论自由会导致社会失序。<br><input name="c11" type="radio" data-x="2" data-y="0" data-z="0" checked>强烈反对<br><input name="c11" type="radio" data-x="1" data-y="0" data-z="0">反对<br><input name="c11" type="radio" data-x="-1" data-y="0" data-z="0">同意<br><input name="c11" type="radio" data-x="-2" data-y="0" data-z="0">强烈同意<br></li><li>现代中国社会需要儒家思想。<br><input name="c12" type="radio" data-x="0" data-y="0" data-z="2" checked>强烈反对<br><input name="c12" type="radio" data-x="0" data-y="0" data-z="1">反对<br><input name="c12" type="radio" data-x="0" data-y="0" data-z="-1">同意<br><input name="c12" type="radio" data-x="0" data-y="0" data-z="-2">强烈同意<br></li><li>为保障社会公平，对富人征税应采用更高的税率。<br><input name="c13" type="radio" data-x="0" data-y="2" data-z="0" checked>强烈反对<br><input name="c13" type="radio" data-x="0" data-y="1" data-z="0">反对<br><input name="c13" type="radio" data-x="0" data-y="-1" data-z="0">同意<br><input name="c13" type="radio" data-x="0" data-y="-2" data-z="0">强烈同意<br></li><li>由高校自主考试招生比全国统一考试招生更好。<br><input name="c14" type="radio" data-x="-2" data-y="0" data-z="0" checked>强烈反对<br><input name="c14" type="radio" data-x="-1" data-y="0" data-z="0">反对<br><input name="c14" type="radio" data-x="1" data-y="0" data-z="0">同意<br><input name="c14" type="radio" data-x="2" data-y="0" data-z="0">强烈同意<br></li><li>应当对国外同类产品征收高额关税来保护国内民族工业。<br><input name="c15" type="radio" data-x="0" data-y="2" data-z="0" checked>强烈反对<br><input name="c15" type="radio" data-x="0" data-y="1" data-z="0">反对<br><input name="c15" type="radio" data-x="0" data-y="-1" data-z="0">同意<br><input name="c15" type="radio" data-x="0" data-y="-2" data-z="0">强烈同意<br></li><li>应该容许宗教人士在非宗教场所公开传教。<br><input name="c16" type="radio" data-x="-2" data-y="0" data-z="0" checked>强烈反对<br><input name="c16" type="radio" data-x="-1" data-y="0" data-z="0">反对<br><input name="c16" type="radio" data-x="1" data-y="0" data-z="0">同意<br><input name="c16" type="radio" data-x="2" data-y="0" data-z="0">强烈同意<br></li><li>任何艺术作品，只要有很多人愿意花钱去欣赏，就不能说它毫无艺术价值。<br><input name="c17" type="radio" data-x="0" data-y="0" data-z="-2" checked>强烈反对<br><input name="c17" type="radio" data-x="0" data-y="0" data-z="-1">反对<br><input name="c17" type="radio" data-x="0" data-y="0" data-z="1">同意<br><input name="c17" type="radio" data-x="0" data-y="0" data-z="2">强烈同意<br></li><li>在华外国资本应该受到限制，不能任意发展。<br><input name="c18" type="radio" data-x="0" data-y="2" data-z="0" checked>强烈反对<br><input name="c18" type="radio" data-x="0" data-y="1" data-z="0">反对<br><input name="c18" type="radio" data-x="0" data-y="-1" data-z="0">同意<br><input name="c18" type="radio" data-x="0" data-y="-2" data-z="0">强烈同意<br></li><li>无论中小学生或大学生，都应参加由国家统一安排的军训。<br><input name="c19" type="radio" data-x="2" data-y="0" data-z="0" checked>强烈反对<br><input name="c19" type="radio" data-x="1" data-y="0" data-z="0">反对<br><input name="c19" type="radio" data-x="-1" data-y="0" data-z="0">同意<br><input name="c19" type="radio" data-x="-2" data-y="0" data-z="0">强烈同意<br></li><li>集体财产比私有财产更应当保护。<br><input name="c20" type="radio" data-x="0" data-y="2" data-z="0" checked>强烈反对<br><input name="c20" type="radio" data-x="0" data-y="1" data-z="0">反对<br><input name="c20" type="radio" data-x="0" data-y="-1" data-z="0">同意<br><input name="c20" type="radio" data-x="0" data-y="-2" data-z="0">强烈同意<br></li><li>试图控制房地产价格的行为是不可行的，会破坏经济发展，给社会带来危害。<br><input name="c21" type="radio" data-x="0" data-y="-2" data-z="0" checked>强烈反对<br><input name="c21" type="radio" data-x="0" data-y="-1" data-z="0">反对<br><input name="c21" type="radio" data-x="0" data-y="1" data-z="0">同意<br><input name="c21" type="radio" data-x="0" data-y="2" data-z="0">强烈同意<br></li><li>国家的统一和领土完整是社会的最高利益。<br><input name="c22" type="radio" data-x="2" data-y="0" data-z="0" checked>强烈反对<br><input name="c22" type="radio" data-x="1" data-y="0" data-z="0">反对<br><input name="c22" type="radio" data-x="-1" data-y="0" data-z="0">同意<br><input name="c22" type="radio" data-x="-2" data-y="0" data-z="0">强烈同意<br></li><li>改善低收入者生活的首要手段是国家给予财政补贴和扶持。<br><input name="c23" type="radio" data-x="0" data-y="2" data-z="0" checked>强烈反对<br><input name="c23" type="radio" data-x="0" data-y="1" data-z="0">反对<br><input name="c23" type="radio" data-x="0" data-y="-1" data-z="0">同意<br><input name="c23" type="radio" data-x="0" data-y="-2" data-z="0">强烈同意<br></li><li>以美国为首的西方国家不可能真正容许中国崛起成为一流强国。<br><input name="c24" type="radio" data-x="2" data-y="0" data-z="0" checked>强烈反对<br><input name="c24" type="radio" data-x="1" data-y="0" data-z="0">反对<br><input name="c24" type="radio" data-x="-1" data-y="0" data-z="0">同意<br><input name="c24" type="radio" data-x="-2" data-y="0" data-z="0">强烈同意<br></li><li>个人有权利决定自己要不要孩子，要几个孩子。<br><input name="c25" type="radio" data-x="0" data-y="0" data-z="-2" checked>强烈反对<br><input name="c25" type="radio" data-x="0" data-y="0" data-z="-1">反对<br><input name="c25" type="radio" data-x="0" data-y="0" data-z="1">同意<br><input name="c25" type="radio" data-x="0" data-y="0" data-z="2">强烈同意<br></li><li>即使会导致国有资产的减少，国有企业也不应该在市场竞争中享有特殊的保护。<br><input name="c26" type="radio" data-x="0" data-y="-2" data-z="0" checked>强烈反对<br><input name="c26" type="radio" data-x="0" data-y="-1" data-z="0">反对<br><input name="c26" type="radio" data-x="0" data-y="1" data-z="0">同意<br><input name="c26" type="radio" data-x="0" data-y="2" data-z="0">强烈同意<br></li><li>应当保证代表全体人民利益的官方新闻机构的存在。<br><input name="c27" type="radio" data-x="2" data-y="0" data-z="0" checked>强烈反对<br><input name="c27" type="radio" data-x="1" data-y="0" data-z="0">反对<br><input name="c27" type="radio" data-x="-1" data-y="0" data-z="0">同意<br><input name="c27" type="radio" data-x="-2" data-y="0" data-z="0">强烈同意<br></li><li>高收入者应该公开自己的经济来源。<br><input name="c28" type="radio" data-x="0" data-y="2" data-z="0" checked>强烈反对<br><input name="c28" type="radio" data-x="0" data-y="1" data-z="0">反对<br><input name="c28" type="radio" data-x="0" data-y="-1" data-z="0">同意<br><input name="c28" type="radio" data-x="0" data-y="-2" data-z="0">强烈同意<br></li><li>国家领导人的形象可以出现在漫画中。<br><input name="c29" type="radio" data-x="-2" data-y="0" data-z="0" checked>强烈反对<br><input name="c29" type="radio" data-x="-1" data-y="0" data-z="0">反对<br><input name="c29" type="radio" data-x="1" data-y="0" data-z="0">同意<br><input name="c29" type="radio" data-x="2" data-y="0" data-z="0">强烈同意<br></li><li>周易八卦是老祖宗智慧的结晶，能够有效的解释很多事情。<br><input name="c30" type="radio" data-x="0" data-y="0" data-z="2" checked>强烈反对<br><input name="c30" type="radio" data-x="0" data-y="0" data-z="1">反对<br><input name="c30" type="radio" data-x="0" data-y="0" data-z="-1">同意<br><input name="c30" type="radio" data-x="0" data-y="0" data-z="-2">强烈同意<br></li><li>劫富济贫是行侠仗义。<br><input name="c31" type="radio" data-x="0" data-y="2" data-z="0" checked>强烈反对<br><input name="c31" type="radio" data-x="0" data-y="1" data-z="0">反对<br><input name="c31" type="radio" data-x="0" data-y="-1" data-z="0">同意<br><input name="c31" type="radio" data-x="0" data-y="-2" data-z="0">强烈同意<br></li><li>当法律未能充分制止罪恶行为时，通过极端手段对犯罪进行制裁是可以容忍的。<br><input name="c32" type="radio" data-x="2" data-y="0" data-z="0" checked>强烈反对<br><input name="c32" type="radio" data-x="1" data-y="0" data-z="0">反对<br><input name="c32" type="radio" data-x="-1" data-y="0" data-z="0">同意<br><input name="c32" type="radio" data-x="-2" data-y="0" data-z="0">强烈同意<br></li><li>中国传统医学具有一些现代主流医学不能比拟的优势。<br><input name="c33" type="radio" data-x="0" data-y="0" data-z="2" checked>强烈反对<br><input name="c33" type="radio" data-x="0" data-y="0" data-z="1">反对<br><input name="c33" type="radio" data-x="0" data-y="0" data-z="-1">同意<br><input name="c33" type="radio" data-x="0" data-y="0" data-z="-2">强烈同意<br></li><li>与其让公有制企业亏损破产，不如转卖给资本家。<br><input name="c34" type="radio" data-x="0" data-y="-2" data-z="0" checked>强烈反对<br><input name="c34" type="radio" data-x="0" data-y="-1" data-z="0">反对<br><input name="c34" type="radio" data-x="0" data-y="1" data-z="0">同意<br><input name="c34" type="radio" data-x="0" data-y="2" data-z="0">强烈同意<br></li><li>国家没有义务进行对外援助。<br><input name="c35" type="radio" data-x="-2" data-y="0" data-z="0" checked>强烈反对<br><input name="c35" type="radio" data-x="-1" data-y="0" data-z="0">反对<br><input name="c35" type="radio" data-x="1" data-y="0" data-z="0">同意<br><input name="c35" type="radio" data-x="2" data-y="0" data-z="0">强烈同意<br></li><li>以及其他重要国计民生的领域，必须全部由国有企业掌控。<br><input name="c36" type="radio" data-x="0" data-y="2" data-z="0" checked>强烈反对<br><input name="c36" type="radio" data-x="0" data-y="1" data-z="0">反对<br><input name="c36" type="radio" data-x="0" data-y="-1" data-z="0">同意<br><input name="c36" type="radio" data-x="0" data-y="-2" data-z="0">强烈同意<br></li><li>如果国家综合实力许可，那么中国有权为了维护自己的利益而采取任何行动。<br><input name="c37" type="radio" data-x="2" data-y="0" data-z="0" checked>强烈反对<br><input name="c37" type="radio" data-x="1" data-y="0" data-z="0">反对<br><input name="c37" type="radio" data-x="-1" data-y="0" data-z="0">同意<br><input name="c37" type="radio" data-x="-2" data-y="0" data-z="0">强烈同意<br></li><li>电视机构应当尽量制作格调高雅的节目，而不是只追求高收视率。<br><input name="c38" type="radio" data-x="0" data-y="0" data-z="2" checked>强烈反对<br><input name="c38" type="radio" data-x="0" data-y="0" data-z="1">反对<br><input name="c38" type="radio" data-x="0" data-y="0" data-z="-1">同意<br><input name="c38" type="radio" data-x="0" data-y="0" data-z="-2">强烈同意<br></li><li>资本积累的过程总是伴随着对普通劳动人民利益的伤害。<br><input name="c39" type="radio" data-x="0" data-y="2" data-z="0" checked>强烈反对<br><input name="c39" type="radio" data-x="0" data-y="1" data-z="0">反对<br><input name="c39" type="radio" data-x="0" data-y="-1" data-z="0">同意<br><input name="c39" type="radio" data-x="0" data-y="-2" data-z="0">强烈同意<br></li><li>条件允许的话应该武力攻台，台独者死不足惜。<br><input name="c40" type="radio" data-x="2" data-y="0" data-z="0" checked>强烈反对<br><input name="c40" type="radio" data-x="1" data-y="0" data-z="0">反对<br><input name="c40" type="radio" data-x="-1" data-y="0" data-z="0">同意<br><input name="c40" type="radio" data-x="-2" data-y="0" data-z="0">强烈同意<br></li><li>将传统文化的经典作品作为儿童的主要读物是值得称赞的。<br><input name="c41" type="radio" data-x="0" data-y="0" data-z="2" checked>强烈反对<br><input name="c41" type="radio" data-x="0" data-y="0" data-z="1">反对<br><input name="c41" type="radio" data-x="0" data-y="0" data-z="-1">同意<br><input name="c41" type="radio" data-x="0" data-y="0" data-z="-2">强烈同意<br></li><li>即使中国的市场经济出现危机或萧条，也不应当考虑退回计划经济体制。<br><input name="c42" type="radio" data-x="0" data-y="-2" data-z="0" checked>强烈反对<br><input name="c42" type="radio" data-x="0" data-y="-1" data-z="0">反对<br><input name="c42" type="radio" data-x="0" data-y="1" data-z="0">同意<br><input name="c42" type="radio" data-x="0" data-y="2" data-z="0">强烈同意<br></li><li>军队应当国家化。<br><input name="c43" type="radio" data-x="-2" data-y="0" data-z="0" checked>强烈反对<br><input name="c43" type="radio" data-x="-1" data-y="0" data-z="0">反对<br><input name="c43" type="radio" data-x="1" data-y="0" data-z="0">同意<br><input name="c43" type="radio" data-x="2" data-y="0" data-z="0">强烈同意<br></li><li>政府应当提高粮食收购价格以增加农民收入。<br><input name="c44" type="radio" data-x="0" data-y="2" data-z="0" checked>强烈反对<br><input name="c44" type="radio" data-x="0" data-y="1" data-z="0">反对<br><input name="c44" type="radio" data-x="0" data-y="-1" data-z="0">同意<br><input name="c44" type="radio" data-x="0" data-y="-2" data-z="0">强烈同意<br></li><li>应该允许公民在获得外国国籍之后依然保留中国国籍。<br><input name="c45" type="radio" data-x="-2" data-y="0" data-z="0" checked>强烈反对<br><input name="c45" type="radio" data-x="-1" data-y="0" data-z="0">反对<br><input name="c45" type="radio" data-x="1" data-y="0" data-z="0">同意<br><input name="c45" type="radio" data-x="2" data-y="0" data-z="0">强烈同意<br></li><li>同性恋对社会没有危害，人们应该接纳同性恋者。<br><input name="c46" type="radio" data-x="0" data-y="0" data-z="-2" checked>强烈反对<br><input name="c46" type="radio" data-x="0" data-y="0" data-z="-1">反对<br><input name="c46" type="radio" data-x="0" data-y="0" data-z="1">同意<br><input name="c46" type="radio" data-x="0" data-y="0" data-z="2">强烈同意<br></li><li>能在国际市场上买到的先进科技产品，我们没必要自行研制。<br><input name="c47" type="radio" data-x="0" data-y="-2" data-z="0" checked>强烈反对<br><input name="c47" type="radio" data-x="0" data-y="-1" data-z="0">反对<br><input name="c47" type="radio" data-x="0" data-y="1" data-z="0">同意<br><input name="c47" type="radio" data-x="0" data-y="2" data-z="0">强烈同意<br></li><li>哪怕经历了违反程序规定的审讯和取证过程，罪大恶极的人也应被处以死刑。<br><input name="c48" type="radio" data-x="2" data-y="0" data-z="0" checked>强烈反对<br><input name="c48" type="radio" data-x="1" data-y="0" data-z="0">反对<br><input name="c48" type="radio" data-x="-1" data-y="0" data-z="0">同意<br><input name="c48" type="radio" data-x="-2" data-y="0" data-z="0">强烈同意<br></li><li>政府不应当干预猪肉价格。<br><input name="c49" type="radio" data-x="0" data-y="-2" data-z="0" checked>强烈反对<br><input name="c49" type="radio" data-x="0" data-y="-1" data-z="0">反对<br><input name="c49" type="radio" data-x="0" data-y="1" data-z="0">同意<br><input name="c49" type="radio" data-x="0" data-y="2" data-z="0">强烈同意<br></li><li>国家应当采取措施培养和支持体育健儿在各种国际比赛场合为国争光。<br><input name="c50" type="radio" data-x="2" data-y="0" data-z="0" checked>强烈反对<br><input name="c50" type="radio" data-x="1" data-y="0" data-z="0">反对<br><input name="c50" type="radio" data-x="-1" data-y="0" data-z="0">同意<br><input name="c50" type="radio" data-x="-2" data-y="0" data-z="0">强烈同意<br></li></ol></form><div id="wrapper"><button id="submit" type="button" class="button button-inverse button-rounded">提交</button><br><span id="answer" class="red"></span></div><hr><p>X坐标反映政治观念，负值为左(<a href="https://en.wikipedia.org/wiki/Authoritarianism" target="_blank" rel="external">独裁主义</a>)，正值为右(<a href="https://en.wikipedia.org/wiki/Libertarianism" target="_blank" rel="external">自由意志主义</a>)。<br>Y坐标反映经济观念，负值为左(<a href="https://en.wikipedia.org/wiki/Communism" target="_blank" rel="external">共产主义</a>, <a href="https://en.wikipedia.org/wiki/Collectivism" target="_blank" rel="external">集体主义</a>)，正值为右(<a href="https://en.wikipedia.org/wiki/Neoliberalism" target="_blank" rel="external">新自由主义</a>)。<br>Z坐标反映社会文化观念，负值为<a href="https://en.wikipedia.org/wiki/Conservatism" target="_blank" rel="external">保守主义</a>，正值为<a href="https://en.wikipedia.org/wiki/Liberalism" target="_blank" rel="external">自由主义</a>。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;本测试转载自政治坐标测试北大未名版之&lt;a href=&quot;http://www.zuobiao.me/zuobiao2015/index.php/survey/index&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;中国政治坐标系测试&lt;/a&gt;。可惜的是，原网站似乎已经被干掉了，因此该测试的题目及数据处理逻辑源自&lt;a href=&quot;http://www.mwjx.com/mwjx/iq_tests/tests_politics.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;另一个网站&lt;/a&gt;。&lt;/p&gt;&lt;p&gt;本来这个测试还是很有意义的，而且原作者那边利用测试统计来的数据还写了论文……但是原网站被封的现在数据无法访问，而且原文章中也没有对测试结果的解释，做完之后只能得到几个意味不明的&lt;code&gt;float&lt;/code&gt;，可以说是十分可惜。&lt;/p&gt;
    
    </summary>
    
      <category term="杂项" scheme="https://unnamed42.github.io/categories/%E6%9D%82%E9%A1%B9/"/>
    
    
      <category term="测试" scheme="https://unnamed42.github.io/tags/%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>Hexo折腾笔记</title>
    <link href="https://unnamed42.github.io/2016-09-10-Hexo%E6%8A%98%E8%85%BE%E7%AC%94%E8%AE%B0.html"/>
    <id>https://unnamed42.github.io/2016-09-10-Hexo折腾笔记.html</id>
    <published>2016-09-10T13:14:06.000Z</published>
    <updated>2018-06-21T16:01:46.589Z</updated>
    
    <content type="html"><![CDATA[<p>&#x8EAB;&#x4E3A;&#x4E00;&#x540D;&#x9884;&#x5907;&#x7A0B;&#x5E8F;&#x5458;&#xFF0C;&#x5BF9;&#x4E8E;&#x81EA;&#x5DF1;&#x4F7F;&#x7528;&#x7684;&#x5DE5;&#x5177;&#x81EA;&#x7136;&#x8981;&#x6709;&#x6298;&#x817E;&#x7684;&#x6B32;&#x671B;&#x3002;&#x4ECE;&#x4ECA;&#x5E74;<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>&#x4E03;&#x516B;&#x6708;&#x4EE5;&#x6765;&#xFF0C;&#x5C31;&#x4E00;&#x76F4;&#x5728;&#x60F3;&#x7740;&#x5982;&#x4F55;&#x6298;&#x817E;&#x6298;&#x817E;Hexo. &#x518D;&#x52A0;&#x4E0A;&#x5F88;&#x559C;&#x6B22;<a href="https://mufeng.me/wordpress-mobile-theme-kunkka.html" target="_blank" rel="noopener">Kunkka</a>&#xFF08;&#x5176;Github&#x6E90;&#x5DF2;404&#xFF0C;&#x4F30;&#x8BA1;&#x88AB;&#x4F5C;&#x8005;&#x81EA;&#x5DF1;&#x5220;&#x9664;&#x4E86;&#xFF09;&#x8FD9;&#x4E2A;Wordpress&#x7684;&#x4E3B;&#x9898;&#xFF0C;&#x60F3;&#x7740;&#x628A;&#x5B83;&#x79FB;&#x690D;&#x5230;Hexo&#x4E0A;&#x6765;&#x3002;&#x5C31;&#x5728;&#x8FD9;&#x91CC;&#x8BB0;&#x8F7D;&#x4E00;&#x4E0B;&#x78B0;&#x5230;&#x7684;&#x95EE;&#x9898;&#x548C;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x5427;&#x3002;</p><p>UPDATE 2016/10/28: &#x4FEE;&#x6539;&#x4E86;&#x90E8;&#x5206;&#x7528;&#x8BCD;</p><p>UPDATE 2017/9/22: &#x66F4;&#x65B0;&#x4EE3;&#x7801;</p><p>UPDATE 2018/6/21: &#x518D;&#x5EA6;&#x66F4;&#x65B0;&#x4EE3;&#x7801;</p><a id="more"></a><h2 id="&#x4E3B;&#x9898;&#x7684;&#x521B;&#x5EFA;">&#x4E3B;&#x9898;&#x7684;&#x521B;&#x5EFA;</h2><p>&#x65B9;&#x4FBF;&#x8D77;&#x89C1;&#xFF0C;&#x6211;&#x5728;&#x4E3B;&#x9898;&#x4E2D;&#x63D2;&#x5165;&#x4E86;<a href="https://jquery.com/" target="_blank" rel="noopener">jQuery</a>&#x548C;<a href="http://fontawesome.io/" target="_blank" rel="noopener">FontAwesome</a>. &#x5B9E;&#x9645;&#x4E0A;&#xFF0C;&#x6CA1;&#x6709;&#x8FD9;&#x4E24;&#x6837;&#x6211;&#x6D51;&#x8EAB;&#x96BE;&#x53D7;&#x3002;</p><h3 id="&#x4E3B;&#x9898;&#x6A21;&#x677F;&#x5F15;&#x64CE;">&#x4E3B;&#x9898;&#x6A21;&#x677F;&#x5F15;&#x64CE;</h3><p>Hexo&#x4E3B;&#x8981;&#x63D0;&#x4F9B;&#x4E86;&#x4E09;&#x6B3E;&#x6A21;&#x677F;&#x5F15;&#x64CE;&#xFF0C;&#x5206;&#x522B;&#x662F;<a href="http://www.embeddedjs.com/" target="_blank" rel="noopener">EJS</a>, <a href="https://naltatis.github.io/jade-syntax-docs/" target="_blank" rel="noopener">Jade</a>(&#x73B0;&#x540D;<a href="https://pugjs.org/api/getting-started.html" target="_blank" rel="noopener">Pug</a>), <a href="http://www.swig.org/" target="_blank" rel="noopener">Swig</a>.</p><p>&#x6211;&#x4E2A;&#x4EBA;&#x770B;&#x6765;&#xFF0C;Jade&#x4EE3;&#x7801;&#x7ED3;&#x6784;&#x4F18;&#x96C5;&#xFF08;&#x548C;Python&#x4E00;&#x6837;&#xFF0C;&#x4E0D;&#x4F18;&#x96C5;&#x4E0D;&#x8BA9;&#x8DD1;&#xFF09;&#xFF0C;&#x4F46;&#x662F;&#x4EE3;&#x7801;&#x7ED3;&#x6784;&#x548C;HTML&#x6587;&#x6863;&#x76F8;&#x53BB;&#x751A;&#x8FDC;&#xFF0C;&#x975E;&#x5E38;&#x4E0D;&#x76F4;&#x89C2;&#x3002;&#x8FD9;&#x4E5F;&#x5C31;&#x610F;&#x5473;&#x7740;&#xFF0C;&#x8981;&#x4F7F;&#x7528;&#x5B83;&#x4E0D;&#x5149;&#x8981;&#x5B66;&#x4E60;HTML, &#x8FD8;&#x5F97;&#x7279;&#x522B;&#x5730;&#x53BB;&#x5B66;&#x4E60;Jade&#x8BED;&#x6CD5;&#x3002;&#x800C;&#x4E14;&#x636E;&#x6211;&#x672C;&#x4EBA;&#x5C11;&#x91CF;&#x7684;&#x6D4B;&#x8BD5;&#x800C;&#x8A00;&#xFF0C;Jade&#x7684;&#x4E3B;&#x9898;&#x548C;EJS&#x7684;&#x4E3B;&#x9898;&#x76F8;&#x6BD4;&#x751F;&#x6210;&#x901F;&#x5EA6;&#x6162;&#x4E86;&#x51E0;&#x500D;&#x3002;EJS duang&#x7684;&#x4E00;&#x4E0B;&#x5C31;&#x751F;&#x6210;&#x5B8C;&#x4E86;&#xFF0C;Jade&#x4F60;&#x8FD8;&#x80FD;&#x5728;&#x7EC8;&#x7AEF;&#x91CC;&#x770B;&#x7740;&#x5B83;&#x6162;&#x6162;&#x5730;&#x4E00;&#x884C;&#x4E00;&#x884C;&#x7684;&#x8F93;&#x51FA;&#x751F;&#x6210;&#x4E86;xxx&#x6587;&#x4EF6;&#x3002;</p><p>&#x800C;EJS&#x548C;Swig&#x4E24;&#x4E2A;&#x76F8;&#x6BD4;&#xFF0C;&#x5728;&#x6211;&#x4F7F;&#x7528;&#x7684;&#x529F;&#x80FD;&#x4E0A;&#x6211;&#x611F;&#x89C9;&#x4E0D;&#x51FA;&#x4EC0;&#x4E48;&#x5DEE;&#x522B;&#x3002;&#x4E24;&#x4E2A;&#x90FD;&#x548C;&#x4E16;&#x754C;&#x4E0A;&#x6700;&#x597D;&#x7684;&#x8BED;&#x8A00;<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>&#x4E00;&#x6837;&#xFF0C;&#x52A8;&#x6001;&#x751F;&#x6210;&#x7684;&#x90E8;&#x5206;&#x7A7F;&#x63D2;&#x5728;HTML&#x5F53;&#x4E2D;&#x3002;&#x4E0D;&#x8FC7;&#xFF0C;Swig&#x5728;npm&#x4E0A;&#x5DF2;&#x7ECF;&#x6CA1;&#x4EBA;&#x7EF4;&#x62A4;&#x4E86;&#x3002;</p><p>&#x6211;&#x672C;&#x4EBA;&#x4F7F;&#x7528;&#x7684;&#x662F;EJS, &#x5B83;&#x811A;&#x672C;&#x90E8;&#x5206;&#x5168;&#x76D8;&#x4F7F;&#x7528;Javascript&#x8BED;&#x6CD5;&#xFF0C;&#x751F;&#x6210;&#x5FEB;&#xFF0C;&#x5B66;&#x8D77;&#x6765;&#x4E5F;&#x5FEB;&#xFF0C;&#x800C;&#x4E14;&#x5728;&#x4E4B;&#x524D;&#x6709;<ruby>&#x6539;&#x8FDB;<rp>(</rp><rt>xi&#x101; g&#x1CE;i</rt><rp>)</rp></ruby><a href="https://github.com/unnamed42/hexo-theme-Anisina" target="_blank" rel="noopener">Anisina</a>&#x7684;&#x7ECF;&#x9A8C;&#xFF08;&#x5B83;&#x662F;&#x7528;EJS&#x5199;&#x7684;&#xFF09;&#x3002;&#x6700;&#x6700;&#x91CD;&#x8981;&#x7684;&#x662F;&#xFF0C;&#x6211;&#x4F7F;&#x7528;&#x7684;&#x6587;&#x672C;&#x7F16;&#x8F91;&#x5668;<a href="https://kate-editor.org/" target="_blank" rel="noopener">Kate</a>&#x6709;&#x5B83;&#x7684;&#x9AD8;&#x4EAE;&#x6587;&#x4EF6;&#x3002;&#x8FD9;&#x4E00;&#x70B9;&#x975E;&#x5E38;&#x975E;&#x5E38;&#x975E;&#x5E38;&#x91CD;&#x8981;&#x3002;</p><h3 id="&#x4E3B;&#x9898;css&#x9884;&#x5904;&#x7406;&#x5668;">&#x4E3B;&#x9898;CSS&#x9884;&#x5904;&#x7406;&#x5668;</h3><p>Hexo &#x6240;&#x652F;&#x6301;&#x7684;CSS&#x9884;&#x5904;&#x7406;&#x5668;&#x6709;<a href="http://sass-lang.com/" target="_blank" rel="noopener">Sass</a>, <a href="http://stylus-lang.com/" target="_blank" rel="noopener">Stylus</a>, <a href="http://lesscss.org/" target="_blank" rel="noopener">Less</a>&#x4E09;&#x6B3E;&#x3002;&#x53E6;&#x4E24;&#x4E2A;&#x6211;&#x6CA1;&#x7528;&#x8FC7;&#xFF0C;&#x4E0D;&#x8FC7;Stylus&#x529F;&#x80FD;&#x7EDD;&#x5BF9;&#x591F;&#x591A;&#x591F;&#x5F3A;&#xFF0C;&#x591F;&#x7528;&#x4E86;&#x3002;</p><p>&#x4F60;&#x8981;&#x662F;&#x4E0D;&#x5ACC;&#x9EBB;&#x70E6;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4E0D;&#x4F7F;&#x7528;&#x9884;&#x5904;&#x7406;&#x5668;&#xFF0C;&#x76F4;&#x63A5;&#x83BD;&#x539F;&#x751F;CSS&#x4E5F;&#x662F;&#x53EF;&#x4EE5;&#x7684;&#x3002;</p><h3 id="&#x4E3B;&#x9898;&#x7ED3;&#x6784;">&#x4E3B;&#x9898;&#x7ED3;&#x6784;</h3><p>&#x8FD9;&#x4E9B;&#x5728;Hexo&#x7684;&#x6587;&#x6863;(<a href="https://hexo.io/docs/themes.html" target="_blank" rel="noopener">Theme</a>, <a href="https://hexo.io/docs/templates.html" target="_blank" rel="noopener">Template</a>)&#x91CC;&#x90FD;&#x6709;&#x63CF;&#x5199;&#xFF0C;&#x867D;&#x7136;&#x4E0D;&#x662F;&#x5F88;&#x8BE6;&#x7EC6;&#xFF0C;&#x4F46;&#x4E5F;&#x591F;&#x7528;&#x4E86;&#x3002;</p><h2 id="hexo&#x4E3B;&#x9898;&#x76F8;&#x5173;">Hexo&#x4E3B;&#x9898;&#x76F8;&#x5173;</h2><h3 id="&#x56DE;&#x5230;&#x9876;&#x90E8;-&#x6309;&#x94AE;">&#x201C;&#x56DE;&#x5230;&#x9876;&#x90E8;&#x201D;&#x6309;&#x94AE;</h3><h4 id="&#x6309;&#x94AE;&#x6837;&#x5F0F;">&#x6309;&#x94AE;&#x6837;&#x5F0F;</h4><p>&#x521A;&#x5F00;&#x59CB;&#x6211;&#x662F;&#x4EFF;&#x81EA;<a href="https://github.com/tufu9441/maupassant-hexo" target="_blank" rel="noopener">Maupassant</a>&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x5C0F;&#x6309;&#x94AE;&#x6765;&#x5B9E;&#x73B0;&#x201C;&#x56DE;&#x5230;&#x9876;&#x90E8;&#x201D;&#xFF0C;&#x800C;&#x4E14;&#x5F53;&#x6EDA;&#x52A8;&#x5230;&#x4E00;&#x5B9A;&#x4F4D;&#x7F6E;&#x65F6;&#x624D;&#x51FA;&#x73B0;&#x3002;</p><p>&#x8FD9;&#x4E00;&#x4E2A;&#x6309;&#x94AE;&#x7531;&#x4EE5;&#x4E0B;&#x90E8;&#x5206;&#x7EC4;&#x6210;&#xFF1A;</p><figure class="highlight plain"><figcaption><span>totop.ejs</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;totop&quot; class&gt;</span><br><span class="line">    &lt;button class=&quot;button button-square button-small&quot; title=&lt;%- __(&apos;to_top&apos;)%&gt;&gt;&lt;i class=&quot;fa fa-chevron-up&quot;&gt;&lt;/i&gt;&lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p><code>button</code>, <code>button-square</code>, <code>button-small</code>&#x662F;&#x6211;&#x5F15;&#x81EA;<a href="http://www.bootcss.com/p/buttons/" target="_blank" rel="noopener">BUTTONS</a>&#x7684;&#x6309;&#x94AE;&#x6837;&#x5F0F;&#xFF08;&#x611F;&#x8C22;<a href="https://github.com/MaoKwen" target="_blank" rel="noopener">@maokwen</a>&#x7684;&#x63A8;&#x8350;&#xFF09;&#xFF0C;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5176;&#x4ED6;&#x7684;&#x6309;&#x94AE;&#x6837;&#x5F0F;&#x3002;</p><figure class="highlight css"><figcaption><span>totop.css</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#totop</span> {</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">visibility</span>: hidden;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">-webkit-transition</span>: visibility <span class="number">0.2s</span>, opacity <span class="number">0.2s</span> linear;</span><br><span class="line">     <span class="attribute">-moz-transition</span>: visibility <span class="number">0.2s</span>, opacity <span class="number">0.2s</span> linear;</span><br><span class="line">          <span class="attribute">transition</span>: visibility <span class="number">0.2s</span>, opacity <span class="number">0.2s</span> linear;</span><br><span class="line">}</span><br><span class="line"><span class="selector-id">#totop</span><span class="selector-class">.display</span> {</span><br><span class="line">  <span class="attribute">visibility</span>: visible;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure><figure class="highlight js"><figcaption><span>totop.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">$</span>) </span>{</span><br><span class="line"><span class="comment">// When to show the scroll link</span></span><br><span class="line"><span class="comment">// higher number = scroll link appears further down the page</span></span><br><span class="line"><span class="keyword">var</span> upperLimit = <span class="number">500</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Our scroll link element</span></span><br><span class="line"><span class="keyword">var</span> scrollElem = $(<span class="string">&apos;#totop&apos;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Scroll to top speed</span></span><br><span class="line"><span class="keyword">var</span> scrollSpeed = <span class="number">500</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Show and hide the scroll to top link based on scroll position</span></span><br><span class="line">$(<span class="built_in">window</span>).scroll(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">    <span class="keyword">if</span> ( $(<span class="built_in">document</span>).scrollTop() &gt; upperLimit ) {</span><br><span class="line">        $(scrollElem).addClass(<span class="string">&quot;display&quot;</span>); <span class="comment">// fade back in</span></span><br><span class="line">    }<span class="keyword">else</span>{</span><br><span class="line">        $(scrollElem).removeClass(<span class="string">&quot;display&quot;</span>); <span class="comment">// fade out</span></span><br><span class="line">    }</span><br><span class="line">});</span><br><span class="line"></span><br><span class="line"><span class="comment">// Scroll to top animation on click</span></span><br><span class="line">$(scrollElem).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line">    $(<span class="string">&apos;html, body&apos;</span>).animate({<span class="attr">scrollTop</span>:<span class="number">0</span>}, scrollSpeed); <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">});</span><br><span class="line">})(jQuery);</span><br></pre></td></tr></table></figure><p>&#x5C06;&#x5176;&#x63D2;&#x5165;&#x5230;&#x5408;&#x9002;&#x7684;&#x5730;&#x65B9;&#x5373;&#x53EF;&#x3002;</p><h4 id="&#x767E;&#x5206;&#x6BD4;&#x6837;&#x5F0F;">&#x767E;&#x5206;&#x6BD4;&#x6837;&#x5F0F;</h4><p>&#x540E;&#x6765;&#x770B;&#x89C1;&#x4E86;<a href="https://lijiancheng0614.github.io" target="_blank" rel="noopener">lijiancheng0614</a>&#x4F7F;&#x7528;&#x7684;<a href="https://lijiancheng0614.github.io/2015/08/15/2015_08_15_Migrate_to_Hexo/#%E6%B7%BB%E5%8A%A0gotop" target="_blank" rel="noopener">&#x767E;&#x5206;&#x6BD4;&#x6837;&#x5F0F;</a>&#xFF0C;&#x6211;&#x611F;&#x89C9;&#x5B83;&#x66F4;&#x5F3A;&#xFF0C;&#x4E8E;&#x662F;&#x6362;&#x7528;&#x4E86;&#x8FD9;&#x4E2A;&#x3002;&#x8FD9;&#x4E2A;&#x6309;&#x94AE;&#x662F;&#x4E00;&#x4E2A;&#x5706;&#x5F62;&#x6309;&#x94AE;&#xFF0C;&#x5E76;&#x4E14;&#x6709;&#x4E00;&#x4E2A;&#x5B9E;&#x65F6;&#x66F4;&#x65B0;&#x7684;&#x5706;&#x5F62;&#x8FDB;&#x5EA6;&#x6761;&#x663E;&#x793A;&#x4F60;&#x5F53;&#x524D;&#x9605;&#x8BFB;&#x8FDB;&#x5EA6;&#x3002;&#x867D;&#x7136;&#x529F;&#x80FD;&#x66F4;&#x5F3A;&#xFF0C;&#x4F46;&#x4EE3;&#x7801;&#x91CF;&#x66F4;&#x5927;&#xFF0C;&#x6027;&#x80FD;&#x635F;&#x8017;&#x66F4;&#x591A;&#x3002;&#x5177;&#x4F53;&#x5982;&#x4F55;&#x53D6;&#x820D;&#x770B;&#x4F60;&#x81EA;&#x5DF1;&#x4E86;&#x3002;</p><p>&#x4EE5;&#x4E0B;&#x662F;&#x6211;&#x73B0;&#x5728;&#x6B63;&#x5728;&#x4F7F;&#x7528;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x4F60;&#x5E94;&#x8BE5;&#x80FD;&#x4ECE;&#x53F3;&#x4E0B;&#x89D2;&#x7684;&#x90A3;&#x4E2A;&#x5706;&#x5708;&#x611F;&#x53D7;&#x6548;&#x679C;&#x5982;&#x4F55;&#x3002;</p><figure class="highlight plain"><figcaption><span>totop.ejs</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;totop&quot; title=&quot;&lt;%= __(&apos;to_top&apos;) %&gt;&quot;&gt;</span><br><span class="line">    &lt;canvas id=&quot;totop-canvas&quot; width=&quot;48&quot; height=&quot;48&quot;&gt;&lt;/canvas&gt;</span><br><span class="line">    &lt;div id=&quot;totop-percent&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><figure class="highlight stylus"><figcaption><span>totop.styl</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#totop</span> {</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#eee</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">5%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">48px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">48px</span>;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">right</span>: -<span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">99</span>;</span><br><span class="line">    -webkit-<span class="attribute">transition</span>: <span class="number">0.5s</span>;</span><br><span class="line">       -moz-<span class="attribute">transition</span>: <span class="number">0.5s</span>;</span><br><span class="line">            <span class="attribute">transition</span>: <span class="number">0.5s</span>;</span><br><span class="line">    &amp;<span class="selector-class">.display</span> {<span class="attribute">right</span>: <span class="number">10px</span>;}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#totop-percent</span> {</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">48px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">48px</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">48px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#555</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    &amp;:before {<span class="attribute">content</span>:attr(data-percent);}</span><br><span class="line">    &amp;:hover:before {</span><br><span class="line">        <span class="attribute">display</span>: inline-block;</span><br><span class="line">        <span class="attribute">font</span>: <span class="number">14px</span>/<span class="number">1em</span> FontAwesome;</span><br><span class="line">        <span class="attribute">font-size</span>: inherit;</span><br><span class="line">        <span class="attribute">text-rendering</span>: auto;</span><br><span class="line">        -webkit-<span class="attribute">font</span>-smoothing: antialiased;</span><br><span class="line">        -moz-osx-<span class="attribute">font</span>-smoothing: grayscale;</span><br><span class="line">        <span class="attribute">content</span>: <span class="string">&quot;\f176&quot;</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>&#x6211;&#x4EEC;&#x5728;&#x89E6;&#x53D1;<code>hover</code>&#x7684;&#x65F6;&#x5019;&#x5C06;&#x5185;&#x5BB9;&#x6539;&#x6210;FontAwesome&#x7684;&#x4E0A;&#x7BAD;&#x5934;&#xFF0C;&#x8BB0;&#x5F97;&#x628A;&#x5B57;&#x4F53;&#x6B63;&#x786E;&#x5F15;&#x7528;&#x8FDB;&#x6765;&#x3002;&#x6B63;&#x5E38;&#x65F6;&#x5019;&#x5C31;&#x663E;&#x793A;&#x6570;&#x5B57;&#x767E;&#x5206;&#x6BD4;&#x3002;</p><figure class="highlight js"><figcaption><span>totop.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">    <span class="keyword">var</span> totop = $(<span class="string">&quot;#totop&quot;</span>),</span><br><span class="line">        canvas = $(<span class="string">&quot;#totop-canvas&quot;</span>),</span><br><span class="line">        percent = $(<span class="string">&quot;#totop-percent&quot;</span>),</span><br><span class="line">        width = canvas.width(),</span><br><span class="line">        height = canvas.height(),</span><br><span class="line">        center = width / <span class="number">2</span>,</span><br><span class="line">        radius = <span class="built_in">parseInt</span>((width - <span class="number">3</span>) / <span class="number">2</span>),</span><br><span class="line">        ctx = canvas[<span class="number">0</span>].getContext(<span class="string">&quot;2d&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">drawCircle</span>(<span class="params">color, percent</span>) </span>{</span><br><span class="line">        ctx.beginPath();</span><br><span class="line">        ctx.arc(center, center, radius, - <span class="built_in">Math</span>.PI / <span class="number">2</span>, <span class="built_in">Math</span>.PI * <span class="number">1.5</span> * percent, <span class="literal">false</span>);</span><br><span class="line">        ctx.strokeStyle = color;</span><br><span class="line">        ctx.lineCap = <span class="string">&quot;round&quot;</span>; <span class="comment">// butt, round or square</span></span><br><span class="line">        ctx.lineWidth = <span class="number">3</span>;</span><br><span class="line">        ctx.stroke();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    totop.click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">        $(<span class="string">&quot;body, html&quot;</span>).animate({</span><br><span class="line">            scrollTop: <span class="number">0</span></span><br><span class="line">        }, <span class="number">800</span>);</span><br><span class="line">    });</span><br><span class="line"></span><br><span class="line">    $(<span class="built_in">window</span>).scroll(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">        <span class="keyword">var</span> docHeight = $(<span class="built_in">document</span>).height() - $(<span class="built_in">window</span>).height(),</span><br><span class="line">            scrollTop = $(<span class="built_in">window</span>).scrollTop(),</span><br><span class="line">            per = <span class="built_in">parseInt</span>(scrollTop / docHeight * <span class="number">100</span>);</span><br><span class="line">        <span class="keyword">if</span> (scrollTop &gt;= <span class="number">200</span>) {</span><br><span class="line">            totop.addClass(<span class="string">&quot;display&quot;</span>);</span><br><span class="line">            ctx.clearRect(<span class="number">0</span>, <span class="number">0</span>, width, height);</span><br><span class="line">            drawCircle(<span class="string">&quot;#efefef&quot;</span>, <span class="number">1</span>);</span><br><span class="line">            drawCircle(<span class="string">&quot;#555555&quot;</span>, per/<span class="number">100</span>);</span><br><span class="line">        } <span class="keyword">else</span></span><br><span class="line">            totop.removeClass(<span class="string">&quot;display&quot;</span>);</span><br><span class="line">        percent.attr(<span class="string">&quot;data-percent&quot;</span>, per);</span><br><span class="line">    });</span><br><span class="line">});</span><br></pre></td></tr></table></figure><p>&#x5C06;&#x5176;&#x63D2;&#x5165;&#x5230;&#x5408;&#x9002;&#x7684;&#x5730;&#x65B9;&#x5373;&#x53EF;&#x3002;<span class="spoiler">&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x6709;&#x62A5;&#x544A;&#x8BF4;&#x65E0;&#x6CD5;&#x6B63;&#x5E38;&#x8FD0;&#x4F5C;&#x7684;&#xFF0C;&#x4E5F;&#x6709;&#x8BF4;&#x4E4B;&#x524D;&#x7684;&#x65E0;&#x6CD5;&#x8FD0;&#x4F5C;&#x8FD9;&#x4E2A;&#x5B8C;&#x597D;&#x7684;&#xFF0C;&#x5F88;&#x795E;&#x79D8;&#x3002;</span></p><h3 id="&#x76EE;&#x5F55;&#x6837;&#x5F0F;">&#x76EE;&#x5F55;&#x6837;&#x5F0F;</h3><p>&#x9996;&#x5148;&#xFF0C;&#x6765;&#x63A2;&#x7D22;Hexo&#x81EA;&#x5E26;helper<code>toc()</code>&#x751F;&#x6210;&#x7684;&#x76EE;&#x5F55;&#x7684;HTML&#xFF08;&#x8BE5;&#x90E8;&#x5206;&#x76EE;&#x5F55;&#x6458;&#x81EA;&#x6211;&#x7684;&#x535A;&#x5BA2;<a href="https://unnamed42.github.io/2016-06-22-%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E9%81%8D%E5%8E%86-%E6%A0%88.html">&#x4E8C;&#x53C9;&#x6811;&#x7684;&#x904D;&#x5386;-&#x6808;</a>&#xFF09;&#xFF1A;</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ol</span> <span class="attr">class</span>=<span class="string">&quot;toc&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;toc-item toc-level-2&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;toc-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&#x76F4;&#x63A5;&#x904D;&#x5386;&#x7B97;&#x6CD5;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;toc-text&quot;</span>&gt;</span>&#x76F4;&#x63A5;&#x904D;&#x5386;&#x7B97;&#x6CD5;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ol</span> <span class="attr">class</span>=<span class="string">&quot;toc-child &quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;toc-item toc-level-3&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;toc-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&#x6709;&#x5173;&#x7EA6;&#x5B9A;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;toc-text&quot;</span>&gt;</span>&#x6709;&#x5173;&#x7EA6;&#x5B9A;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;toc-item toc-level-3&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;toc-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&#x4F7F;&#x7528;&#x7CFB;&#x7EDF;&#x6808;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;toc-text&quot;</span>&gt;</span>&#x4F7F;&#x7528;&#x7CFB;&#x7EDF;&#x6808;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ol</span> <span class="attr">class</span>=<span class="string">&quot;toc-child &quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;toc-item toc-level-4&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;toc-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&#x524D;&#x5E8F;&#x904D;&#x5386;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;toc-text&quot;</span>&gt;</span>&#x524D;&#x5E8F;&#x904D;&#x5386;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;toc-item toc-level-4&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;toc-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&#x4E2D;&#x5E8F;&#x904D;&#x5386;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;toc-text&quot;</span>&gt;</span>&#x4E2D;&#x5E8F;&#x904D;&#x5386;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;toc-item toc-level-4&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;toc-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&#x540E;&#x5E8F;&#x904D;&#x5386;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;toc-text&quot;</span>&gt;</span>&#x540E;&#x5E8F;&#x904D;&#x5386;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;toc-item toc-level-3&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;toc-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x6808;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;toc-text&quot;</span>&gt;</span>&#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x6808;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ol</span> <span class="attr">class</span>=<span class="string">&quot;toc-child &quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;toc-item toc-level-4&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;toc-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&#x524D;&#x5E8F;&#x904D;&#x5386;-v2&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;toc-text&quot;</span>&gt;</span>&#x524D;&#x5E8F;&#x904D;&#x5386;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;toc-item toc-level-4&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;toc-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&#x4E2D;&#x5E8F;&#x904D;&#x5386;-v2&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;toc-text&quot;</span>&gt;</span>&#x4E2D;&#x5E8F;&#x904D;&#x5386;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;toc-item toc-level-4&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;toc-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&#x540E;&#x5E8F;&#x904D;&#x5386;-v2&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;toc-text&quot;</span>&gt;</span>&#x540E;&#x5E8F;&#x904D;&#x5386;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">ol</span> <span class="attr">class</span>=<span class="string">&quot;toc-child&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;toc-item toc-level-5&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;toc-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&#x4ED9;&#x672F;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;toc-text&quot;</span>&gt;</span>&#x4ED9;&#x672F;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br></pre></td></tr></table></figure><p>&#x5206;&#x5C42;&#x975E;&#x5E38;&#x660E;&#x663E;&#x3002;&#x6BCF;&#x4E2A;&#x94FE;&#x63A5;&#x7684;&#x76EE;&#x7684;&#x5730;&#x5C31;&#x662F;&#x5BF9;&#x5E94;&#x7684;heading, heading&#x7684;id&#x5C31;&#x662F;&#x94FE;&#x63A5;&#x5730;&#x5740;&#x53BB;&#x6389;<code>#</code>. &#x5404;&#x4E2A;markdown&#x6E32;&#x67D3;&#x5668;&#x751F;&#x6210;&#x7684;&#x7ED3;&#x679C;&#x867D;&#x7136;&#x4F1A;&#x6709;&#x4E9B;&#x8BB8;&#x4E0D;&#x540C;&#xFF0C;&#x4F46;&#x94FE;&#x63A5;&#x548C;id&#x4E00;&#x5B9A;&#x662F;&#x5BF9;&#x5E94;&#x7684;&#xFF08;Hexo&#x7684;<code>toc()</code>&#x5C31;&#x662F;&#x6839;&#x636E;heading&#x7684;id&#x6765;&#x751F;&#x6210;&#x76EE;&#x5F55;&#x7684;&#xFF0C;&#x4E0D;&#x5BF9;&#x5E94;&#x7684;&#x8BDD;&#x8981;&#x4E48;&#x6CA1;&#x6709;&#x76EE;&#x5F55;&#xFF0C;&#x8981;&#x4E48;&#x94FE;&#x63A5;&#x76EE;&#x7684;&#x5730;&#x662F;<code>undefined</code>&#xFF09;&#x3002;</p><p>&#x9664;&#x6B64;&#x4E4B;&#x5916;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x7ED9;&#x76EE;&#x5F55;&#x505A;&#x4E2A;&#x5916;&#x5C42;&#x5305;&#x88C5;&#x3002;&#x5728;&#x672C;&#x4E3B;&#x9898;&#x4E2D;&#xFF0C;&#x76EE;&#x5F55;&#x88AB;&#x5305;&#x88F9;&#x5728;<code>&lt;div id=&quot;toc&quot;&gt;&lt;/div&gt;</code>&#x5185;&#x3002;</p><p>&#x6211;&#x7ED9;&#x76EE;&#x5F55;&#x5B9A;&#x4E0B;&#x4E86;&#x51E0;&#x4E2A;&#x6837;&#x5F0F;&#x4E0A;&#x7684;&#x76EE;&#x6807;&#xFF1A;</p><ol><li><p>&#x8DDF;&#x968F;&#x9875;&#x9762;&#x6EDA;&#x52A8;</p></li><li><p>&#x5F53;&#x6EDA;&#x52A8;&#x5230;&#x67D0;&#x4E2A;&#x6807;&#x9898;&#x65F6;&#xFF0C;&#x76EE;&#x5F55;&#x7684;&#x5BF9;&#x5E94;&#x94FE;&#x63A5;&#x8981;&#x88AB;&#x9AD8;&#x4EAE;&#x3002;</p></li></ol><p>&#x8DDF;&#x968F;&#x9875;&#x9762;&#x6EDA;&#x52A8;&#x8FD9;&#x4E2A;&#x6BD4;&#x8F83;&#x597D;&#x505A;&#xFF0C;&#x4FDD;&#x6301;<code>position: fixed</code>&#x7136;&#x540E;&#x8BBE;&#x7F6E;&#x597D;<code>left</code>/<code>right</code>, <code>top</code>/<code>bottom</code>&#x5C31;&#x597D;&#x3002;&#x4F46;&#x662F;&#x4ECD;&#x7136;&#x4F1A;&#x6709;&#x4E9B;&#x8BB8;&#x95EE;&#x9898;&#xFF0C;&#x6BD4;&#x5982;&#x6EDA;&#x52A8;&#x5230;&#x6587;&#x7AE0;&#x5E95;&#x90E8;&#x65F6;&#x76EE;&#x5F55;&#x8FD8;&#x80FD;&#x7EE7;&#x7EED;&#x5411;&#x4E0B;&#x8DDF;&#x968F;&#x79FB;&#x52A8;&#xFF0C;&#x800C;&#x4E14;<code>top</code>&#x65E0;&#x6CD5;&#x81EA;&#x9002;&#x5E94;&#x53D8;&#x5316;(&#x5728;&#x672C;&#x4E3B;&#x9898;&#x4E2D;&#xFF0C;&#x5BFC;&#x822A;&#x680F;&#x9AD8;55px, &#x76EE;&#x5F55;&#x5E0C;&#x671B;&#x8DDD;&#x79BB;&#x9876;&#x90E8;35px&#x56E0;&#x6B64;<code>top</code>&#x7684;&#x521D;&#x503C;&#x662F;90px. &#x800C;90px&#x7684;<code>top</code>&#x6EDA;&#x52A8;&#x5230;&#x6587;&#x7AE0;&#x533A;&#x65F6;&#x65E0;&#x7591;&#x592A;&#x5927;&#x4E86;)&#x3002;&#x50CF;&#x8FD9;&#x6837;&#x52A8;&#x6001;&#x8BBE;&#x7F6E;&#x4F4D;&#x7F6E;&#xFF0C;&#x53EA;&#x80FD;&#x4F9D;&#x8D56;&#x811A;&#x672C;&#x3002;</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line">    <span class="keyword">var</span> toc = $(<span class="string">&quot;#toc&quot;</span>), post = $(<span class="string">&quot;.post-body&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> post_height = post.position().top + post.outerHeight(),</span><br><span class="line">        toc_height = toc.height(),</span><br><span class="line">        pos_max = post_height - toc_height;</span><br><span class="line">    $(<span class="built_in">window</span>).scroll(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line">        <span class="keyword">var</span> scroll_top = $(<span class="built_in">window</span>).scrollTop();</span><br><span class="line">        toc.css(<span class="string">&quot;top&quot;</span>, scroll_top&lt;<span class="number">55</span>? <span class="number">90</span>-scroll_top: (pos_max&gt;scroll_top? <span class="number">35</span>: pos_max-scroll_top));</span><br><span class="line">    });</span><br><span class="line">});</span><br></pre></td></tr></table></figure><p>&#x5176;&#x4E2D;&#xFF0C;<code>post-body</code>&#x662F;&#x5305;&#x88F9;&#x6587;&#x7AE0;&#x7684;<code>div</code>, <code>post_height</code>&#x5C31;&#x662F;&#x6587;&#x7AE0;&#x533A;&#x57DF;&#x5E95;&#x90E8;&#x7684;&#x4F4D;&#x7F6E;&#x3002;&#x4F7F;&#x7528;&#x8FD9;&#x6BB5;&#x811A;&#x672C;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x89E3;&#x51B3;&#x95EE;&#x9898;1&#x4E86;&#x3002;</p><p>&#x95EE;&#x9898;2&#x7684;&#x89E3;&#x51B3;&#x5C31;&#x6BD4;&#x8F83;&#x9EBB;&#x70E6;&#x4E86;&#xFF0C;&#x597D;&#x5728;&#x6709;&#x522B;&#x7684;&#x63D2;&#x4EF6;&#x53EF;&#x7528;&#x3002;&#x7ECF;&#x8FC7;&#x6211;&#x4E00;&#x756A;&#x641C;&#x5BFB;&#xFF0C;&#x5B9E;&#x73B0;&#x4E86;&#x7C7B;&#x4F3C;&#x4E8E;Bootstrap&#x91CC;<code>scrollspy()</code>&#x7C7B;&#x4F3C;&#x529F;&#x80FD;&#x7684;&#x8F6E;&#x5B50;&#x4E0D;&#x5C11;&#xFF0C;&#x4F46;&#x662F;&#x6CA1;&#x51E0;&#x4E2A;&#x80FD;&#x7528;&#x7684;&#xFF08;&#x4E5F;&#x8BB8;&#x662F;&#x6211;&#x4E0D;&#x4F1A;&#x7528;&#xFF1F;&#xFF09;&#x3002;&#x5728;Github&#x4E0A;&#x9762;&#x7684;&#x90A3;&#x51E0;&#x4E2A;&#xFF08;<a href="https://github.com/r3plica/Scrollspy" target="_blank" rel="noopener">r3plica/Scrollspy</a>, <a href="https://github.com/thesmart/jquery-scrollspy" target="_blank" rel="noopener">thesmart/jquery-scrollspy</a>, <a href="https://github.com/softwarespot/jquery-scrollspy" target="_blank" rel="noopener">softwarespot/jquery-scrollspy</a>, <a href="https://github.com/sxalexander/jquery-scrollspy" target="_blank" rel="noopener">sxalexander/jquery-scrollspy</a>&#xFF09;&#x90FD;&#x6CA1;&#x6709;&#x8D77;&#x6548;&#xFF1B;&#x800C;<a href="https://github.com/jgallen23/toc" target="_blank" rel="noopener">jgallen23/toc</a>&#x867D;&#x7136;&#x6709;&#x70B9;&#x5C0F;bug&#x4F46;&#x4E5F;&#x80FD;&#x7528;&#xFF0C;&#x4E0D;&#x8FC7;&#x6700;&#x5927;&#x7684;&#x95EE;&#x9898;&#x662F;&#xFF0C;&#x5B83;&#x7684;&#x76EE;&#x5F55;&#x662F;&#x9644;&#x9001;&#x7684;&#x4EE3;&#x7801;&#x52A8;&#x6001;&#x751F;&#x6210;&#x7684;&#xFF0C;&#x5404;&#x4E2A;HTML&#x7684;class&#x90FD;&#x548C;&#x6211;&#x73B0;&#x5728;&#x7684;&#x76EE;&#x5F55;&#x6837;&#x5F0F;&#x7684;class&#x4E0D;&#x4E00;&#x6837;&#xFF0C;&#x6211;&#x8981;&#x662F;&#x914D;&#x5408;&#x5B83;&#x8FD8;&#x5F97;&#x6539;css. &#x51FA;&#x4E8E;&#x4E00;&#x79CD;&#x61D2;&#x4EBA;&#x7684;&#x5FC3;&#x6001;&#xFF0C;&#x6211;&#x6CA1;&#x6709;&#x53BB;&#x7528;&#x5B83;&#x3002;</p><p><del>&#x6700;&#x7EC8;&#xFF0C;&#x6211;&#x8FD8;&#x662F;&#x5C48;&#x670D;&#x4E8E;Bootstrap&#x7684;&#x6DEB;&#x5A01;&#x4E4B;&#x4E0B;&#x3002;&#x5728;&#x4EE3;&#x7801;&#x91CC;&#x63D2;&#x5165;Bootstrap&#x7684;<a href="http://getbootstrap.com/javascript/#scrollspy" target="_blank" rel="noopener">scrollspy.js</a>, &#x7136;&#x540E;&#x5199;&#x8FD9;&#x4E48;&#x4E00;&#x6BB5;&#x811A;&#x672C;&#xFF1A;</del>&#x8BE5;&#x81EA;&#x5DF1;&#x9020;&#x8F6E;&#x5B50;&#x4E86;&#xFF0C;pong&#x53CB;&#xFF01;&#x4E0B;&#x9762;&#x662F;&#x6211;&#x81EA;&#x5DF1;&#x505A;&#x7684;&#x7B80;&#x5355;scrollspy&#xFF0C;&#x4E0D;&#x8003;&#x8651;&#x6027;&#x80FD;&#xFF0C;&#x4E0D;&#x8003;&#x8651;&#x53EF;&#x6269;&#x5C55;&#xFF0C;&#x7B80;&#x5355;&#x7C97;&#x66B4;&#xFF1A;</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">scrollSpy</span>(<span class="params">menuSelector, options</span>) </span>{</span><br><span class="line">    <span class="keyword">var</span> menu = $(menuSelector);</span><br><span class="line">    <span class="keyword">if</span>(!visible(menu))</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    options = options || {};</span><br><span class="line">    <span class="keyword">var</span> offset = options.offset || <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> activeClassName = options.activeClassName || <span class="string">&quot;active&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> scollTarget = menu.find(<span class="string">&quot;a&quot;</span>).map(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">            <span class="keyword">var</span> item = $($(<span class="keyword">this</span>).attr(<span class="string">&quot;href&quot;</span>));</span><br><span class="line">            <span class="keyword">if</span> (item.length)</span><br><span class="line">                <span class="keyword">return</span> item[<span class="number">0</span>]; <span class="comment">// avoid becoming 2-dim jquery array</span></span><br><span class="line">        }), lastId = <span class="literal">null</span>, active = $();</span><br><span class="line"></span><br><span class="line">    $(<span class="built_in">window</span>).scroll(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">        <span class="comment">// Get container scroll position</span></span><br><span class="line">        <span class="keyword">var</span> fromTop = $(<span class="keyword">this</span>).scrollTop() + offset;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Get id of current scroll item</span></span><br><span class="line">        <span class="keyword">var</span> id = scollTarget.filter(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">            <span class="keyword">return</span> $(<span class="keyword">this</span>).offset().top &lt; fromTop;</span><br><span class="line">        }).last().attr(<span class="string">&quot;id&quot;</span>) || <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (lastId !== id) {</span><br><span class="line">            active.removeClass(activeClassName);</span><br><span class="line">            <span class="keyword">var</span> newActive = [];</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">var</span> target = menu.find(<span class="string">&quot;[href=&apos;#&quot;</span> + id + <span class="string">&quot;&apos;]&quot;</span>);</span><br><span class="line">                target.length &amp;&amp; !target.is(menu);</span><br><span class="line">                target = target.parent()) {</span><br><span class="line">                <span class="keyword">if</span>(target.is(<span class="string">&quot;li&quot;</span>))</span><br><span class="line">                    newActive.push(target[<span class="number">0</span>]);</span><br><span class="line">            }</span><br><span class="line">            active = $(newActive).addClass(activeClassName).trigger(<span class="string">&quot;scrollspy&quot;</span>);</span><br><span class="line">            lastId = id;</span><br><span class="line">        }</span><br><span class="line">    });</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x8FD9;&#x4E2A;scrollspy&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x81EA;&#x5B9A;&#x4E49;jQuery&#x4E8B;&#x4EF6;<code>scrollspy</code>&#xFF0C;&#x9700;&#x8981;&#x4F20;&#x5165;&#x7684;&#x662F;&#x4F60;&#x7684;&#x83DC;&#x5355;&#x7684;&#x9009;&#x62E9;&#x5668;&#xFF0C;&#x4E00;&#x4E2A;<code>&lt;ol&gt;</code>&#x6216;&#x8005;<code>&lt;ul&gt;</code>&#x3002;&#x6709;&#x4E86;scrollspy&#x5C31;&#x80FD;&#x5F00;&#x59CB;&#x641E;&#x4E8B;&#x4E86;&#xFF1A;</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line">    <span class="keyword">var</span> tocContainer = $(<span class="string">&quot;#toc&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> toc = tocContainer.children(), tocHeight = toc.height();</span><br><span class="line">    scrollSpy(tocContainer, {<span class="attr">offset</span>: <span class="number">200</span>});</span><br><span class="line"></span><br><span class="line">    $(<span class="string">&quot;.toc-item&quot;</span>).on(<span class="string">&quot;scrollspy&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">        <span class="keyword">var</span> tocTop = toc.scrollTop(),</span><br><span class="line">            link = $(<span class="keyword">this</span>).children(<span class="string">&quot;.toc-link&quot;</span>),</span><br><span class="line">            thisTop = link.position().top;</span><br><span class="line">        <span class="comment">// make sure the highlighted element contains no child</span></span><br><span class="line">        <span class="keyword">if</span>($(<span class="keyword">this</span>).height() != link.height())</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        <span class="comment">// if the highlighted element is above current view of toc</span></span><br><span class="line">        <span class="keyword">if</span>(thisTop &lt;= <span class="number">0</span>)</span><br><span class="line">            toc.scrollTop(tocTop + thisTop);</span><br><span class="line">        <span class="comment">// else if below current view of toc</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(tocHeight &lt;= thisTop)</span><br><span class="line">            toc.scrollTop(tocTop + thisTop + link.outerHeight() - tocHeight);</span><br><span class="line">    });</span><br><span class="line">});</span><br></pre></td></tr></table></figure><p><del>&#x6DFB;&#x52A0;<code>nav</code>&#x8FD9;&#x4E2A;class, &#x662F;&#x56E0;&#x4E3A;&#x76EE;&#x524D;&#x7684;Bootstrap&#x4F7F;&#x7528;<code>scrollspy()</code>&#x7684;&#x65F6;&#x5019;&#x8981;&#x6C42;&#x76EE;&#x6807;&#x6709;<code>nav</code>&#x8FD9;&#x4E2A;class, &#x5728;&#x5F00;&#x53D1;&#x4E2D;&#x7684;v4&#x7248;Bootstrap&#x5C31;&#x6CA1;&#x6709;&#x8FD9;&#x4E2A;&#x8981;&#x6C42;&#x4E86;&#x3002;</del>&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x4E4B;&#x540E;&#xFF0C;&#x6EDA;&#x52A8;&#x5230;&#x5BF9;&#x5E94;&#x6807;&#x9898;&#xFF0C;&#x76EE;&#x5F55;&#x91CC;&#x7684;&#x94FE;&#x63A5;&#x4EE5;&#x53CA;&#x5B83;&#x7684;&#x4E0A;&#x7EA7;&#x6807;&#x9898;&#x7684;&#x94FE;&#x63A5;&#x4F1A;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;<code>active</code>&#x7684;class, &#x9000;&#x51FA;&#x8FD9;&#x6BB5;&#x533A;&#x57DF;&#x65F6;&#x5220;&#x9664;class. &#x53EF;&#x4EE5;&#x636E;&#x6B64;&#x8BBE;&#x7F6E;&#x9AD8;&#x4EAE;&#x3002;</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#toc</span> {</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">5%</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">20%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">90%</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">90px</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="selector-tag">i</span> <span class="keyword">in</span> (<span class="number">1</span>..<span class="number">6</span>) {</span><br><span class="line">    .toc-level-{i} <span class="selector-class">.toc-text</span> {<span class="attribute">margin-left</span>: i em;}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.toc-text</span> {<span class="attribute">white-space</span>: nowrap;}</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.toc-link</span> {</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#999</span>;</span><br><span class="line">    <span class="attribute">display</span>: inline-block; <span class="comment">// stretch to parent height</span></span><br><span class="line">    <span class="attribute">border-left</span>: <span class="number">1px</span> solid transparent; <span class="comment">// avoid &quot;jumping&quot; on hover</span></span><br><span class="line">    &amp;:hover {<span class="attribute">text-decoration</span>: none;}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.toc</span> {</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1.8em</span>;</span><br><span class="line">    <span class="attribute">overflow-y</span>: auto;</span><br><span class="line">    <span class="attribute">overflow-x</span>: hidden;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.toc-child</span> {</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.toc-item</span> {</span><br><span class="line">    <span class="attribute">list-style-type</span>: none;</span><br><span class="line">    &amp;:hover &gt; <span class="selector-class">.toc-link</span> {<span class="attribute">border-left</span>: <span class="number">1px</span> solid <span class="variable">$color</span>-theme;}</span><br><span class="line">    &amp;<span class="selector-class">.active</span> {</span><br><span class="line">        &gt; <span class="selector-class">.toc-link</span> {</span><br><span class="line">            <span class="attribute">color</span>: <span class="variable">$color</span>-theme;</span><br><span class="line">            <span class="attribute">border-left</span>: <span class="number">2px</span> solid <span class="variable">$color</span>-theme;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span>(hexo-config(<span class="string">&apos;toc.collapse&apos;</span>)) { <span class="selector-class">.toc-child</span> {<span class="attribute">display</span>: block;} }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x6211;&#x662F;&#x4EFF;&#x7167;Bootstrap&#x5B98;&#x7F51;&#x7684;&#x76EE;&#x5F55;&#x505A;&#x7684;&#x6837;&#x5F0F;&#x3002;&#x8981;&#x6CE8;&#x610F;&#x5C42;&#x7EA7;&#x7F29;&#x8FDB;&#x7684;&#x65F6;&#x5019;&#x8981;&#x4F7F;&#x7528;<code>margin-left</code>, &#x5982;&#x679C;&#x4F7F;&#x7528;<code>padding-left</code>&#x90A3;&#x4E48;&#x88AB;&#x9AD8;&#x4EAE;&#x65F6;&#x5DE6;&#x8FB9;&#x8FB9;&#x6846;&#x65E0;&#x6CD5;&#x5BF9;&#x9F50;&#x3002;<code>$color-theme</code>&#x586B;&#x4E00;&#x4E2A;&#x4F60;&#x559C;&#x6B22;&#x7684;&#x989C;&#x8272;&#x5373;&#x53EF;&#x3002;</p><p>&#x5982;&#x679C;&#x8FD8;&#x60F3;&#x548C;Bootstrap&#x7684;&#x66F4;&#x50CF;&#xFF0C;&#x53EA;&#x663E;&#x793A;&#x5F53;&#x524D;&#x89C6;&#x56FE;&#x8303;&#x56F4;&#x5185;&#x7684;&#x523A;&#x6FC0;&#x6807;&#x9898;&#xFF0C;&#x5176;&#x4F59;&#x7684;&#x6536;&#x62E2;&#x5728;&#x6700;&#x9AD8;&#x7EA7;&#x6807;&#x9898;&#x91CC;&#xFF0C;&#x90A3;&#x4E48;&#x518D;&#x52A0;&#x4E0A;&#x8FD9;&#x6BB5;css&#xFF1A;</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.toc-child</span> { <span class="attribute">display</span>: none; }</span><br><span class="line"><span class="selector-class">.toc-item</span><span class="selector-class">.active</span> <span class="selector-class">.toc-child</span> { <span class="attribute">display</span>: block; }</span><br></pre></td></tr></table></figure><p>&#x5927;&#x529F;&#x544A;&#x6210;&#x3002;</p><h3 id="&#x811A;&#x6CE8;&#x6837;&#x5F0F;">&#x811A;&#x6CE8;&#x6837;&#x5F0F;</h3><p>&#x7531;&#x4E8E;&#x9ED8;&#x8BA4;&#x6E32;&#x67D3;&#x5668;<code>hexo-renderer-marked</code>&#x4E0D;&#x652F;&#x6301;footnote&#x8BED;&#x6CD5;&#xFF0C;&#x6240;&#x4EE5;&#x4E3A;&#x4E86;&#x4F7F;&#x7528;&#x811A;&#x6CE8;&#xFF0C;&#x5FC5;&#x987B;&#x5C06;markdown&#x6E32;&#x67D3;&#x5668;&#x6362;&#x5230;<code>hexo-renderer-markdown-it</code>, &#x5E76;&#x5F00;&#x542F;<code>markdown-it</code>&#x63D2;&#x4EF6;&#x3002;</p><p>&#x5176;&#x4F7F;&#x7528;&#x65B9;&#x5F0F;&#x5C31;&#x662F;</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Test [^1]</span><br><span class="line">[<span class="symbol">^1</span>]: <span class="link">Footnote</span></span><br></pre></td></tr></table></figure><p>&#x751F;&#x6210;&#x5BF9;&#x5E94;&#x7684;html&#x6587;&#x6863;&#x662F;</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Test</span><br><span class="line">    <span class="tag">&lt;<span class="name">sup</span> <span class="attr">class</span>=<span class="string">&quot;footnote-ref&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#fn1&quot;</span> <span class="attr">id</span>=<span class="string">&quot;fnref1&quot;</span>&gt;</span>[1]<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">sup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span> <span class="attr">class</span>=<span class="string">&quot;footnotes-sep&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;footnotes&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ol</span> <span class="attr">class</span>=<span class="string">&quot;footnotes-list&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">&quot;fn1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;footnote-item&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>Footnote <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#fnref1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;footnote-backref&quot;</span>&gt;</span>&#x21A9;<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure><p>&#x7136;&#x800C;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#xFF0C;&#x8981;&#x770B;&#x811A;&#x6CE8;&#x5C31;&#x8981;&#x8DF3;&#x6765;&#x8DF3;&#x53BB;&#x5730;&#x770B;&#xFF0C;&#x6BD4;&#x8F83;&#x5F71;&#x54CD;&#x6B63;&#x5E38;&#x7684;&#x9605;&#x8BFB;&#x3002;&#x5728;&#x6211;&#x5728;&#x7F51;&#x4E0A;&#x82E6;&#x82E6;&#x5BFB;&#x6C42;&#x4E86;&#x4E00;&#x9635;&#x4E4B;&#x540E;&#xFF0C;&#x6211;&#x770B;&#x5230;&#x4E86;&#x4E00;&#x4E2A;<a href="http://tympanus.net/codrops/2014/10/07/tooltip-styles-inspiration/" target="_blank" rel="noopener">&#x5F88;&#x9177;&#x70AB;&#x7684;tooltip&#x6837;&#x5F0F;</a>&#xFF08;&#x4F60;&#x4EEC;&#x53EF;&#x4EE5;&#x4E0A;<a href="http://tympanus.net/Development/TooltipStylesInspiration/" target="_blank" rel="noopener">Demo</a>&#x6765;&#x611F;&#x53D7;&#x4E00;&#x4E0B;&#xFF09;&#xFF0C;&#x56E0;&#x6B64;&#x6211;&#x51B3;&#x5B9A;&#x628A;&#x811A;&#x6CE8;&#x6539;&#x6210;&#x8FD9;&#x4E2A;&#x6837;&#x5B50;&#x7684;&#x3002;</p><p>&#x65E2;&#x7136;&#x90FD;&#x662F;&#x8FD9;&#x79CD;&#x6837;&#x5F0F;&#x7684;&#x4E86;&#x90A3;&#x540E;&#x9762;&#x7684;&#x811A;&#x6CE8;&#x5185;&#x5BB9;&#xFF08;&#x5206;&#x5272;&#x7EBF;<code>footnotes-sep</code>&#x548C;&#x811A;&#x6CE8;&#x5185;&#x5BB9;<code>footnotes</code>&#xFF09;&#x90FD;&#x4E0D;&#x9700;&#x8981;&#x4E86;&#x3002;&#x9996;&#x5148;&#x4E0A;&#x6837;&#x5F0F;&#x8868;&#xFF1A;</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.footnotes-sep</span>, <span class="selector-class">.footnotes</span> {<span class="attribute">display</span>: none;}</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Style from https://github.com/codrops/TooltipStylesInspiration */</span></span><br><span class="line"><span class="selector-class">.footnote-ref</span> {</span><br><span class="line">    <span class="attribute">vertical-align</span>: super;</span><br><span class="line">    <span class="attribute">font-size</span>: smaller;</span><br><span class="line">    <span class="attribute">display</span>: inline;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    &amp;<span class="selector-class">.active</span> {</span><br><span class="line">        <span class="selector-tag">a</span>:after { <span class="attribute">pointer-events</span>: auto;}</span><br><span class="line">        <span class="selector-class">.fn-content</span> {</span><br><span class="line">            <span class="attribute">pointer-events</span>: auto;</span><br><span class="line">            <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">            -webkit-<span class="attribute">transform</span>: translate3d(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>) rotate3d(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">            <span class="attribute">transform</span>: translate3d(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>) rotate3d(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    &gt; <span class="selector-tag">a</span> {</span><br><span class="line">        <span class="attribute">cursor</span>: pointer;</span><br><span class="line">        <span class="attribute">display</span>: inline-block;</span><br><span class="line">        <span class="attribute">font-weight</span>: <span class="number">700</span>;</span><br><span class="line">        &amp;:after {</span><br><span class="line">            <span class="attribute">content</span>: <span class="string">&apos;&apos;</span>;</span><br><span class="line">            <span class="attribute">position</span>: absolute;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">360px</span>;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">20px</span>;</span><br><span class="line">            <span class="attribute">bottom</span>: <span class="number">100%</span>;</span><br><span class="line">            <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">            <span class="attribute">pointer-events</span>: none;</span><br><span class="line">            -webkit-<span class="attribute">transform</span>: translateX(-<span class="number">50%</span>);</span><br><span class="line">            <span class="attribute">transform</span>: translateX(-<span class="number">50%</span>);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.fn-content</span> {</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">14</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1.4</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: -<span class="number">5px</span> -<span class="number">5px</span> <span class="number">15px</span> rgba(<span class="number">48</span>,<span class="number">54</span>,<span class="number">61</span>,<span class="number">0.2</span>);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">0.5em</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#2a3035</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">pointer-events</span>: none;</span><br><span class="line">    -webkit-<span class="attribute">transform</span>: translate3d(<span class="number">0</span>,-<span class="number">10px</span>,<span class="number">0</span>);</span><br><span class="line">    <span class="attribute">transform</span>: translate3d(<span class="number">0</span>,-<span class="number">10px</span>,<span class="number">0</span>);</span><br><span class="line">    -webkit-<span class="attribute">transition</span>: opacity <span class="number">0.3s</span>, -webkit-transform <span class="number">0.3s</span>;</span><br><span class="line">    <span class="attribute">transition</span>: opacity <span class="number">0.3s</span>, transform <span class="number">0.3s</span>;</span><br><span class="line">    <span class="comment">/* Arrow */</span></span><br><span class="line">    &amp;:after {</span><br><span class="line">        <span class="attribute">content</span>: <span class="string">&apos;&apos;</span>;</span><br><span class="line">        <span class="attribute">top</span>: <span class="number">100%</span>;</span><br><span class="line">        <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">        <span class="attribute">border</span>: solid transparent;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">position</span>: absolute;</span><br><span class="line">        <span class="attribute">pointer-events</span>: none;</span><br><span class="line">        <span class="attribute">border-color</span>: transparent;</span><br><span class="line">        <span class="attribute">border-top-color</span>: <span class="number">#2a3035</span>;</span><br><span class="line">        <span class="attribute">border-width</span>: <span class="number">10px</span>;</span><br><span class="line">        <span class="attribute">margin-left</span>: -<span class="number">10px</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="selector-class">.fn-text</span> {</span><br><span class="line">        <span class="attribute">line-height</span>: <span class="number">1.35</span>;</span><br><span class="line">        <span class="attribute">display</span>: inline-block;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">1.31em</span> <span class="number">1.21em</span> <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">14.5px</span>;</span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">        <span class="attribute">z-index</span>: <span class="number">8</span>;</span><br><span class="line">        <span class="selector-tag">a</span> {<span class="attribute">font-weight</span>: bold;}</span><br><span class="line">        <span class="comment">/* p {margin-bottom: 0;}*/</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x9996;&#x5148;&#x6211;&#x4EEC;&#x5F97;&#x751F;&#x6210;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x7684;html, &#x6539;markdown&#x6E32;&#x67D3;&#x5668;&#x4EE3;&#x7801;&#x867D;&#x7136;&#x4E00;&#x52B3;&#x6C38;&#x9038;&#xFF0C;&#x4F46;&#x592A;&#x9EBB;&#x70E6;&#x4E86;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;jQuery&#x6765;&#x751F;&#x6210;tooltip&#x7684;&#x4EE3;&#x7801;&#xFF1A;</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line">    $(<span class="string">&quot;.footnote-ref&quot;</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line">        <span class="keyword">var</span> id = $(<span class="keyword">this</span>).children(<span class="string">&quot;a&quot;</span>).attr(<span class="string">&quot;href&quot;</span>).substr(<span class="number">1</span>),</span><br><span class="line">            footnote = $(<span class="built_in">document</span>.getElementById(id)),</span><br><span class="line">            outer_wrapper = $(<span class="string">&quot;&lt;span&gt;&quot;</span>,{<span class="string">&quot;class&quot;</span>:<span class="string">&quot;fn-content&quot;</span>}),</span><br><span class="line">            inner_wrapper = $(<span class="string">&quot;&lt;span&gt;&quot;</span>,{<span class="string">&quot;class&quot;</span>:<span class="string">&quot;fn-text&quot;</span>});</span><br><span class="line">        footnote.find(<span class="string">&quot;.footnote-backref&quot;</span>).remove();</span><br><span class="line">        $(<span class="keyword">this</span>).append(outer_wrapper.append(inner_wrapper.html(footnote.html())));</span><br><span class="line">    });</span><br><span class="line">});</span><br></pre></td></tr></table></figure><p><code>footnote-backref</code>&#x662F;&#x811A;&#x6CE8;&#x90E8;&#x5206;&#x8FD4;&#x56DE;&#x7684;&#x5C0F;&#x56FE;&#x6807;&#xFF0C;&#x653E;&#x5728;&#x811A;&#x6CE8;tooltip&#x91CC;&#x7EDD;&#x5BF9;&#x4E0D;&#x597D;&#x770B;&#xFF0C;&#x4E5F;&#x4E0D;&#x5408;&#x7406;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x6211;&#x9009;&#x62E9;&#x5E72;&#x6389;&#x5B83;&#x3002;</p><p>&#x5176;&#x5B9E;&#x4E0A;&#x9762;&#x7684;&#x6837;&#x5F0F;&#x548C;&#x539F;&#x6765;&#x7684;&#x76F8;&#x6BD4;&#xFF0C;&#x5DEE;&#x4E86;<code>width</code>&#x548C;<code>margin-left</code>&#x4E24;&#x4E2A;&#xFF0C;&#x8FD9;&#x4E24;&#x4E2A;&#x6211;&#x51C6;&#x5907;&#x7528;js&#x6765;&#x52A8;&#x6001;&#x8C03;&#x6574;&#x3002;&#x7531;&#x4E8E;&#x811A;&#x6CE8;&#x6587;&#x5B57;&#x6709;&#x591A;&#x6709;&#x5C11;&#xFF0C;&#x76F4;&#x63A5;&#x7EDF;&#x4E00;&#x4E00;&#x4E2A;&#x5F88;&#x5927;&#x7684;<code>width</code>&#x5BF9;&#x4E8E;&#x6587;&#x5B57;&#x5C11;&#x7684;&#x6765;&#x8BF4;&#x6709;&#x4E00;&#x5927;&#x7247;&#x7A7A;&#x767D;&#xFF0C;&#x76F8;&#x5F53;&#x4E0D;&#x597D;&#x770B;&#xFF0C;&#x800C;&#x4E14;&#x5728;&#x624B;&#x673A;&#x4E0A;&#x4F1A;&#x6EA2;&#x51FA;&#x5C4F;&#x5E55;&#x3002;&#x800C;<code>margin-left</code>&#x5E94;&#x8BE5;&#x4E3A;<code>width</code>&#x4E00;&#x534A;&#x7684;&#x8D1F;&#x503C;&#xFF0C;&#x6765;&#x4FDD;&#x8BC1;tooltip&#x5904;&#x4E8E;&#x811A;&#x6CE8;&#x94FE;&#x63A5;&#x7684;&#x6B63;&#x4E0A;&#x65B9;&#x3002;&#x5982;&#x679C;&#x6539;&#x4E86;<code>width</code>&#x7684;&#x8BDD;&#xFF0C;<code>margin-left</code>&#x4E5F;&#x8981;&#x8DDF;&#x7740;&#x6539;&#x53D8;&#x3002;</p><p>&#x5176;&#x5B9E;&#x5BF9;&#x4E8E;&#x6587;&#x5B57;&#x5C11;&#x7684;&#x6765;&#x8BF4;&#xFF0C;&#x5916;&#x5C42;<code>span</code>&#x7684;<code>width</code>&#x4E0D;&#x4F1A;&#x53D8;&#xFF0C;&#x4F46;&#x5185;&#x5C42;<code>span</code>&#x7684;<code>width</code>&#x662F;&#x4F1A;&#x8DDF;&#x7740;&#x6587;&#x5B57;&#x91CF;&#x6539;&#x53D8;&#x7684;&#x3002;&#x636E;&#x6B64;&#x6211;&#x4EEC;&#x4E0D;&#x7528;&#x81EA;&#x5DF1;&#x8BA1;&#x7B97;<code>width</code>, &#x7B49;&#x6D4F;&#x89C8;&#x5668;&#x7ED8;&#x5236;&#x5B8C;&#x6BD5;&#x76F4;&#x63A5;&#x628A;&#x8FD9;&#x4E2A;&#x503C;&#x62FF;&#x6765;&#x7528;&#x5C31;&#x884C;&#x3002;</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line">    <span class="keyword">var</span> position = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line">        <span class="keyword">var</span> content = $(<span class="string">&quot;.fn-content&quot;</span>).removeAttr(<span class="string">&quot;style&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>($(<span class="built_in">window</span>).width() &lt; <span class="number">640</span>)</span><br><span class="line">            content.css(<span class="string">&quot;width&quot;</span>,$(<span class="built_in">window</span>).width()/<span class="number">2</span>);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            content.css(<span class="string">&quot;width&quot;</span>,<span class="number">340</span>); <span class="comment">// default value</span></span><br><span class="line">        content.each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line">            <span class="keyword">var</span> width = $(<span class="keyword">this</span>).children(<span class="string">&quot;.fn-text&quot;</span>).outerWidth();</span><br><span class="line">            $(<span class="keyword">this</span>).css({</span><br><span class="line">                <span class="string">&quot;width&quot;</span>: width,</span><br><span class="line">                <span class="string">&quot;margin-left&quot;</span>: width/<span class="number">-2</span></span><br><span class="line">            });</span><br><span class="line">        });</span><br><span class="line">    }</span><br><span class="line">    position();</span><br><span class="line">    $(<span class="built_in">window</span>).resize(position());</span><br><span class="line">});</span><br></pre></td></tr></table></figure><p>&#x56E0;&#x4E3A;&#x8981;&#x6839;&#x636E;&#x5C4F;&#x5E55;&#x5927;&#x5C0F;&#x786E;&#x5B9A;<code>width</code>&#x521D;&#x59CB;&#x503C;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x4E0D;&#x5149;&#x5728;<code>document</code>&#x52A0;&#x8F7D;&#x5B8C;&#x6BD5;&#x540E;&#x8981;&#x6267;&#x884C;&#xFF0C;<code>window</code>&#x6539;&#x53D8;&#x5927;&#x5C0F;&#x7684;&#x65F6;&#x5019;&#x4E5F;&#x8981;&#x8DDF;&#x7740;&#x6267;&#x884C;&#x3002;</p><p>&#x89E3;&#x51B3;&#x5B8C;&#x4E86;&#x6837;&#x5F0F;&#x7684;&#x4E8B;&#x60C5;&#x6211;&#x4EEC;&#x518D;&#x6765;&#x89E3;&#x51B3;&#x663E;&#x793A;&#x7684;&#x4E8B;&#x60C5;&#x3002;&#x6211;&#x5E0C;&#x671B;&#x7684;&#x662F;&#x70B9;&#x51FB;&#x811A;&#x6CE8;&#x94FE;&#x63A5;&#x5B83;&#x8981;&#x663E;&#x793A;&#xFF0C;&#x518D;&#x6B21;&#x70B9;&#x51FB;&#x65F6;&#x6D88;&#x5931;&#xFF0C;&#x70B9;&#x51FB;&#x522B;&#x5904;&#x4E5F;&#x8981;&#x6D88;&#x5931;&#xFF08;&#x5305;&#x62EC;&#x70B9;&#x51FB;&#x5176;&#x4ED6;&#x7684;&#x811A;&#x6CE8;&#x94FE;&#x63A5;&#xFF09;&#x3002;&#x56E0;&#x6B64;&#x4E0D;&#x80FD;&#x7528;<code>$(&quot;.footnote-ref&quot;).click()</code>&#x6765;&#x5B9E;&#x73B0;&#xFF0C;&#x800C;&#x8981;&#x901A;&#x8FC7;&#x6574;&#x4E2A;<code>document</code>&#x7684;&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#x6765;&#x5B9E;&#x73B0;&#x3002;&#x8FD9;&#x4E2A;&#x70B9;&#x51FB;&#x7684;&#x5224;&#x65AD;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x6458;&#x6284;<a href="https://stackoverflow.com/a/2364639" target="_blank" rel="noopener">Stack Overflow</a>:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line">    $(<span class="built_in">document</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params">t</span>)</span>{</span><br><span class="line">        <span class="keyword">var</span> target = $(<span class="string">&quot;.fn-content&quot;</span>),</span><br><span class="line">            clicked = $(t.target);</span><br><span class="line">        <span class="keyword">if</span>(target.is(clicked) || target.has(clicked).length != <span class="number">0</span>)</span><br><span class="line">            t.stopPropagation();</span><br><span class="line">        <span class="keyword">else</span> {</span><br><span class="line">            <span class="keyword">var</span> parent = clicked.parents(<span class="string">&quot;.footnote-ref&quot;</span>),</span><br><span class="line">                active = $(<span class="string">&quot;.footnote-ref.active&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span>(!active.is(parent))</span><br><span class="line">                active.removeClass(<span class="string">&quot;active&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span>(!parent.length){</span><br><span class="line">                parent.hasClass(active)?parent.removeClass(<span class="string">&quot;active&quot;</span>):parent.addClass(<span class="string">&quot;active&quot;</span>);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    });</span><br><span class="line">});</span><br></pre></td></tr></table></figure><p>&#x5C06;&#x4EE5;&#x4E0A;&#x51E0;&#x6BB5;js&#x5408;&#x4F53;&#xFF08;&#x5047;&#x8BBE;&#x4F60;&#x653E;&#x5230;&#x7684;&#x662F;<code>js/footnote.js</code>&#xFF09;&#xFF0C;&#x63D2;&#x5165;&#x5230;&#x6709;&#x811A;&#x6CE8;&#x7684;&#x9875;&#x9762;&#x5373;&#x53EF;&#x3002;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x7B80;&#x5355;&#x7684;Hexo&#x63D2;&#x4EF6;&#x6765;&#x5B9E;&#x73B0;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x7B80;&#x5355;&#x7C97;&#x66B4;&#x5730;&#x5728;&#x6240;&#x6709;&#x9875;&#x9762;&#x90FD;&#x63D2;&#x5165;&#xFF1A;</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">hexo.extend.filter.register(<span class="string">&apos;after_post_render&apos;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(data.content.indexOf(<span class="string">&quot;#fn&quot;</span>) != <span class="number">-1</span>){</span><br><span class="line">        data.content += <span class="string">&quot;&lt;script src=\&quot;js/footnote.js\&quot; type=\&quot;text/javascript\&quot;&gt;&lt;/script&gt;&quot;</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">});</span><br></pre></td></tr></table></figure><p>&#x5176;&#x5B9E;&#x8FD8;&#x6709;&#x522B;&#x7684;&#x811A;&#x6CE8;tooltip&#x5316;&#x65B9;&#x6848;&#xFF0C;&#x6BD4;&#x5982;<a href="http://www.bigfootjs.com/" target="_blank" rel="noopener">bigfoot.js</a>&#x6216;&#x8005;&#x662F;<a href="http://syeong.jcsg.com/2012/07/07/footnote-tooltips/" target="_blank" rel="noopener">&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;</a>&#x4ECB;&#x7ECD;&#x7684;&#x65B9;&#x6848;&#xFF0C;&#x4F46;&#x662F;&#x524D;&#x8005;&#x4F53;&#x79EF;&#x592A;&#x5927;&#x3002;&#x540E;&#x8005;&#x6211;&#x770B;&#x7740;&#x611F;&#x89C9;&#x4E0D;&#x9519;&#x3002;</p><h3 id="&#x5728;js&#x63D2;&#x4EF6;&#x4E2D;&#x8BBF;&#x95EE;&#x8BBE;&#x7F6E;">&#x5728;js&#x63D2;&#x4EF6;&#x4E2D;&#x8BBF;&#x95EE;&#x8BBE;&#x7F6E;</h3><p>&#x4F7F;&#x7528;<code>hexo.config</code>&#x6765;&#x8BBF;&#x95EE;&#x7AD9;&#x70B9;&#x8BBE;&#x7F6E;&#xFF0C;<code>hexo.theme.config</code>&#x6765;&#x8BBF;&#x95EE;&#x4E3B;&#x9898;&#x8BBE;&#x7F6E;&#x3002;</p><h3 id="&#x6839;&#x636E;&#x8BBE;&#x7F6E;&#x751F;&#x6210;css">&#x6839;&#x636E;&#x8BBE;&#x7F6E;&#x751F;&#x6210;CSS</h3><p>&#x5728;Stylus&#x91CC;&#x4F7F;&#x7528;<code>hexo-config(entry)</code>&#x80FD;&#x83B7;&#x53D6;<strong>&#x4E3B;&#x9898;&#x8BBE;&#x7F6E;</strong>&#x91CC;&#x7684;<code>entry</code>&#x6761;&#x76EE;&#x5185;&#x5BB9;&#x3002;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x529F;&#x80FD;&#x6839;&#x636E;&#x8BBE;&#x7F6E;&#x751F;&#x6210;&#x4E0D;&#x540C;&#x7684;CSS, &#x800C;&#x4E0D;&#x7528;&#x9884;&#x5148;&#x7ED9;&#x4F60;&#x7684;<code>&lt;div&gt;</code>&#x8BBE;&#x7F6E;&#x4E0A;&#x597D;&#x51E0;&#x4E2A;<code>class</code>&#x6765;&#x8C03;&#x6574;&#x5916;&#x89C2;&#x3002;</p><p><code>hexo-config</code>&#x7684;&#x5B9A;&#x4E49;&#x5728;<a href="https://github.com/hexojs/hexo-renderer-stylus/" target="_blank" rel="noopener"><code>hexo-renderer-stylus</code></a>&#x91CC;&#x5982;&#x4E0B;&#xFF1A;</p><figure class="highlight js"><figcaption><span>https://github.com/hexojs/hexo-renderer-stylus/blob/master/lib/renderer.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">defineConfig</span>(<span class="params">style</span>) </span>{</span><br><span class="line">  style.define(<span class="string">&apos;hexo-config&apos;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>{</span><br><span class="line">    <span class="keyword">return</span> getProperty(self.theme.config, data.val);</span><br><span class="line">  });</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h3 id="&#x81EA;&#x5B9A;&#x4E49;&#x9875;&#x9762;&#x751F;&#x6210;">&#x81EA;&#x5B9A;&#x4E49;&#x9875;&#x9762;&#x751F;&#x6210;</h3><p>&#x5C06;&#x4E0B;&#x9762;&#x7684;js&#x653E;&#x5230;&#x4E3B;&#x9898;&#x6587;&#x4EF6;&#x5939;&#x4E0B;&#x7684;<code>scripts</code>&#x6587;&#x4EF6;&#x5939;&#x91CC;&#xFF0C;&#x6587;&#x4EF6;&#x540D;&#x968F;&#x610F;&#x3002;</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"></span><br><span class="line">hexo.extend.generator.register(some_name,<span class="function"><span class="keyword">function</span>(<span class="params">locals</span>)</span>{</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">        path: page_path,</span><br><span class="line">        data: {},</span><br><span class="line">        layout: page_layout</span><br><span class="line">    };</span><br><span class="line">});</span><br></pre></td></tr></table></figure><p>&#x7EC6;&#x8282;&#x89E3;&#x91CA;&#x5982;&#x4E0B;&#xFF1A;</p><ul><li><code>some_name</code>&#x662F;&#x4E00;&#x4E2A;<code>String</code>, &#x539F;&#x5219;&#x4E0A;&#x8FD9;&#x4E2A;&#x540D;&#x5B57;&#x53EF;&#x4EE5;&#x968F;&#x4FBF;&#x586B;&#x3002;&#x4F46;&#x662F;Hexo&#x81EA;&#x5DF1;&#x5DF2;&#x7ECF;&#x5360;&#x7528;&#x4E86;<code>asset</code>, <code>page</code>, <code>post</code>&#x8FD9;&#x4E09;&#x4E2A;&#xFF0C;&#x6240;&#x4EE5;&#x9664;&#x6B64;&#x4E4B;&#x5916;&#x90FD;&#x53EF;&#x4EE5;&#x3002;</li><li><code>data</code>&#x4EE3;&#x8868;&#x9664;&#x9875;&#x9762;&#x6A21;&#x677F;&#x4E4B;&#x5916;&#x7684;&#x9875;&#x9762;&#x5185;&#x5BB9;&#x3002;<strong>&#x5E76;&#x975E;&#x5B57;&#x7B26;&#x4E32;</strong>&#x3002;</li><li><code>page_path</code>&#x662F;&#x4E00;&#x4E2A;<code>String</code>, &#x5185;&#x5BB9;&#x5E94;&#x8BE5;&#x662F;&#x8BE5;&#x7F51;&#x9875;&#x76F8;&#x5BF9;&#x6839;&#x7684;&#x8DEF;&#x5F84;&#xFF0C;&#x4E0D;&#x5305;&#x542B;&#x4EE3;&#x8868;&#x6839;&#x76EE;&#x5F55;&#x7684;<code>/</code>.</li><li><code>page_layout</code>&#x662F;<code>String</code>&#x6216;<code>String</code>&#x7684;<code>Array</code>, &#x4EE3;&#x8868;&#x8BE5;&#x9875;&#x9762;&#x4F7F;&#x7528;&#x7684;<code>layout</code>.</li></ul><p>&#x793A;&#x4F8B;&#xFF0C;&#x6BD4;&#x5982;&#x6211;&#x8981;&#x60F3;&#x751F;&#x6210;404&#x9875;&#x9762;&#xFF08;&#x5DF2;&#x7ECF;&#x5199;&#x597D;&#x4E86;<code>404.ejs</code>&#xFF09;</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hexo.extend.generator.register(<span class="string">&apos;_404&apos;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">locals</span>)</span>{</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">        path: <span class="string">&apos;404.html&apos;</span>,</span><br><span class="line">        data: {},</span><br><span class="line">        layout: [<span class="string">&apos;404&apos;</span>,<span class="string">&apos;layout&apos;</span>]</span><br><span class="line">    };</span><br><span class="line">});</span><br></pre></td></tr></table></figure><p>&#x8FD9;&#x6837;Hexo&#x5C31;&#x4F1A;&#x6839;&#x636E;<code>layout/404.ejs</code>&#x7684;&#x6A21;&#x677F;&#x5728;&#x7F51;&#x7AD9;&#x6839;&#x76EE;&#x5F55;&#x4E0B;&#x751F;&#x6210;<code>404.html</code>. &#x5982;&#x679C;&#x627E;&#x4E0D;&#x5230;<code>404.ejs</code>&#x7684;&#x8BDD;&#xFF0C;&#x5C31;&#x4F1A;&#x8F6C;&#x800C;&#x4F7F;&#x7528;<code>layout.ejs</code>&#x6A21;&#x677F;&#x3002;</p><p>&#x8FD8;&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x751F;&#x6210;&#x591A;&#x4E2A;&#x9875;&#x9762;&#xFF1A;</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hexo.extend.generator.register(some_name,<span class="function"><span class="keyword">function</span>(<span class="params">locals</span>)</span>{</span><br><span class="line">    <span class="keyword">return</span> [</span><br><span class="line">        {<span class="attr">path</span>: page_path1,<span class="attr">data</span>: {},<span class="attr">layout</span>: page_layout1},</span><br><span class="line">        {<span class="attr">path</span>: page_path2,<span class="attr">data</span>: {},<span class="attr">layout</span>: page_layout2},</span><br><span class="line">        {<span class="attr">path</span>: page_path3,<span class="attr">data</span>: {},<span class="attr">layout</span>: page_layout3}</span><br><span class="line">    ];</span><br><span class="line">});</span><br></pre></td></tr></table></figure><p>&#x8FD9;&#x6837;&#x505A;&#x7684;&#x597D;&#x5904;&#x5C31;&#x662F;&#xFF0C;&#x4E3E;&#x4F8B;&#x6765;&#x8BF4;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x7528;&#x6237;&#x81EA;&#x5DF1;&#x53BB;&#x5199;&#x4E00;&#x4E2A;<code>404.md</code>&#x6765;&#x4F7F;&#x7528;404&#x9875;&#x9762;&#xFF0C;&#x81EA;&#x52A8;&#x5C31;&#x80FD;&#x751F;&#x6210;&#x3002;</p><h3 id="&#x9009;&#x62E9;&#x6027;&#x751F;&#x6210;css&#x6216;js">&#x9009;&#x62E9;&#x6027;&#x751F;&#x6210;css&#x6216;js</h3><p>&#x6BD4;&#x5982;&#xFF0C;&#x6211;&#x5728;&#x4E3B;&#x9898;&#x7684;<code>source/js</code>&#x6587;&#x4EF6;&#x5939;&#x4E0B;&#x653E;&#x4E86;<code>duoshuo.min.js</code>&#x8FD9;&#x4E2A;&#x591A;&#x8BF4;&#x672C;&#x5730;&#x5316;&#x811A;&#x672C;&#xFF0C;&#x5F53;&#x8BBE;&#x7F6E;&#x91CC;&#x6CA1;&#x542F;&#x7528;&#x591A;&#x8BF4;&#x7684;&#x65F6;&#x5019;&#x8FD9;&#x4E2A;js&#x6587;&#x4EF6;&#x8FD8;&#x662F;&#x4F1A;&#x8DDF;&#x7740;&#x751F;&#x6210;&#xFF0C;&#x8DDF;&#x7740;&#x53D1;&#x5E03;&#x5230;&#x4F60;&#x7684;&#x535A;&#x5BA2;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#xFF0C;&#x6D6A;&#x8D39;&#x6D41;&#x91CF;&#x3002;&#x8BE5;&#x600E;&#x4E48;&#x529E;&#x5462;&#xFF1F;</p><p>&#x628A;&#x5982;&#x4E0B;js&#x653E;&#x8FDB;&#x4E3B;&#x9898;&#x7684;<code>scripts</code>&#x6587;&#x4EF6;&#x5939;&#x4E0B;&#xFF08;&#x6587;&#x4EF6;&#x540D;&#x968F;&#x610F;&#xFF09;&#xFF1A;</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&apos;use strict&apos;</span>;</span><br><span class="line"></span><br><span class="line">hexo.extend.filter.register(<span class="string">&apos;after_generate&apos;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line">    <span class="keyword">var</span> duoshuo = hexo.theme.config.duoshuo_shortname;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!duoshuo || duoshuo.length == <span class="number">0</span>){</span><br><span class="line">        hexo.route.remove(<span class="string">&apos;js/duoshuo.min.js&apos;</span>);</span><br><span class="line">    }</span><br><span class="line">});</span><br></pre></td></tr></table></figure><p>&#x5176;&#x4E2D;<code>duoshuo_shortname</code>&#x662F;&#x4E3B;&#x9898;&#x8BBE;&#x7F6E;&#x91CC;&#x7684;&#x4E00;&#x4E2A;&#x6761;&#x76EE;&#x3002;</p><p>&#x8FD9;&#x6837;&#xFF0C;&#x5F53;<code>duoshuo_shortname</code>&#x4E3A;&#x7A7A;&#x65F6;&#xFF0C;<code>duoshuo.min.js</code>&#x4E0D;&#x4F1A;&#x8DDF;&#x7740;&#x751F;&#x6210;&#xFF0C;&#x4ECE;&#x800C;&#x51CF;&#x5C11;&#x6240;&#x9700;&#x52A0;&#x8F7D;&#x91CF;&#x3002;</p><h3 id="html&#x5206;&#x5757;">HTML&#x5206;&#x5757;</h3><p>&#x4F60;&#x53EF;&#x4EE5;&#x5C06;&#x7ECF;&#x5E38;&#x53D8;&#x52A8;&#xFF0C;&#x800C;&#x4F7F;&#x7528;&#x53C8;&#x975E;&#x5E38;&#x9891;&#x7E41;&#x7684;&#x90E8;&#x5206;&#x5355;&#x72EC;&#x62FF;&#x51FA;&#x6765;&#xFF0C;&#x4F7F;&#x7528;<a href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E9%A1%B5%E9%9D%A2%E7%94%9F%E6%88%90">&#x4E0A;&#x9762;&#x63D0;&#x5230;&#x7684;&#x6280;&#x5DE7;</a>&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x7684;&#x9875;&#x9762;&#xFF0C;&#x4F7F;&#x7528;jQuery&#x6765;&#x52A0;&#x8F7D;&#x5B83;&#x3002;</p><p>&#x4EE5;&#x6211;&#x7684;&#x4E3B;&#x9898;&#x4E3A;&#x4F8B;&#xFF0C;&#x201C;&#x6700;&#x8FD1;&#x6587;&#x7AE0;&#x201D;&#x8FD9;&#x4E2A;&#x63D2;&#x4EF6;&#x5C5E;&#x4E8E;&#x4FA7;&#x8FB9;&#x680F;&#xFF0C;&#x800C;&#x4FA7;&#x8FB9;&#x680F;&#x51E0;&#x4E4E;&#x5728;&#x6BCF;&#x4E2A;&#x9875;&#x9762;&#x91CC;&#x9762;&#x90FD;&#x6709;&#x3002;&#x6BCF;&#x5F53;post&#x6709;&#x54EA;&#x6015;&#x4E00;&#x4E2A;&#x5F88;&#x5C0F;&#x7684;&#x6539;&#x52A8;&#xFF0C;&#x201C;&#x6700;&#x8FD1;&#x6587;&#x7AE0;&#x201D;&#x5C31;&#x9700;&#x8981;&#x66F4;&#x65B0;&#xFF0C;&#x5BFC;&#x81F4;&#x4FA7;&#x8FB9;&#x680F;&#x5185;&#x5BB9;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x751F;&#x6210;&#xFF0C;&#x8FDB;&#x800C;&#x5BFC;&#x81F4;&#x6240;&#x6709;&#x7684;&#x9875;&#x9762;&#x5168;&#x90E8;&#x91CD;&#x65B0;&#x751F;&#x6210;&#x3002;&#x5C06;&#x5B83;&#x5355;&#x72EC;&#x62FF;&#x51FA;&#x6765;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x907F;&#x514D;&#x8FD9;&#x4E00;&#x60C5;&#x51B5;&#x53D1;&#x751F;&#x3002;</p><p>&#x9996;&#x5148;&#xFF0C;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x7684;&#x9875;&#x9762;<code>/components/recent-posts.html</code>.</p><figure class="highlight plain"><figcaption><span>recent_posts.ejs</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">layout: none</span><br><span class="line">---</span><br><span class="line">&lt;% if (site.posts.length){ %&gt;</span><br><span class="line">    &lt;h3&gt;&lt;%= __(&apos;recent_posts&apos;) %&gt;&lt;/h3&gt;</span><br><span class="line">    &lt;ul class=&quot;list&quot;&gt;</span><br><span class="line">        &lt;% site.posts.sort(&apos;updated&apos;, -1).limit(8).each(function(post){ %&gt;</span><br><span class="line">        &lt;li&gt;</span><br><span class="line">            &lt;p&gt;&lt;a href=&quot;&lt;%- url_for(post.path) %&gt;&quot; class=&quot;tooltipped tooltipped-n&quot; aria-label=&quot;&lt;%= post.title || __(&apos;untitled&apos;) %&gt;&quot;&gt;&lt;%= truncate(post.title || __(&apos;untitled&apos;),{length: 23,omission:&quot;...&quot;}) %&gt;&lt;/a&gt;&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;&lt;%= __(&apos;updated&apos;) + __(&apos;:&apos;) %&gt;</span><br><span class="line">            &lt;span class=&quot;update-time&quot;&gt;&lt;%= post.updated.format(&apos;YYYY-MM-D h:m a&apos;) %&gt;&lt;/span&gt;&lt;/p&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">        &lt;% }) %&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">&lt;% } %&gt;</span><br></pre></td></tr></table></figure><p>&#x91CC;&#x9762;&#x7684;<code>layout: none</code>&#x975E;&#x5E38;&#x5173;&#x952E;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x53EA;&#x60F3;&#x8981;&#x8FD9;&#x4E00;&#x4E2A;&#x90E8;&#x5206;&#x800C;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x5B8C;&#x6574;&#x7684;&#x7F51;&#x9875;&#x3002;</p><p>&#x6B64;&#x65F6;&#x63D2;&#x5165;&#x8FD9;&#x4E2A;&#x63D2;&#x4EF6;&#x5C31;&#x4E0D;&#x80FD;&#x4F7F;&#x7528;<code>&lt;%- partial(&apos;_widget/recent_posts&apos;) %&gt;</code>&#x6765;&#x63D2;&#x5165;&#xFF0C;&#x800C;&#x662F;&#x4F7F;&#x7528;&#xFF1A;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- Something before --&gt;</span><br><span class="line">&lt;% if (site.posts.length){ %&gt;</span><br><span class="line">&lt;div class=&quot;widget recent-posts&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;% } %&gt;</span><br><span class="line">&lt;!-- Something after --&gt;</span><br></pre></td></tr></table></figure><p>&#x5E76;&#x4E14;&#x63D2;&#x5165;&#x8FD9;&#x6837;&#x4E00;&#x6BB5;&#x811A;&#x672C;&#xFF1A;</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line">    $(<span class="string">&quot;.widget.recent_posts&quot;</span>).load(<span class="string">&quot;/components/recent-posts.html&quot;</span>);</span><br><span class="line">});</span><br></pre></td></tr></table></figure><p>&#x5982;&#x679C;&#x8FD8;&#x60F3;&#x5BF9;html&#x505A;&#x70B9;&#x4EC0;&#x4E48;&#x4FEE;&#x6539;&#x7684;&#x8BDD;&#xFF0C;&#x6539;&#x6210;&#xFF1A;</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line">    $(<span class="string">&quot;.widget.recent_posts&quot;</span>).load(<span class="string">&quot;/components/recent-posts.html&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">response,status</span>)</span>{</span><br><span class="line">        <span class="keyword">if</span>(status === <span class="string">&quot;success&quot;</span>){</span><br><span class="line">            <span class="comment">// something</span></span><br><span class="line">        }</span><br><span class="line">    });</span><br><span class="line">});</span><br></pre></td></tr></table></figure><h2 id="hexo&#x63D2;&#x4EF6;&#x4F7F;&#x7528;">Hexo&#x63D2;&#x4EF6;&#x4F7F;&#x7528;</h2><h3 id="hexo-generator-search">hexo-generator-search</h3><p>&#x4E00;&#x4E2A;&#x57FA;&#x4E8E;jQuery&#x7684;&#x672C;&#x5730;&#x641C;&#x7D22;&#x63D2;&#x4EF6;&#x3002;&#x5B83;&#x672C;&#x8EAB;&#x4E0D;&#x63D0;&#x4F9B;&#x641C;&#x7D22;&#x529F;&#x80FD;&#xFF0C;&#x5B83;&#x6240;&#x505A;&#x7684;&#x53EA;&#x662F;&#x751F;&#x6210;&#x535A;&#x5BA2;&#x5185;&#x6240;&#x6709;&#x9875;&#x9762;&#x7684;&#x7D22;&#x5F15;&#x3002;&#x8BE5;&#x63D2;&#x4EF6;&#x63D0;&#x4F9B;&#x7684;&#x641C;&#x7D22;&#x5185;&#x5BB9;&#x76F8;&#x5F53;&#x4E8E;Hexo&#x751F;&#x6210;&#x9636;&#x6BB5;&#x7684;<code>post.content</code>. &#x5728;<a href="http://hahack.com/codes/local-search-engine-for-hexo/" target="_blank" rel="noopener">&#x4F5C;&#x8005;&#x535A;&#x5BA2;</a>&#x90A3;&#x8FB9;&#x7684;&#x4EE3;&#x7801;&#x91CC;&#x6709;&#x4E2A;&#x5C0F;&#x9519;&#x8BEF;&#xFF0C;&#x5B83;&#x4F1A;&#x5BFC;&#x81F4;&#x641C;&#x7D22;&#x8FD4;&#x56DE;&#x7684;&#x5339;&#x914D;&#x5B57;&#x7B26;&#x4E32;&#x5F02;&#x5E38;&#x5730;&#x957F;&#x3002;</p><p>&#x65E2;&#x7136;&#x6211;&#x90FD;&#x628A;&#x8FD9;&#x4E2A;&#x5355;&#x72EC;&#x62FF;&#x51FA;&#x6765;&#x4E86;&#x90A3;&#x80AF;&#x5B9A;&#x5C31;&#x8981;&#x505A;&#x4E00;&#x70B9;&#x81EA;&#x5DF1;&#x7684;&#x6539;&#x8FDB;&#x4E86;&#x3002;&#x4F5C;&#x8005;&#x63D0;&#x4F9B;&#x7684;&#x4EE3;&#x7801;&#x662F;&#x76F4;&#x63A5;&#x53BB;&#x6389;&#x6240;&#x6709;html tag&#x518D;&#x641C;&#x7D22;&#xFF0C;&#x4F46;&#x6709;&#x4E00;&#x70B9;&#x7F3A;&#x9677;&#xFF0C;&#x5C31;&#x662F;&#x5B58;&#x653E;&#x5728;<code>&lt;script&gt;</code>&#x548C;<code>&lt;style&gt;</code>&#x91CC;&#x7684;&#x5185;&#x5BB9;&#x4E5F;&#x4F1A;&#x88AB;&#x7B97;&#x8FDB;&#x641C;&#x7D22;&#x8303;&#x56F4;&#x5185;&#xFF0C;&#x8FD8;&#x6709;&#x5C31;&#x662F;&#x4EE3;&#x7801;&#x9AD8;&#x4EAE;&#x7684;&#x884C;&#x53F7;&#x4E5F;&#x4F1A;&#x88AB;&#x7B97;&#x5728;&#x5185;&#x3002;&#x9488;&#x5BF9;&#x8FD9;&#x4E00;&#x70B9;&#xFF0C;&#x6211;&#x4EEC;&#x5728;&#x641C;&#x7D22;&#x4E4B;&#x524D;&#x5229;&#x7528;jQuery&#x5E72;&#x6389;&#x8FD9;&#x4E9B;&#x5185;&#x5BB9;&#xFF1A;</p><p>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;Hexo&#x7684;&#x884C;&#x53F7;&#x662F;&#x9759;&#x6001;&#x751F;&#x6210;&#x597D;&#x7684;&#xFF0C;&#x800C;&#x4E14;&#x88AB;<code>&lt;td class=&quot;gutter&quot;&gt;</code>&#x5305;&#x7740;&#x3002;&#x5220;&#x53BB;<code>$(&quot;.gutter&quot;)</code>&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">stripper</span>(<span class="params">content</span>)</span>{</span><br><span class="line">    <span class="keyword">var</span> wrapper = $(<span class="string">&quot;&lt;div&gt;&quot;</span>+ content +<span class="string">&quot;&lt;/div&gt;&quot;</span>);</span><br><span class="line">    wrapper.find(<span class="string">&quot;script,style&quot;</span>).remove();</span><br><span class="line">    $(<span class="string">&quot;.gutter&quot;</span>,wrapper).remove();</span><br><span class="line">    <span class="keyword">return</span> wrapper.html();</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x5269;&#x4E0B;&#x7684;&#x641C;&#x7D22;&#x4EE3;&#x7801;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4F5C;&#x8005;&#x63D0;&#x4F9B;&#x7684;&#xFF1A;</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> searchFunc = <span class="function"><span class="keyword">function</span>(<span class="params">path, search_id, content_id</span>) </span>{</span><br><span class="line"><span class="meta">    &apos;use strict&apos;</span>;</span><br><span class="line">    $.ajax({</span><br><span class="line">        url: path,</span><br><span class="line">        dataType: <span class="string">&quot;xml&quot;</span>,</span><br><span class="line">        success: <span class="function"><span class="keyword">function</span>(<span class="params"> xmlResponse </span>) </span>{</span><br><span class="line">            <span class="comment">// get the contents from search data</span></span><br><span class="line">            <span class="keyword">var</span> datas = $( <span class="string">&quot;entry&quot;</span>, xmlResponse ).map(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">                <span class="keyword">return</span> {</span><br><span class="line">                    title: $( <span class="string">&quot;title&quot;</span>, <span class="keyword">this</span> ).text(),</span><br><span class="line">                    content: stripper($(<span class="string">&quot;content&quot;</span>,<span class="keyword">this</span>).text()),</span><br><span class="line">                    url: $( <span class="string">&quot;url&quot;</span> , <span class="keyword">this</span>).text()</span><br><span class="line">                };</span><br><span class="line">            }).get();</span><br><span class="line">            <span class="keyword">var</span> $input = <span class="built_in">document</span>.getElementById(search_id);</span><br><span class="line">            <span class="keyword">var</span> $resultContent = <span class="built_in">document</span>.getElementById(content_id);</span><br><span class="line">            $input.addEventListener(<span class="string">&apos;input&apos;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line">                <span class="keyword">var</span> str=<span class="string">&apos;&lt;ul class=\&quot;search-result-list\&quot;&gt;&apos;</span>;</span><br><span class="line">                <span class="keyword">var</span> keywords = <span class="keyword">this</span>.value.trim().toLowerCase().split(<span class="regexp">/[\s\-]+/</span>);</span><br><span class="line">                $resultContent.innerHTML = <span class="string">&quot;&quot;</span>;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">this</span>.value.trim().length &lt;= <span class="number">0</span>) {</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                }</span><br><span class="line">                <span class="comment">// perform local searching</span></span><br><span class="line">                datas.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>{</span><br><span class="line">                    <span class="keyword">var</span> isMatch = <span class="literal">true</span>;</span><br><span class="line">                    <span class="keyword">var</span> content_index = [];</span><br><span class="line">                    <span class="keyword">var</span> data_title = data.title.trim().toLowerCase();</span><br><span class="line">                    <span class="keyword">var</span> data_content = data.content.trim().replace(<span class="regexp">/&lt;[^&gt;]+&gt;/g</span>,<span class="string">&quot;&quot;</span>).toLowerCase();</span><br><span class="line">                    <span class="keyword">var</span> data_url = data.url;</span><br><span class="line">                    <span class="keyword">var</span> index_title = <span class="number">-1</span>;</span><br><span class="line">                    <span class="keyword">var</span> index_content = <span class="number">-1</span>;</span><br><span class="line">                    <span class="keyword">var</span> first_occur = <span class="number">-1</span>;</span><br><span class="line">                    <span class="comment">// only match artiles with not empty titles and contents</span></span><br><span class="line">                    <span class="keyword">if</span>(data_title != <span class="string">&apos;&apos;</span> &amp;&amp; data_content != <span class="string">&apos;&apos;</span>) {</span><br><span class="line">                        keywords.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">keyword, i</span>) </span>{</span><br><span class="line">                            index_title = data_title.indexOf(keyword);</span><br><span class="line">                            index_content = data_content.indexOf(keyword);</span><br><span class="line">                            <span class="keyword">if</span>( index_title &lt; <span class="number">0</span> &amp;&amp; index_content &lt; <span class="number">0</span> ){</span><br><span class="line">                                isMatch = <span class="literal">false</span>;</span><br><span class="line">                            } <span class="keyword">else</span> {</span><br><span class="line">                                <span class="keyword">if</span> (index_content &lt; <span class="number">0</span>) {</span><br><span class="line">                                    index_content = <span class="number">0</span>;</span><br><span class="line">                                }</span><br><span class="line">                                <span class="keyword">if</span> (i == <span class="number">0</span>) {</span><br><span class="line">                                    first_occur = index_content;</span><br><span class="line">                                }</span><br><span class="line">                            }</span><br><span class="line">                        });</span><br><span class="line">                    }</span><br><span class="line">                    <span class="comment">// show search results</span></span><br><span class="line">                    <span class="keyword">if</span> (isMatch) {</span><br><span class="line">                        str += <span class="string">&quot;&lt;li&gt;&lt;a href=&apos;&quot;</span>+ data_url +<span class="string">&quot;&apos; class=&apos;search-result-title&apos;&gt;&quot;</span>+ data_title +<span class="string">&quot;&lt;/a&gt;&quot;</span>;</span><br><span class="line">                        <span class="keyword">var</span> content = data.content.trim().replace(<span class="regexp">/&lt;[^&gt;]+&gt;/g</span>,<span class="string">&quot;&quot;</span>);</span><br><span class="line">                        <span class="keyword">if</span> (first_occur &gt;= <span class="number">0</span>) {</span><br><span class="line">                            <span class="comment">// cut out 100 characters</span></span><br><span class="line">                            <span class="keyword">var</span> start = first_occur - <span class="number">20</span>;</span><br><span class="line">                            <span class="keyword">var</span> end = first_occur + <span class="number">80</span>;</span><br><span class="line">                            <span class="keyword">if</span>(start &lt; <span class="number">0</span>){</span><br><span class="line">                                start = <span class="number">0</span>;</span><br><span class="line">                            }</span><br><span class="line">                            <span class="keyword">if</span>(start == <span class="number">0</span>){</span><br><span class="line">                                end = <span class="number">100</span>;</span><br><span class="line">                            }</span><br><span class="line">                            <span class="keyword">if</span>(end &gt; content.length){</span><br><span class="line">                                end = content.length;</span><br><span class="line">                            }</span><br><span class="line">                            <span class="keyword">var</span> match_content = content.substring(start, end);</span><br><span class="line">                            <span class="comment">// highlight all keywords</span></span><br><span class="line">                            keywords.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">keyword</span>)</span>{</span><br><span class="line">                                <span class="keyword">var</span> regS = <span class="keyword">new</span> <span class="built_in">RegExp</span>(keyword, <span class="string">&quot;gi&quot;</span>);</span><br><span class="line">                                match_content = match_content.replace(regS, <span class="string">&quot;&lt;em class=\&quot;search-keyword\&quot;&gt;&quot;</span>+keyword+<span class="string">&quot;&lt;/em&gt;&quot;</span>);</span><br><span class="line">                            });</span><br><span class="line"></span><br><span class="line">                            str += <span class="string">&quot;&lt;p class=\&quot;search-result\&quot;&gt;&quot;</span> + match_content +<span class="string">&quot;...&lt;/p&gt;&quot;</span></span><br><span class="line">                        }</span><br><span class="line">                        str += <span class="string">&quot;&lt;/li&gt;&quot;</span>;</span><br><span class="line">                    }</span><br><span class="line">                });</span><br><span class="line">                str += <span class="string">&quot;&lt;/ul&gt;&quot;</span>;</span><br><span class="line">                $resultContent.innerHTML = str;</span><br><span class="line">            });</span><br><span class="line">        }</span><br><span class="line">    });</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x5982;&#x679C;&#x4F60;&#x7684;&#x641C;&#x7D22;&#x6846;&#x63D2;&#x5165;&#x7684;&#x662F;</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;site_search&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;local-search-input&quot;</span> <span class="attr">name</span>=<span class="string">&quot;q&quot;</span> <span class="attr">results</span>=<span class="string">&quot;0&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;search my blog...&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;local-search-result&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>&#x90A3;&#x4E48;&#x8FD8;&#x8981;&#x5728;&#x9875;&#x9762;&#x5F53;&#x4E2D;&#x63D2;&#x5165;</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> search_path = <span class="string">&quot;&lt;%= config.search.path %&gt;&quot;</span>;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">if</span> (search_path.length == <span class="number">0</span>) {</span></span><br><span class="line"><span class="javascript">        search_path = <span class="string">&quot;search.xml&quot;</span>;</span></span><br><span class="line"><span class="undefined">    }</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> path = <span class="string">&quot;&lt;%= config.root %&gt;&quot;</span> + search_path;</span></span><br><span class="line"><span class="javascript">    searchFunc(path, <span class="string">&apos;local-search-input&apos;</span>, <span class="string">&apos;local-search-result&apos;</span>);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>&#x5269;&#x4E0B;&#x5C31;&#x662F;&#x4E00;&#x4E9B;css&#x88C5;&#x9970;&#x8FD9;&#x7C7B;&#x7684;&#x7EC6;&#x8282;&#x5DE5;&#x4F5C;&#x4E86;&#x3002;</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>2016&#x5E74; <a href="#fnref1" class="footnote-backref">&#x21A9;</a></p></li><li id="fn2" class="footnote-item"><p>PHP <a href="#fnref2" class="footnote-backref">&#x21A9;</a></p></li></ol></section>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;#x8EAB;&amp;#x4E3A;&amp;#x4E00;&amp;#x540D;&amp;#x9884;&amp;#x5907;&amp;#x7A0B;&amp;#x5E8F;&amp;#x5458;&amp;#xFF0C;&amp;#x5BF9;&amp;#x4E8E;&amp;#x81EA;&amp;#x5DF1;&amp;#x4F7F;&amp;#x7528;&amp;#x7684;&amp;#x5DE5;&amp;#x5177;&amp;#x81EA;&amp;#x7136;&amp;#x8981;&amp;#x6709;&amp;#x6298;&amp;#x817E;&amp;#x7684;&amp;#x6B32;&amp;#x671B;&amp;#x3002;&amp;#x4ECE;&amp;#x4ECA;&amp;#x5E74;&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn1&quot; id=&quot;fnref1&quot;&gt;[1]&lt;/a&gt;&lt;/sup&gt;&amp;#x4E03;&amp;#x516B;&amp;#x6708;&amp;#x4EE5;&amp;#x6765;&amp;#xFF0C;&amp;#x5C31;&amp;#x4E00;&amp;#x76F4;&amp;#x5728;&amp;#x60F3;&amp;#x7740;&amp;#x5982;&amp;#x4F55;&amp;#x6298;&amp;#x817E;&amp;#x6298;&amp;#x817E;Hexo. &amp;#x518D;&amp;#x52A0;&amp;#x4E0A;&amp;#x5F88;&amp;#x559C;&amp;#x6B22;&lt;a href=&quot;https://mufeng.me/wordpress-mobile-theme-kunkka.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Kunkka&lt;/a&gt;&amp;#xFF08;&amp;#x5176;Github&amp;#x6E90;&amp;#x5DF2;404&amp;#xFF0C;&amp;#x4F30;&amp;#x8BA1;&amp;#x88AB;&amp;#x4F5C;&amp;#x8005;&amp;#x81EA;&amp;#x5DF1;&amp;#x5220;&amp;#x9664;&amp;#x4E86;&amp;#xFF09;&amp;#x8FD9;&amp;#x4E2A;Wordpress&amp;#x7684;&amp;#x4E3B;&amp;#x9898;&amp;#xFF0C;&amp;#x60F3;&amp;#x7740;&amp;#x628A;&amp;#x5B83;&amp;#x79FB;&amp;#x690D;&amp;#x5230;Hexo&amp;#x4E0A;&amp;#x6765;&amp;#x3002;&amp;#x5C31;&amp;#x5728;&amp;#x8FD9;&amp;#x91CC;&amp;#x8BB0;&amp;#x8F7D;&amp;#x4E00;&amp;#x4E0B;&amp;#x78B0;&amp;#x5230;&amp;#x7684;&amp;#x95EE;&amp;#x9898;&amp;#x548C;&amp;#x89E3;&amp;#x51B3;&amp;#x65B9;&amp;#x6848;&amp;#x5427;&amp;#x3002;&lt;/p&gt;&lt;p&gt;UPDATE 2016/10/28: &amp;#x4FEE;&amp;#x6539;&amp;#x4E86;&amp;#x90E8;&amp;#x5206;&amp;#x7528;&amp;#x8BCD;&lt;/p&gt;&lt;p&gt;UPDATE 2017/9/22: &amp;#x66F4;&amp;#x65B0;&amp;#x4EE3;&amp;#x7801;&lt;/p&gt;&lt;p&gt;UPDATE 2018/6/21: &amp;#x518D;&amp;#x5EA6;&amp;#x66F4;&amp;#x65B0;&amp;#x4EE3;&amp;#x7801;&lt;/p&gt;
    
    </summary>
    
      <category term="学习" scheme="https://unnamed42.github.io/categories/%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="Hexo" scheme="https://unnamed42.github.io/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>官方版DnD阵营测试</title>
    <link href="https://unnamed42.github.io/2016-06-30-%E5%AE%98%E6%96%B9%E7%89%88DnD%E9%98%B5%E8%90%A5%E6%B5%8B%E8%AF%95.html"/>
    <id>https://unnamed42.github.io/2016-06-30-官方版DnD阵营测试.html</id>
    <published>2016-06-30T10:06:54.000Z</published>
    <updated>2017-12-18T05:44:09.350Z</updated>
    
    <content type="html"><![CDATA[<p>&#x672C;&#x7248;&#x6D4B;&#x8BD5;&#x642C;&#x8FD0;&#x81EA;<a href="http://www.padnd.com/alignment_test2.php" target="_blank" rel="external">&#x4E00;&#x4E2A;&#x975E;&#x5B98;&#x65B9;&#x7684;&#x7F51;&#x7AD9;</a>&#xFF0C;&#x7FFB;&#x8BD1;&#x51FA;&#x81EA;<a href="https://www.douban.com/group/topic/5049348/" target="_blank" rel="external">&#x8C46;&#x74E3;</a>&#x3002;&#x867D;&#x7136;&#x6D4B;&#x8BD5;&#x5E76;&#x975E;&#x51FA;&#x81EA;&#x5B98;&#x7F51;&#xFF0C;&#x4F46;&#x5185;&#x5BB9;&#x662F;&#x4E00;&#x6837;&#x7684;&#x3002;<span class="spoiler">&#x4E3A;&#x4EC0;&#x4E48;&#x6211;&#x4E0D;&#x76F4;&#x63A5;&#x642C;&#x5B98;&#x7F51;&#x7684;&#x5462;&#xFF1F;&#x56E0;&#x4E3A;&#x6211;&#x627E;&#x4E0D;&#x5230;&#x5B98;&#x7F51;&#x7684;&#x6D4B;&#x8BD5;&#x7ED3;&#x679C;&#x5904;&#x7406;&#x811A;&#x672C;&#x554A;&#xFF01;</span></p><a id="more"></a><body><div class="alignprose"><form name="survey" action=""><script type="text/javascript">var alignments={lg:{name:"守序善良",value:0,description:"守序善良的人物相信，规律而强大的社会和高尚的政府，可以让大多数人民生活得更好。只要人们相信法律，并试着互相帮助，整个社会就将因此而进步。因此，这个阵营的人物将会朝着这个方向努力，他们会尽可能地为大多数人带来较多的福利及较少的伤害。他们必定信守自己的承诺。守序善良的人物，特别是圣武士，时常自己陷于善良与法律相冲突的两难处境。比如履行誓言可能会伤及无辜时，或在宗教法规和地方法律相矛盾时。"},ng:{name:"中立善良",value:0,description:"中立善良的人物相信力量平衡是十分重要的事，单方面地强调秩序或混乱，是无法达到至善的。因为整个宇宙中充满了朝着各式各样的目标而努力的生物，所以若要追求至善，便不能破坏这种平衡，甚至的设法维持这种平衡，如果说支持社会秩序可以带来至善，便得以为之。若推翻既有的社会秩序就可以达到至善，那也必须为之。社会结构对他们来说，没什么重大意义。中立善良的长处是，行善不为阶级偏见所影响。"},cg:{name:"混乱善良",value:0,description:"混乱善良的人物虽然喜欢按照自己的意思行事，心地却不错。尽管他们认同一切美德和公理，却不愿意受到律法和规范的约束。想要任意驱使这些人，要他们遵照命令做事是不可能的。这些人有自己的一套道德标准，虽然不至于为恶，但也不见得和一般大众的道德标准完全相同。混乱善良人物常会因为感到受人指使而在团队内制造矛盾，比起有计划的行动他们更喜欢即兴发挥。混乱善良阵营的人物不介意用恶毒的手段制裁他们认为是邪恶的人，即便并不喜欢这样做，但他们本身却并不带有恶意。"},ln:{name:"守序中立",value:0,description:"守序中立的人物而言，秩序和组织是非常重要的。他们认同强大、井然有序的统治阶层，不管这个统治阶层是专制的暴君，还是安和乐利的民主政府，这些人都不在乎，世界上必须有法律，而法律则必须被遵守。对他们而言，绝对的秩序比什么道德良知来的重要。只要是规定，不管结果是好是坏，都必须遵行无误。绝对公正的法官，和绝对服从命令的士兵，都是此阵营的最佳典范。守序中立对善恶持中立态度，但这不代表他们是不道德的、是道德虚无主义者或是没有道德立场。他们只不过是将道德观念永远置于服从信条、传统或者法律之下。他们通常有强烈的伦理信条，但这一信条是首先基于其信念体系，而非基于善恶认同。"},nn:{name:"绝对中立",value:0,description:"绝对中立的人物相信绝对平衡的力量，因此，他们拒绝采取任何被视为邪恶和暴力的行动。绝对中立的人会尽力避免和善良或邪恶，秩序或叛逆的力量合流。有时候他们发现自己被迫得和某个阵营结盟。为了保持平衡，这些人会刻意改变立场，和弱势者合作。然而，当强弱势力对换时，他们也会毫不犹豫地跟着改变立场。"},cn:{name:"混乱中立",value:0,description:"混乱中立的人按自己一时的兴致行动。他是一个完全的个人主义者。他重视自己的自由权利，但并不致力于保护别人的自由。他蔑视权威，愤恨约束并且挑战传统。混乱中立者并不会向无政府运动那样有意瓦解组织。如果这么做，他必须把自己的阵营转成善良(希望解放他人)或是邪恶(使异己受苦)。混乱中立的寻常称谓是“真正混乱”。注意，混乱中立者的行为也许很难预测，但他的举止并非完全随机的，他从桥上的走过去的可能性和从桥上跳下去的可能性大小并不相等。混乱中立是一个真正自由于社会约束和对改良社会的空想的阵营。"},le:{name:"守序邪恶",value:0,description:"守序邪恶的人有系统地得到他想要的东西，此行为受到他行为准则的限制，但并不顾及受其伤害的人。他关心传统、忠诚和秩序，但不关心自由、尊严和生命。他按规则行动，但没有怜悯和同情。他觉得待在统治阶层里很舒服，愿意支配别人，但也乐意为别人服务。他处罚谴责别人并不是根据他们的行为而是根据种族、信仰、祖国或社会阶层。他不愿违反法律或承诺，这种不愿部分是因为他的天性，部分是因为他需要秩序来保护他免受道德上的反对。某些守序邪恶者有特别的禁忌，比如不冷血嗜杀(但让属下去做)或不伤害儿童(如果可能的话)。他们认为这些良心上的原则使自己比一般不合人道的恶人水准高。诡计多端扩展自己势力并他的压迫人民的贵族是一个守序邪恶的例子。某些守序邪恶的人或生物狂热的效忠于邪恶，就好像十字军效忠于良善一样。伤害别人是他们这么做的目的，传播邪恶本身也是他们乐于如此的原因。他们也可能认为行恶是对某种邪恶神明或主人的责任的一部分。守序邪恶有时被称为“恶魔般的”，因为恶魔是守序邪恶的化身和典型。守序邪恶是一个有方法有意图并且能常常有所成就的邪恶阵营。"},ne:{name:"中立邪恶",value:0,description:"中立邪恶的人物为了自己可以做出任何事，一切都是为了自己，就这么简单。他们从不为死在手下的人掉泪，不论是为财、为了高兴或只是为了方便。他们不喜欢纪律，也不遵守法律、传统或任何高贵的信念。然而，他们也不像混乱邪恶者那样浮躁不安，或热爱冲突。有些中立邪恶者将邪恶视为一种理想，想要献身于邪恶。这种恶人大多是邪恶神祇或秘密组织的成员。一般人习惯将中立邪恶称为“真正的邪恶”。中立邪恶的可怕在于表现出全然的邪恶，完全没有荣誉感和对象区别。"},ce:{name:"混乱邪恶",value:0,description:"混乱邪恶的人物会因为贪婪、憎恨或欲望而做出任何事。他暴躁易怒、满怀恶意、独断暴力而且无法预料。为了得到想要的东西，他会冲动而鲁莽地行动，散播邪恶与混乱。所幸他的计划大多杂乱无章，其团体大多组织散乱。一般而言，混乱邪恶者只有被强迫时才会与人合作，其领袖常要面对斗争与暗杀。混乱邪恶的可怕在于不仅破坏美丽与生命，也破坏了美丽与生命赖以存在的秩序。"}};$(function(){$("#submit").click(function(){var n={cx:0,lx:0,nx:0,xe:0,xg:0,xn:0};$('form[name="survey"] input[name^="q"]:checked').each(function(){n[$(this).attr("data-infl")]+=parseInt($(this).attr("data-value"))});var e,a=0,r=-1;Object.keys(alignments).forEach(function(i){var r=i.charAt(0)+"x",t="x"+i.charAt(1),c=n[r]+n[t];alignments[i].value=c,c>a&&(a=c,e=i)}),Object.keys(alignments).forEach(function(n){alignments[n].value==a&&++r}),0!=r&&(e=n.lx>n.nx&&n.lx>n.cx?"l":n.cx>n.nx&&n.cx>n.lx?"c":"n",e+=n.xg>n.xe&&n.xg>n.xn?"g":n.xe>n.xn&&n.xe>n.xg?"e":"n"),e=alignments[e];var t="<p>你的阵营是：</p><h3>"+e.name+"</h3>";for(t+="<p>"+e.description+"</p>",t+="<h3>详细得分：</h3>",t+="<h4>阵营倾向：</h4>",Object.keys(alignments).forEach(function(n){var e=alignments[n];t+=e.name+" ---- ";for(var i=0;i<e.value;++i)t+="X";t+="("+e.value+")<br>"}),t+="<h4>守序与混乱：</h4>",t+="守序 ----- ",i=0;i<n.lx;i++)t+="X";for(t+="("+n.lx+")<br>",t+="中立 ----- ",i=0;i<n.nx;i++)t+="X";for(t+="("+n.nx+")<br>",t+="混乱 ----- ",i=0;i<n.cx;i++)t+="X";for(t+="("+n.cx+")<br>",t+="<h4>善良与邪恶：</h4>",t+="善良 ---- ",i=0;i<n.xg;i++)t+="X";for(t+="("+n.xg+")<br>",t+="中立 ---- ",i=0;i<n.xn;i++)t+="X";for(t+="("+n.xn+")<br>",t+="邪恶 ---- ",i=0;i<n.xe;i++)t+="X";t+="("+n.xe+")<br>",$("#result").html(t)})});</script><h2>&#x7B2C;&#x4E00;&#x5377;&#xFF1A;&#x5BF9;&#x4EB2;&#x621A;&#x7684;&#x770B;&#x6CD5;</h2><ol><li>&#x957F;&#x8F88;&#x5728;&#x5BB6;&#x65CF;&#x4E2D;&#x516C;&#x5F00;&#x53CD;&#x5BF9;&#x4F60;&#xFF0C;&#x4F60;&#x4F1A;&#xFF1A;<br><input name="q1" type="radio" data-infl="xg" data-value="2" checked>&#x63A5;&#x53D7;&#x6279;&#x8BC4;&#xFF0C;&#x6539;&#x53D8;&#x65B9;&#x6CD5;<br><input name="q1" type="radio" data-infl="xg" data-value="1">&#x5C1D;&#x8BD5;&#x4E0E;&#x957F;&#x8F88;&#x59A5;&#x534F;&#xFF0C;&#x7528;&#x6298;&#x8877;&#x7684;&#x65B9;&#x6CD5;<br><input name="q1" type="radio" data-infl="xe" data-value="1">&#x5FFD;&#x7565;&#x957F;&#x8F88;&#x7684;&#x8F7B;&#x8511;&#xFF0C;&#x8BFD;&#x8C24;&#x4ED6;&#x4EEC;<br><input name="q1" type="radio" data-infl="xe" data-value="2">&#x5343;&#x65B9;&#x767E;&#x8BA1;&#x4F7F;&#x4ED6;&#x4EEC;&#x6536;&#x58F0;<br></li><li>&#x4F60;&#x4F1A;&#x653E;&#x5F03;&#x4E00;&#x4E2A;&#x524D;&#x9014;&#x65E0;&#x91CF;&#x7684;&#x804C;&#x4E1A;&#x6765;&#x5E2E;&#x5FD9;&#x89E3;&#x51B3;&#x5BB6;&#x5EAD;&#x7684;&#x71C3;&#x7709;&#x4E4B;&#x6025;&#x5417;&#xFF1F;<br><input name="q2" type="radio" data-infl="xg" data-value="2" checked>&#x4E0D;&#x7528;&#x60F3;&#xFF0C;&#x80AF;&#x5B9A;&#x4F1A;<br><input name="q2" type="radio" data-infl="xg" data-value="1">&#x4F1A;&#xFF0C;&#x4F46;&#x6709;&#x70B9;&#x4E0D;&#x60C5;&#x613F;<br><input name="q2" type="radio" data-infl="xn" data-value="1">&#x9664;&#x975E;&#x6211;&#x80AF;&#x5B9A;&#x6211;&#x4F1A;&#x5F88;&#x5FEB;&#x91CD;&#x56DE;&#x5DE5;&#x4F5C;&#x5C97;&#x4F4D;<br><input name="q2" type="radio" data-infl="xn" data-value="2">&#x4E0D;&#x4F1A;<br></li><li>&#x4F60;&#x4F1A;&#x4E3A;&#x4E86;&#x524D;&#x9014;&#x800C;&#x80CC;&#x53DB;&#x5BB6;&#x4EBA;&#x5417;&#xFF1F;<br><input name="q3" type="radio" data-infl="xe" data-value="2" checked>&#x4F1A;&#xFF0C;&#x4E0D;&#x5E26;&#x4E00;&#x70B9;&#x7F6A;&#x6076;&#x611F;<br><input name="q3" type="radio" data-infl="xe" data-value="1">&#x4F1A;&#x2014;&#x2014;&#x53EA;&#x8981;&#x6211;&#x80FD;&#x79D8;&#x5BC6;&#x884C;&#x4E8B;<br><input name="q3" type="radio" data-infl="xn" data-value="1">&#x6211;&#x4F1A;&#x6297;&#x62D2;&#x8FD9;&#x8BF1;&#x60D1;<br><input name="q3" type="radio" data-infl="xn" data-value="2">&#x6211;&#x8BA4;&#x4E3A;&#x8FD9;&#x4E2A;&#x4E3B;&#x610F;&#x6781;&#x4E3A;&#x53EF;&#x6068;<br></li><li>&#x4F60;&#x5C0A;&#x656C;&#x4E00;&#x5BB6;&#x4E4B;&#x4E3B;&#x5417;&#xFF1F;<br><input name="q4" type="radio" data-infl="lx" data-value="2" checked>&#x4ED6;&#x4EEC;&#x7684;&#x8A00;&#x8BED;&#x6307;&#x5BFC;&#x7740;&#x6211;&#x7684;&#x884C;&#x52A8;<br><input name="q4" type="radio" data-infl="lx" data-value="1">&#x4ED6;&#x4EEC;&#x662F;&#x6211;&#x7684;&#x699C;&#x6837;<br><input name="q4" type="radio" data-infl="cx" data-value="1">&#x4ED6;&#x4EEC;&#x901A;&#x5E38;&#x90FD;&#x4E0E;&#x6211;&#x65E0;&#x5173;<br><input name="q4" type="radio" data-infl="cx" data-value="2">&#x6211;&#x5F53;&#x4ED6;&#x4EEC;&#x900F;&#x660E;<br></li><li>&#x5982;&#x679C;&#x5BB6;&#x65CF;&#x8981;&#x4F60;&#x4E0E;&#x4E00;&#x4E2A;&#x4EE4;&#x4EBA;&#x4F5C;&#x5455;&#x7684;&#x5BB6;&#x4F19;&#x7ED3;&#x5A5A;&#xFF0C;&#x4F60;&#x4F1A;&#xFF1A;<br><input name="q5" type="radio" data-infl="lx" data-value="2" checked>&#x542C;&#x4ECE;&#x5B89;&#x6392;&#xFF0C;&#x4E3A;&#x80FD;&#x5E2E;&#x52A9;&#x5BB6;&#x65CF;&#x800C;&#x81EA;&#x8C6A;<br><input name="q5" type="radio" data-infl="lx" data-value="1">&#x4F1A;&#xFF0C;&#x4F46;&#x5F3A;&#x989C;&#x6B22;&#x7B11;<br><input name="q5" type="radio" data-infl="nx" data-value="1">&#x5DE7;&#x5999;&#x5730;&#x6297;&#x5A5A;<br><input name="q5" type="radio" data-infl="nx" data-value="2">&#x9003;&#x8DD1;<br></li><li>&#x6709;&#x4E00;&#x4F4D;&#x5BB6;&#x4EBA;&#x758F;&#x8FDC;&#x4E86;&#x4F60;&#x3002;&#x5728;&#x4ED6;&#x5F25;&#x7559;&#x4E4B;&#x9645;&#xFF0C;&#x4ED6;&#x60F3;&#x4E0E;&#x4F60;&#x548C;&#x89E3;&#x3002;&#x4F60;&#x4F1A;&#xFF1A;<br><input name="q6" type="radio" data-infl="cx" data-value="2" checked>&#x4E0E;&#x4ED6;&#x8C08;&#x8C08;&#xFF0C;&#x4F46;&#x575A;&#x5B88;&#x7ACB;&#x573A;<br><input name="q6" type="radio" data-infl="cx" data-value="1">&#x4E0D;&#x8DDF;&#x4ED6;&#x8BF4;&#x8BDD;<br><input name="q6" type="radio" data-infl="nx" data-value="1">&#x4E0D;&#x8BA1;&#x524D;&#x5ACC;&#x655E;&#x5F00;&#x5FC3;&#x6249;&#x5730;&#x8BA8;&#x8BBA;&#x524D;&#x4E8B;<br><input name="q6" type="radio" data-infl="nx" data-value="2">&#x79EF;&#x6781;&#x8FDB;&#x884C;&#x548C;&#x89E3;&#xFF0C;&#x5E76;&#x7559;&#x5FC3;&#x542C;&#x4ED6;&#x7684;&#x9057;&#x8A00;<br></li></ol><h2>&#x7B2C;&#x4E8C;&#x5377;&#xFF1A;&#x5BF9;&#x670B;&#x53CB;&#x7684;&#x770B;&#x6CD5;</h2><ol><li>&#x4E00;&#x4E2A;&#x4F4D;&#x9AD8;&#x6743;&#x91CD;&#x7684;&#x8150;&#x8D25;&#x6CD5;&#x5B98;&#x5141;&#x8BFA;&#x5982;&#x679C;&#x4F60;&#x80FD;&#x4F5C;&#x5BF9;&#x4F60;&#x670B;&#x53CB;&#x4E0D;&#x5229;&#x7684;&#x5047;&#x8BC1;&#xFF0C;&#x4ED6;&#x4FBF;&#x7ED9;&#x4F60;&#x4E00;&#x5927;&#x7B14;&#x94B1;&#x3002;&#x4F60;&#x4F1A;&#xFF1A;<br><input name="q7" type="radio" data-infl="xe" data-value="2" checked>&#x7167;&#x505A;&#xFF0C;&#x7136;&#x540E;&#x62FF;&#x94B1;<br><input name="q7" type="radio" data-infl="xe" data-value="1">&#x62FF;&#x94B1;&#x7167;&#x505A;&#xFF0C;&#x4F46;&#x5C3D;&#x91CF;&#x4F7F;&#x8BC1;&#x8BCD;&#x663E;&#x5F97;&#x65E0;&#x529B;<br><input name="q7" type="radio" data-infl="xg" data-value="1">&#x62D2;&#x7EDD;<br><input name="q7" type="radio" data-infl="xg" data-value="2">&#x4E0D;&#x7BA1;&#x7ED3;&#x679C;&#x5982;&#x4F55;&#xFF0C;&#x90FD;&#x7AD9;&#x5728;&#x670B;&#x53CB;&#x90A3;&#x4E00;&#x8FB9;<br></li><li>&#x4F60;&#x4F1A;&#x4EB2;&#x8FD1;&#x670B;&#x53CB;&#xFF0C;&#x8FD8;&#x662F;&#x4E0E;&#x5927;&#x90E8;&#x5206;&#x4EBA;&#x4FDD;&#x6301;&#x4E00;&#x6BB5;&#x8DDD;&#x79BB;&#x4EE5;&#x4FDD;&#x5B89;&#x5168;&#xFF1F;<br><input name="q8" type="radio" data-infl="xg" data-value="2" checked>&#x6211;&#x6709;&#x4E00;&#x5927;&#x7FA4;&#x5BC6;&#x53CB;<br><input name="q8" type="radio" data-infl="xg" data-value="1">&#x6211;&#x6709;&#x4E9B;&#x5BC6;&#x53CB;<br><input name="q8" type="radio" data-infl="xn" data-value="1">&#x6211;&#x6709;&#x51E0;&#x4E2A;&#x5BC6;&#x53CB;<br><input name="q8" type="radio" data-infl="xn" data-value="2">&#x6211;&#x4F1A;&#x4E0E;&#x4EBA;&#x4FDD;&#x6301;&#x8DDD;&#x79BB;<br></li><li>&#x4F60;&#x80CC;&#x53DB;&#x8FC7;&#x670B;&#x53CB;&#x5417;&#xFF1F;<br><input name="q9" type="radio" data-infl="xe" data-value="2" checked>&#x6211;&#x5E72;&#x8FC7;&#x4E0D;&#x6B62;&#x4E00;&#x6B21;&#xFF0C;&#x6709;&#x65F6;&#x4E5F;&#x80FD;&#x9003;&#x907F;&#x60E9;&#x7F5A;<br><input name="q9" type="radio" data-infl="xe" data-value="1">&#x6211;&#x53EA;&#x5E72;&#x8FC7;&#x90A3;&#x4E48;&#x4E00;&#x6B21;<br><input name="q9" type="radio" data-infl="xn" data-value="1">&#x6211;&#x66FE;&#x88AB;&#x6002;&#x607F;&#x8FC7;&#x8FD9;&#x4E48;&#x505A;&#xFF0C;&#x4F46;&#x4ECE;&#x672A;&#x505A;&#x8FC7;<br><input name="q9" type="radio" data-infl="xn" data-value="2">&#x6211;&#x4ECE;&#x672A;&#x8003;&#x8651;&#x8FC7;&#x8FD9;&#x79CD;&#x4E8B;<br></li><li>&#x4F60;&#x600E;&#x4E48;&#x770B;&#x5F85;&#x201C;&#x6267;&#x5B50;&#x4E4B;&#x624B;&#xFF0C;&#x4E0E;&#x5B50;&#x5055;&#x8001;&#x201D;&#x8FD9;&#x7C7B;&#x5BF9;&#x7231;&#x4EBA;&#x7684;&#x7EC8;&#x751F;&#x627F;&#x8BFA;&#xFF1F;<br><input name="q10" type="radio" data-infl="lx" data-value="2" checked>&#x6211;&#x66FE;&#x6709;&#x8FC7;&#x6216;&#x6B63;&#x6E34;&#x671B;&#x7740;&#x8FD9;&#x4E48;&#x4E00;&#x6BB5;&#x7F57;&#x66FC;&#x53F2;<br><input name="q10" type="radio" data-infl="lx" data-value="1">&#x8FD9;&#x79CD;&#x7F57;&#x66FC;&#x53F2;&#x633A;&#x7406;&#x60F3;&#x7684;&#x2014;&#x2014;&#x5982;&#x679C;&#x80FD;&#x6210;&#x529F;&#x7684;&#x8BDD;<br><input name="q10" type="radio" data-infl="cx" data-value="1">&#x6211;&#x62C5;&#x5FC3;&#x6211;&#x4F1A;&#x9519;&#x8FC7;&#x5176;&#x4ED6;&#x4EBA;&#x5BF9;&#x6211;&#x7684;&#x7231;<br><input name="q10" type="radio" data-infl="cx" data-value="2">&#x4F5C;&#x8327;&#x81EA;&#x7F1A;&#xFF1F;&#x771F;&#x662F;&#x5929;&#x5927;&#x7684;&#x9519;&#x8BEF;<br></li><li>&#x670B;&#x53CB;&#x501F;&#x4E86;&#x4F60;&#x94B1;&#xFF0C;&#x4F60;&#x4F1A;&#x8981;&#x4ED6;&#x4EEC;&#x8FD8;&#x5417;&#xFF1F;<br><input name="q11" type="radio" data-infl="lx" data-value="2" checked>&#x4F1A;&#xFF0C;&#x800C;&#x4E14;&#x5199;&#x597D;&#x501F;&#x636E;&#xFF0C;&#x4E0D;&#x5F97;&#x62B5;&#x8D56;<br><input name="q11" type="radio" data-infl="lx" data-value="1">&#x4F1A;&#xFF0C;&#x4F46;&#x671F;&#x9650;&#x4E0A;&#x4F1A;&#x5BBD;&#x677E;&#x4E9B;<br><input name="q11" type="radio" data-infl="nx" data-value="1">&#x4E0D;&#x4F1A;&#xFF0C;&#x5C3D;&#x7BA1;&#x8FD8;&#x4E86;&#x4F1A;&#x66F4;&#x597D;<br><input name="q11" type="radio" data-infl="nx" data-value="2">&#x4E0D;&#x4F1A;&#xFF0C;&#x4ED6;&#x4EEC;&#x6B20;&#x6211;&#x4E00;&#x4E2A;&#x4EBA;&#x60C5;<br></li><li>&#x4F60;&#x4ECD;&#x4E0E;&#x513F;&#x65F6;&#x73A9;&#x4F34;&#x4FDD;&#x6301;&#x8054;&#x7EDC;&#x5417;&#xFF1F;<br><input name="q12" type="radio" data-infl="nx" data-value="2" checked>&#x662F;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x5B9A;&#x671F;&#x901A;&#x4FE1;<br><input name="q12" type="radio" data-infl="nx" data-value="1">&#x662F;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x52AA;&#x529B;&#x4FDD;&#x6301;&#x8054;&#x7EDC;<br><input name="q12" type="radio" data-infl="cx" data-value="1">&#x4E0D;&#x4F1A;&#xFF0C;&#x6211;&#x7ECF;&#x5E38;&#x642C;&#x5BB6;<br><input name="q12" type="radio" data-infl="cx" data-value="2">&#x4E0D;&#x4F1A;&#xFF0C;&#x6211;&#x4E0D;&#x518D;&#x4E0E;&#x4ED6;&#x4EEC;&#x6709;&#x5171;&#x540C;&#x4E4B;&#x5904;<br></li></ol><h2>&#x7B2C;&#x4E09;&#x5377;&#xFF1A;&#x5BF9;&#x96C6;&#x4F53;&#x7684;&#x770B;&#x6CD5;</h2><ol><li>&#x4F60;&#x4F1A;&#x82B1;&#x65F6;&#x95F4;&#x548C;&#x91D1;&#x94B1;&#x5728;&#x96C6;&#x4F53;&#x4E0A;&#x5417;&#xFF1F;<br><input name="q13" type="radio" data-infl="xg" data-value="2" checked>&#x4F1A;&#xFF0C;&#x6211;&#x4F1A;&#x4F18;&#x5148;&#x8003;&#x8651;&#x96C6;&#x4F53;&#x7684;&#x9700;&#x8981;<br><input name="q13" type="radio" data-infl="xg" data-value="1">&#x5982;&#x679C;&#x6211;&#x7684;&#x9700;&#x6C42;&#x88AB;&#x6EE1;&#x8DB3;&#x7684;&#x8BDD;&#xFF0C;&#x6211;&#x4F1A;&#x5C3D;&#x6211;&#x6240;&#x80FD;<br><input name="q13" type="radio" data-infl="xn" data-value="1">&#x4E0D;&#x4F1A;&#xFF0C;&#x6211;&#x6CA1;&#x94B1;&#x4E5F;&#x4E0D;&#x95F2;<br><input name="q13" type="radio" data-infl="xn" data-value="2">&#x4E0D;&#x4F1A;&#xFF0C;&#x82B1;&#x65F6;&#x95F4;&#x548C;&#x91D1;&#x94B1;&#x5728;&#x96C6;&#x4F53;&#x4E0A;&#x662F;&#x4E00;&#x79CD;&#x6D6A;&#x8D39;<br></li><li>&#x96C6;&#x4F53;&#x9762;&#x4E34;&#x88AB;&#x4FB5;&#x5BB3;&#x7684;&#x5A01;&#x80C1;&#xFF0C;&#x4F60;&#x4F1A;&#xFF1A;<br><input name="q14" type="radio" data-infl="xg" data-value="2" checked>&#x4FDD;&#x536B;&#x5B83;&#x76F4;&#x81F3;&#x81EA;&#x5DF1;&#x7684;&#x6700;&#x540E;&#x4E00;&#x53E3;&#x6C14;<br><input name="q14" type="radio" data-infl="xg" data-value="1">&#x548C;&#x6B8B;&#x5B58;&#x540C;&#x4F34;&#x6784;&#x7B51;&#x9632;&#x5FA1;<br><input name="q14" type="radio" data-infl="xe" data-value="1">&#x4E00;&#x770B;&#x5230;&#x52BF;&#x5934;&#x4E0D;&#x5BF9;&#x5C31;&#x9003;&#x8DD1;<br><input name="q14" type="radio" data-infl="xe" data-value="2">&#x4E0E;&#x5165;&#x4FB5;&#x8005;&#x8FBE;&#x6210;&#x534F;&#x8BAE;&#xFF0C;&#x6210;&#x4E3A;&#x95F4;&#x8C0D;<br></li><li>&#x5982;&#x679C;&#x4F60;&#x53D7;&#x4F24;&#x4E86;&#xFF0C;&#x9700;&#x8981;&#x6025;&#x6551;&#xFF0C;&#x4F60;&#x7684;&#x540C;&#x4F34;&#x613F;&#x610F;&#x5E2E;&#x52A9;&#x4F60;&#x5417;&#xFF1F;<br><input name="q15" type="radio" data-infl="xn" data-value="2" checked>&#x4F1A;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x4ED6;&#x4EEC;&#x77E5;&#x9053;&#x6211;&#x4E5F;&#x4F1A;&#x4E3A;&#x4ED6;&#x4EEC;&#x505A;&#x540C;&#x6837;&#x7684;&#x4E8B;<br><input name="q15" type="radio" data-infl="xn" data-value="1">&#x4F1A;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x5F88;&#x53D7;&#x6B22;&#x8FCE;<br><input name="q15" type="radio" data-infl="xe" data-value="1">&#x53EF;&#x80FD;&#x4E0D;&#x4F1A;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4E0D;&#x53D7;&#x4FE1;&#x4EFB;<br><input name="q15" type="radio" data-infl="xe" data-value="2">&#x80AF;&#x5B9A;&#x4E0D;&#x4F1A;&#xFF0C;&#x6211;&#x5728;&#x96C6;&#x4F53;&#x4E2D;&#x6811;&#x654C;&#x4E86;<br></li><li>&#x4F60;&#x5C0A;&#x91CD;&#x96C6;&#x4F53;&#x7684;&#x89C4;&#x7AE0;&#x548C;&#x9886;&#x8896;&#x5417;&#xFF1F;<br><input name="q16" type="radio" data-infl="lx" data-value="2" checked>&#x6BCB;&#x5EB8;&#x7F6E;&#x7591;&#xFF0C;&#x662F;&#x7684;<br><input name="q16" type="radio" data-infl="lx" data-value="1">&#x662F;&#x7684;&#xFF0C;&#x603B;&#x7684;&#x6765;&#x8BF4;&#x4ED6;&#x4EEC;&#x662F;&#x6700;&#x4F73;&#x7684;&#x7BA1;&#x7406;&#x65B9;&#x5F0F;<br><input name="q16" type="radio" data-infl="cx" data-value="1">&#x5F53;&#x5B83;&#x9002;&#x5408;&#x6211;&#x65F6;&#xFF0C;&#x6211;&#x624D;&#x4F1A;&#x2014;&#x2014;&#x6709;&#x4E9B;&#x89C4;&#x7AE0;&#x6211;&#x5E76;&#x4E0D;&#x8BA4;&#x540C;<br><input name="q16" type="radio" data-infl="cx" data-value="2">&#x6211;&#x4E0D;&#x5173;&#x5FC3;&#x4ED6;&#x4EEC;&#xFF1B;&#x4ED6;&#x4EEC;&#x62FF;&#x6211;&#x6CA1;&#x8F99;<br></li><li>&#x540C;&#x4F34;&#x56DE;&#x907F;&#x4F60;&#xFF0C;&#x6216;&#x5632;&#x7B11;&#x4F60;&#x5417;&#xFF1F;<br><input name="q17" type="radio" data-infl="cx" data-value="2" checked>&#x662F;&#x7684;&#xFF0C;&#x8FD9;&#x4E9B;&#x4E95;&#x5E95;&#x4E4B;&#x86D9;&#x4E0D;&#x4F1A;&#x7406;&#x89E3;&#x8D85;&#x89C4;&#x683C;&#x7684;&#x4EBA;<br><input name="q17" type="radio" data-infl="cx" data-value="1">&#x6709;&#x4E9B;&#x4F1A;&#xFF0C;&#x56E0;&#x4E3A;&#x5E76;&#x4E0D;&#x662F;&#x6240;&#x6709;&#x4EBA;&#x90FD;&#x8BA4;&#x540C;&#x6211;<br><input name="q17" type="radio" data-infl="nx" data-value="1">&#x4E0D;&#x4F1A;&#xFF0C;&#x6211;&#x770B;&#x8D77;&#x6765;&#x4E00;&#x5207;&#x6B63;&#x5E38;<br><input name="q17" type="radio" data-infl="nx" data-value="2">&#x4E0D;&#x4F1A;&#xFF0C;&#x6211;&#x5C31;&#x662F;&#x96C6;&#x4F53;&#x4E2D;&#x7684;&#x6B63;&#x5E38;&#x4EBA;&#x7684;&#x6807;&#x51C6;<br></li><li>&#x4F60;&#x5F53;&#x5B98;&#x4F1A;&#x4E3A;&#x6C11;&#x4F5C;&#x4E3B;&#xFF0C;&#x6216;&#x8005;&#x5E0C;&#x671B;&#x4EE3;&#x8868;&#x96C6;&#x4F53;&#x7684;&#x610F;&#x5FD7;&#x5417;&#xFF1F;<br><input name="q18" type="radio" data-infl="lx" data-value="2" checked>&#x505A;&#x8FD9;&#x79CD;&#x4E8B;&#x662F;&#x6211;&#x6240;&#x4E50;&#x610F;&#x63A5;&#x53D7;&#x7684;&#x8363;&#x8A89;<br><input name="q18" type="radio" data-infl="lx" data-value="1">&#x5F53;&#x7136;&#x3002;&#x8FD9;&#x662F;&#x6BCF;&#x4E2A;&#x4EBA;&#x7684;&#x4E49;&#x52A1;<br><input name="q18" type="radio" data-infl="nx" data-value="1">&#x4E0D;&#x4F1A;&#xFF0C;&#x9664;&#x975E;&#x65E0;&#x4EBA;&#x80FD;&#x63A5;&#x624B;&#x6B64;&#x4E8B;<br><input name="q18" type="radio" data-infl="nx" data-value="2">&#x4E0D;&#x4F1A;&#xFF0C;&#x6211;&#x4E0D;&#x60F3;&#x4E3A;&#x96C6;&#x4F53;&#x5229;&#x76CA;&#x8D1F;&#x8D23;<br></li></ol><h2>&#x7B2C;&#x56DB;&#x5377;&#xFF1A;&#x5BF9;&#x56FD;&#x5BB6;&#x7684;&#x770B;&#x6CD5;</h2><ol><li>&#x4F60;&#x7684;&#x56FD;&#x5BB6;&#x95F9;&#x9965;&#x8352;&#xFF0C;&#x4F60;&#x4F1A;&#xFF1A;<br><input name="q19" type="radio" data-infl="xg" data-value="2" checked>&#x4E0E;&#x5176;&#x4ED6;&#x4EBA;&#x5171;&#x4EAB;&#x81EA;&#x5DF1;&#x6709;&#x7684;&#x98DF;&#x7269;<br><input name="q19" type="radio" data-infl="xg" data-value="1">&#x81EA;&#x5DF1;&#x5403;&#x5C3D;&#x53EF;&#x80FD;&#x5C11;&#xFF0C;&#x4F59;&#x4E0B;&#x7684;&#x7ED9;&#x5176;&#x4ED6;&#x4EBA;<br><input name="q19" type="radio" data-infl="xe" data-value="1">&#x5077;&#x53D6;&#x81EA;&#x5DF1;&#x751F;&#x5B58;&#x6240;&#x9700;&#x98DF;&#x7269;<br><input name="q19" type="radio" data-infl="xe" data-value="2">&#x5077;&#x53D6;&#x5C3D;&#x53EF;&#x80FD;&#x591A;&#x7684;&#x98DF;&#x7269;&#xFF0C;&#x7136;&#x540E;&#x9AD8;&#x4EF7;&#x5356;&#x51FA;<br></li><li>&#x7ED9;&#x4F60;&#x8DB3;&#x591F;&#x7684;&#x94B1;&#xFF0C;&#x4F60;&#x4F1A;&#x5F80;&#x56FD;&#x738B;&#x7684;&#x9152;&#x4E2D;&#x4E0B;&#x6BD2;&#x5417;&#xFF1F;<br><input name="q20" type="radio" data-infl="xe" data-value="2" checked>&#x4F1A;&#xFF0C;&#x7C7B;&#x4F3C;&#x7684;&#x4E8B;&#x6211;&#x5E72;&#x8FC7;&#x4E86;<br><input name="q20" type="radio" data-infl="xe" data-value="1">&#x5982;&#x679C;&#x6211;&#x80FD;&#x9003;&#x907F;&#x60E9;&#x7F5A;&#x7684;&#x8BDD;&#xFF0C;&#x6211;&#x4F1A;&#x7684;<br><input name="q20" type="radio" data-infl="xn" data-value="1">&#x4E0D;&#x4F1A;&#xFF0C;&#x5C3D;&#x7BA1;&#x6211;&#x89C9;&#x5F97;&#x8FD9;&#x4E00;&#x5927;&#x7B14;&#x94B1;&#x5F88;&#x8BF1;&#x4EBA;<br><input name="q20" type="radio" data-infl="xn" data-value="2">&#x4E0D;&#x4F1A;&#xFF0C;&#x800C;&#x4E14;&#x6211;&#x4F1A;&#x53EB;&#x56FD;&#x738B;&#x5C0F;&#x5FC3;&#x8FD9;&#x4E2A;&#x9634;&#x8C0B;<br></li><li>&#x761F;&#x75AB;&#x4F20;&#x904D;&#x4F60;&#x7684;&#x56FD;&#x5BB6;&#xFF0C;&#x4F60;&#x4F1A;&#xFF1A;<br><input name="q21" type="radio" data-infl="xg" data-value="2" checked>&#x63A5;&#x4E0B;&#x5BFB;&#x6C42;&#x89E3;&#x836F;&#x7684;&#x5371;&#x9669;&#x4EFB;&#x52A1;<br><input name="q21" type="radio" data-infl="xg" data-value="1">&#x5C3D;&#x529B;&#x6CBB;&#x597D;&#x75C5;&#x4EBA;<br><input name="q21" type="radio" data-infl="xn" data-value="1">&#x907F;&#x514D;&#x63A5;&#x89E6;&#x5230;&#x75C5;&#x4EBA;<br><input name="q21" type="radio" data-infl="xn" data-value="2">&#x9003;&#x79BB;&#x56FD;&#x5BB6;<br></li><li>&#x4F60;&#x5C0A;&#x91CD;&#x9886;&#x4E3B;&#x7684;&#x6CD5;&#x5F8B;&#x6743;&#x5A01;&#x5417;&#xFF1F;<br><input name="q22" type="radio" data-infl="lx" data-value="2" checked>&#x662F;&#x7684;&#xFF0C;X&#x4E3B;&#x5E2D;&#x4E07;&#x5C81;&#xFF01;<br><input name="q22" type="radio" data-infl="lx" data-value="1">&#x662F;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x7684;&#x7EDF;&#x6CBB;&#x8005;&#x5927;&#x4F53;&#x4E0A;&#x662F;&#x516C;&#x5E73;&#x3001;&#x516C;&#x6B63;&#x7684;<br><input name="q22" type="radio" data-infl="cx" data-value="1">&#x4E0D;&#x4F1A;&#xFF0C;&#x7EDF;&#x6CBB;&#x8005;&#x8FD8;&#x4E0D;&#x662F;&#x4EBA;&#x4E00;&#x4E2A;&#xFF01;<br><input name="q22" type="radio" data-infl="cx" data-value="2">&#x4E0D;&#x4F1A;&#xFF0C;&#x6743;&#x529B;&#x5FC5;&#x5B9A;&#x5BFC;&#x81F4;&#x8150;&#x5316;<br></li><li>&#x7ED9;&#x4F60;&#x4E00;&#x7B14;&#x7A33;&#x8D5A;&#x7684;&#x751F;&#x610F;&#xFF0C;&#x4F60;&#x4F1A;&#x4E3A;&#x654C;&#x56FD;&#x505A;&#x95F4;&#x8C0D;&#x5417;&#xFF1F;<br><input name="q23" type="radio" data-infl="cx" data-value="2" checked>&#x4F1A;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x7684;&#x56FD;&#x5BB6;&#x52BF;&#x5FC5;&#x4EFB;&#x4EBA;&#x9C7C;&#x8089;<br><input name="q23" type="radio" data-infl="cx" data-value="1">&#x4F1A;&#xFF0C;&#x56E0;&#x4E3A;&#x56FD;&#x5BB6;&#x673A;&#x5BC6;&#x5BF9;&#x6211;&#x65E0;&#x5173;&#x7D27;&#x8981;<br><input name="q23" type="radio" data-infl="nx" data-value="1">&#x4E0D;&#x4F1A;&#xFF0C;&#x6211;&#x4F1A;&#x88AB;&#x6293;&#x7684;<br><input name="q23" type="radio" data-infl="nx" data-value="2">&#x4E0D;&#x4F1A;&#xFF0C;&#x6211;&#x4E0D;&#x4F1A;&#x8F9C;&#x8D1F;&#x56FD;&#x5BB6;&#x5BF9;&#x6211;&#x7684;&#x4FE1;&#x4EFB;<br></li><li>&#x4F60;&#x4F9D;&#x9760;&#x653F;&#x5E9C;&#x6765;&#x5EFA;&#x7ACB;&#x793E;&#x4F1A;&#x5951;&#x7EA6;&#x548C;&#x4FDD;&#x969C;&#x6240;&#x6709;&#x6743;&#x5417;&#xFF1F;<br><input name="q24" type="radio" data-infl="lx" data-value="2" checked>&#x662F;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x7EF4;&#x62A4;&#x6CD5;&#x5F8B;&#x6BD4;&#x4EFB;&#x4F55;&#x4E2A;&#x4EBA;&#x4E89;&#x6267;&#x91CD;&#x8981;<br><input name="q24" type="radio" data-infl="lx" data-value="1">&#x662F;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x6CD5;&#x5EAD;&#x5C31;&#x662F;&#x4E3A;&#x4E86;&#x89E3;&#x51B3;&#x8FD9;&#x79CD;&#x4E89;&#x6267;&#x800C;&#x8BBE;&#x7ACB;&#x7684;<br><input name="q24" type="radio" data-infl="nx" data-value="1">&#x4F60;&#x5728;&#x5F00;&#x73A9;&#x7B11;&#x5417;&#xFF1F;&#x653F;&#x5E9C;&#x8FDE;&#x8DEF;&#x90FD;&#x4E0D;&#x4F1A;&#x94FA;<br><input name="q24" type="radio" data-infl="nx" data-value="2">&#x7EDD;&#x5BF9;&#x4E0D;&#x4F1A;&#xFF0C;&#x5982;&#x679C;&#x6211;&#x81EA;&#x5DF1;&#x4E0D;&#x80FD;&#x4FDD;&#x62A4;&#x4E2A;&#x4EBA;&#x6240;&#x6709;&#xFF0C;&#x6211;&#x5C31;&#x65E0;&#x6743;&#x62E5;&#x6709;&#x5B83;<br></li></ol><h2>&#x7B2C;&#x4E94;&#x5377;&#xFF1A;&#x5BF9;&#x5211;&#x7F5A;&#x7684;&#x770B;&#x6CD5;</h2><ol><li>&#x5982;&#x679C;&#x4F60;&#x5165;&#x72F1;&#x4E86;&#xFF0C;&#x4F60;&#x4F1A;&#x4F24;&#x5BB3;&#x6216;&#x6740;&#x6B7B;&#x5176;&#x4ED6;&#x4EBA;&#x800C;&#x8131;&#x72F1;&#x5417;&#xFF1F;<br><input name="q25" type="radio" data-infl="xe" data-value="2" checked>&#x4F1A;&#xFF0C;&#x670D;&#x5211;&#x8FD9;&#x4E48;&#x591A;&#x5E74;&#x7B49;&#x4E8E;&#x9501;&#x4F4F;&#x81EA;&#x5DF1;<br><input name="q25" type="radio" data-infl="xe" data-value="1">&#x4F1A;&#xFF0C;&#x5728;&#x72AF;&#x4E8B;&#x65F6;&#x4FBF;&#x5DF2;&#x77E5;&#x9053;&#x8FD9;&#x98CE;&#x9669;&#x4E86;<br><input name="q25" type="radio" data-infl="xn" data-value="1">&#x4E0D;&#x4F1A;&#xFF0C;&#x9664;&#x975E;&#x53EA;&#x9020;&#x6210;&#x5BB9;&#x6613;&#x6108;&#x5408;&#x7684;&#x5C0F;&#x4F24;<br><input name="q25" type="radio" data-infl="xn" data-value="2">&#x4E0D;&#x4F1A;&#xFF0C;&#x90A3;&#x4E9B;&#x5B88;&#x536B;&#x53EA;&#x662F;&#x5728;&#x5C3D;&#x672C;&#x5206;&#x800C;&#x5DF2;<br></li><li>&#x4F60;&#x63A5;&#x53D7;&#x8D35;&#x65CF;&#x6709;&#x6743;&#x6076;&#x52A3;&#x5BF9;&#x5F85;&#x624B;&#x4E0B;&#x7684;&#x4EC6;&#x4EBA;&#x5417;&#xFF1F;<br><input name="q26" type="radio" data-infl="xn" data-value="2" checked>&#x662F;&#x7684;&#xFF0C;&#x5F88;&#x5E78;&#x8FD0;&#xFF0C;&#x8D35;&#x65CF;&#x4EEC;&#x6295;&#x4E86;&#x4E2A;&#x597D;&#x80CE;<br><input name="q26" type="radio" data-infl="xn" data-value="1">&#x662F;&#x7684;&#xFF0C;&#x6709;&#x65F6;&#x8981;&#x9760;&#x5413;&#xFF0C;&#x4ED6;&#x4EEC;&#x624D;&#x80AF;&#x5E72;&#x6D3B;<br><input name="q26" type="radio" data-infl="xg" data-value="1">&#x4E0D;&#x4F1A;&#xFF0C;&#x8D35;&#x65CF;&#x5E94;&#x4EC1;&#x6148;&#x5730;&#x7EDF;&#x6CBB;<br><input name="q26" type="radio" data-infl="xg" data-value="2">&#x4EFB;&#x4F55;&#x4EBA;&#x90FD;&#x65E0;&#x6743;&#x6076;&#x52A3;&#x5BF9;&#x5F85;&#x522B;&#x4EBA;&#x3002;&#x4EE5;&#x4E0A;&#x3002;<br></li><li>&#x4F60;&#x610F;&#x5916;&#x5730;&#x72AF;&#x7F6A;&#x4E86;&#xFF0C;&#x4F60;&#x4F1A;&#xFF1A;<br><input name="q27" type="radio" data-infl="xg" data-value="2" checked>&#x8BA4;&#x7F6A;&#xFF0C;&#x5E76;&#x5411;&#x53D7;&#x5BB3;&#x8005;&#x8D54;&#x507F;<br><input name="q27" type="radio" data-infl="xg" data-value="1">&#x8BA4;&#x7F6A;&#xFF0C;&#x5411;&#x6CD5;&#x5B98;&#x8BF7;&#x6C42;&#x5BBD;&#x5927;&#x5904;&#x7406;<br><input name="q27" type="radio" data-infl="xe" data-value="1">&#x9690;&#x7792;&#x81EA;&#x5DF1;&#x7684;&#x6D89;&#x6848;&#x4E8B;&#x5B9E;&#xFF0C;&#x5FC5;&#x8981;&#x65F6;&#x8BF4;&#x8C0E;<br><input name="q27" type="radio" data-infl="xe" data-value="2">&#x5AC1;&#x7978;&#x4E8E;&#x4EBA;<br></li><li>&#x5982;&#x679C;&#x72AF;&#x7F6A;&#x4E86;&#xFF0C;&#x4F60;&#x4F1A;&#x8BA4;&#x7F6A;&#x5417;&#xFF1F;<br><input name="q28" type="radio" data-infl="lx" data-value="2" checked>&#x4F1A;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x6709;&#x8FD9;&#x4E2A;&#x8D23;&#x4EFB;<br><input name="q28" type="radio" data-infl="lx" data-value="1">&#x4F1A;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4F1A;&#x56E0;&#x6B64;&#x83B7;&#x5F97;&#x8F7B;&#x5224;<br><input name="q28" type="radio" data-infl="nx" data-value="1">&#x4E0D;&#x4F1A;&#xFF0C;&#x6211;&#x4F1A;&#x7B49;&#x5230;&#x68C0;&#x5BDF;&#x5B98;&#x8BC1;&#x660E;&#x6211;&#x6709;&#x7F6A;<br><input name="q28" type="radio" data-infl="nx" data-value="2">&#x4E0D;&#x4F1A;&#xFF0C;&#x6211;&#x4F1A;&#x8BC1;&#x660E;&#x6211;&#x201C;&#x65E0;&#x7F6A;&#x201D;&#x7684;<br></li><li>&#x5982;&#x679C;&#x53EF;&#x80FD;&#x88AB;&#x60E9;&#x7F5A;&#xFF0C;&#x4F60;&#x4F1A;&#x8868;&#x660E;&#x4E00;&#x4E2A;&#x9769;&#x547D;&#x6027;&#x7684;&#x653F;&#x89C1;&#x5417;&#xFF1F;<br><input name="q29" type="radio" data-infl="cx" data-value="2" checked>&#x4F1A;&#xFF0C;&#x6211;&#x5B81;&#x613F;&#x53D7;&#x7F5A;&#x4E5F;&#x4E0D;&#x613F;&#x4FDD;&#x6301;&#x6C89;&#x9ED8;<br><input name="q29" type="radio" data-infl="cx" data-value="1">&#x4F1A;&#xFF0C;&#x603B;&#x8981;&#x6709;&#x4EBA;&#x8BF4;&#x771F;&#x8BDD;<br><input name="q29" type="radio" data-infl="nx" data-value="1">&#x4E0D;&#x4F1A;&#xFF0C;&#x5C3D;&#x7BA1;&#x79C1;&#x5E95;&#x4E0B;&#x6211;&#x4F1A;&#x5BF9;&#x670B;&#x53CB;&#x8BF4;<br><input name="q29" type="radio" data-infl="nx" data-value="2">&#x4E0D;&#x4F1A;&#xFF0C;&#x4E0D;&#x503C;&#x5F97;&#x4E3A;&#x653F;&#x6CBB;&#x8D39;&#x795E;<br></li><li>&#x65C5;&#x884C;&#x65F6;&#xFF0C;&#x4F60;&#x76EE;&#x51FB;&#x4E86;&#x4E00;&#x573A;&#x88AD;&#x51FB;&#x3002;&#x4F60;&#x88AB;&#x4F20;&#x53BB;&#x4F5C;&#x8BC1;&#xFF0C;&#x8FD9;&#x4F1A;&#x975E;&#x5E38;&#x803D;&#x8BEF;&#x4F60;&#x7684;&#x884C;&#x7A0B;&#x3002;&#x4F60;&#x4F1A;&#xFF1A;<br><input name="q30" type="radio" data-infl="cx" data-value="2" checked>&#x8FDE;&#x591C;&#x6E9C;&#x8D70;&#xFF0C;&#x907F;&#x514D;&#x4F5C;&#x8BC1;<br><input name="q30" type="radio" data-infl="cx" data-value="1">&#x8BF4;&#x81EA;&#x5DF1;&#x4EC0;&#x4E48;&#x4E5F;&#x6CA1;&#x770B;&#x5230;<br><input name="q30" type="radio" data-infl="lx" data-value="1">&#x52C9;&#x5F3A;&#x7559;&#x4E0B;&#xFF0C;&#x4F5C;&#x8BC1;&#xFF0C;&#x7136;&#x540E;&#x79BB;&#x5F00;<br><input name="q30" type="radio" data-infl="lx" data-value="2">&#x7559;&#x4E0B;&#x76F4;&#x81F3;&#x7ED3;&#x6848;&#x6240;&#x9700;&#x8BC1;&#x4F9B;&#x8DB3;&#x591F;<br></li></ol><h2>&#x7B2C;&#x516D;&#x5377;&#xFF1A;&#x5BF9;&#x8D22;&#x5BCC;&#x7684;&#x770B;&#x6CD5;</h2><ol><li>&#x8D22;&#x5BCC;&#x7684;&#x6700;&#x5927;&#x7528;&#x9014;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;<br><input name="q31" type="radio" data-infl="xg" data-value="2" checked>&#x5E2E;&#x52A9;&#x7A77;&#x4EBA;&#x548C;&#x4E0D;&#x5E78;&#x7684;&#x4EBA;<br><input name="q31" type="radio" data-infl="xg" data-value="1">&#x6EE1;&#x8DB3;&#x4EB2;&#x670B;&#x621A;&#x53CB;&#x9700;&#x8981;<br><input name="q31" type="radio" data-infl="xe" data-value="1">&#x8BA9;&#x81EA;&#x5DF1;&#x8FBE;&#x5230;&#x4EBA;&#x751F;&#x5DC5;&#x5CF0;<br><input name="q31" type="radio" data-infl="xe" data-value="2">&#x4E0D;&#x4EC5;&#x8FBE;&#x5230;&#x5DC5;&#x5CF0;&#xFF0C;&#x8FD8;&#x8981;&#x963B;&#x6B62;&#x522B;&#x4EBA;&#x8D85;&#x8FC7;&#x81EA;&#x5DF1;<br></li><li>&#x9047;&#x5230;&#x4E5E;&#x4E10;&#xFF0C;&#x4F60;&#x4F1A;&#xFF1A;<br><input name="q32" type="radio" data-infl="xg" data-value="2" checked>&#x6177;&#x6168;&#x5730;&#x7ED9;&#x94B1;<br><input name="q32" type="radio" data-infl="xg" data-value="1">&#x6070;&#x5230;&#x597D;&#x5904;&#x5730;&#x7ED9;&#x94B1;<br><input name="q32" type="radio" data-infl="xn" data-value="1">&#x53EA;&#x7ED9;&#x6211;&#x8BA4;&#x4E3A;&#x65E0;&#x6240;&#x8C13;&#x7684;&#x94B1;&#x2014;&#x2014;&#x81F3;&#x591A;&#x4E00;&#x4E24;&#x5757;<br><input name="q32" type="radio" data-infl="xn" data-value="2">&#x89C6;&#x800C;&#x4E0D;&#x89C1;<br></li><li>&#x901A;&#x8FC7;&#x9B54;&#x6CD5;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x4F7F;&#x6751;&#x91CC;&#x7684;&#x5546;&#x4EBA;&#x4EEC;&#x4EE5;&#x4E3A;&#x4F60;&#x7684;&#x94DC;&#x5E01;&#x662F;&#x91D1;&#x5E01;&#x3002;&#x4F60;&#x4F1A;&#x8FD9;&#x6837;&#x505A;&#x5417;&#xFF1F;<br><input name="q33" type="radio" data-infl="xe" data-value="2" checked>&#x4F1A;&#xFF0C;&#x800C;&#x4E14;&#x6211;&#x8FD8;&#x8981;&#x5C3D;&#x53EF;&#x80FD;&#x5730;&#x6D88;&#x8D39;<br><input name="q33" type="radio" data-infl="xe" data-value="1">&#x4F1A;&#xFF0C;&#x4F46;&#x53EA;&#x9A97;&#x5BCC;&#x5546;<br><input name="q33" type="radio" data-infl="xn" data-value="1">&#x4E0D;&#x4F1A;&#xFF0C;&#x98CE;&#x9669;&#x592A;&#x5927;&#x4E86;<br><input name="q33" type="radio" data-infl="xn" data-value="2">&#x4E0D;&#x4F1A;&#xFF0C;&#x5546;&#x4EBA;&#x4E5F;&#x8981;&#x517B;&#x5BB6;&#x7CCA;&#x53E3;&#x554A;<br></li><li>&#x4F60;&#x6709;&#x4E24;&#x4EFD;&#x5DE5;&#x4F5C;&#x53EF;&#x4F9B;&#x9009;&#x62E9;&#x3002;&#x4E00;&#x4EFD;&#x916C;&#x52B3;&#x66F4;&#x591A;&#xFF0C;&#x53E6;&#x4E00;&#x4EFD;&#x8F83;&#x7A33;&#x5B9A;&#x3002;&#x4F60;&#x4F1A;&#x9009;&#x54EA;&#x4E00;&#x4EFD;&#xFF1F;<br><input name="q34" type="radio" data-infl="nx" data-value="2" checked>&#x80AF;&#x5B9A;&#x662F;&#x66F4;&#x8D5A;&#x94B1;&#x7684;&#x90A3;&#x4EFD;&#xFF1B;&#x7A33;&#x5B9A;&#x7684;&#x5DE5;&#x4F5C;&#x542C;&#x4E0A;&#x53BB;&#x50CF;&#x82E6;&#x5DEE;&#x4E8B;<br><input name="q34" type="radio" data-infl="nx" data-value="1">&#x53EF;&#x80FD;&#x662F;&#x524D;&#x8005;&#xFF0C;&#x5C3D;&#x7BA1;&#x6211;&#x4F1A;&#x770B;&#x770B;&#x540E;&#x8005;&#x5E72;&#x4E9B;&#x4EC0;&#x4E48;<br><input name="q34" type="radio" data-infl="lx" data-value="1">&#x540E;&#x8005;&#xFF0C;&#x9664;&#x975E;&#x524D;&#x8005;&#x8D5A;&#x7684;&#x94B1;&#x591A;&#x5230;&#x5413;&#x6B7B;&#x4EBA;<br><input name="q34" type="radio" data-infl="lx" data-value="2">&#x80AF;&#x5B9A;&#x662F;&#x7A33;&#x5B9A;&#x7684;&#x90A3;&#x4EFD;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x6709;&#x957F;&#x8FDC;&#x7684;&#x8BA1;&#x5212;<br></li><li>&#x6700;&#x4F73;&#x7684;&#x81F4;&#x5BCC;&#x9014;&#x5F84;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;<br><input name="q35" type="radio" data-infl="cx" data-value="2" checked>&#x8FD9;&#x5173;&#x4E4E;&#x5929;&#x65F6;&#x5730;&#x5229;&#xFF0C;&#x8FD8;&#x6709;&#x4E00;&#x65F6;&#x8FD0;&#x6C14;<br><input name="q35" type="radio" data-infl="cx" data-value="1">&#x7075;&#x6D3B;&#x53D8;&#x901A;&#x4F1A;&#x6709;&#x66F4;&#x591A;&#x673A;&#x4F1A;<br><input name="q35" type="radio" data-infl="lx" data-value="1">&#x6309;&#x7167;&#x4E00;&#x4E2A;&#x6709;&#x9002;&#x5EA6;&#x98CE;&#x9669;&#x7684;&#x957F;&#x671F;&#x8BA1;&#x5212;&#x6765;&#x505A;<br><input name="q35" type="radio" data-infl="lx" data-value="2">&#x52AA;&#x529B;&#x5DE5;&#x4F5C;&#xFF0C;&#x575A;&#x6301;&#x4E0D;&#x61C8;<br></li><li>&#x5982;&#x679C;&#x4F60;&#x63A5;&#x624B;&#x4E00;&#x9879;&#x5DE5;&#x4F5C;&#xFF0C;&#x5C3D;&#x7BA1;&#x5B83;&#x4F1A;&#x5F88;&#x5371;&#x9669;&#xFF0C;&#x4F60;&#x4F1A;&#x52AA;&#x529B;&#x5B8C;&#x6210;&#x5417;&#xFF1F;<br><input name="q36" type="radio" data-infl="nx" data-value="2" checked>&#x4F1A;&#xFF0C;&#x6211;&#x8BF4;&#x8BDD;&#x7B97;&#x6570;<br><input name="q36" type="radio" data-infl="nx" data-value="1">&#x4F1A;&#xFF0C;&#x56E0;&#x4E3A;&#x4EBA;&#x5BB6;&#x4F1A;&#x8BA4;&#x4E3A;&#x6211;&#x4FE1;&#x5F97;&#x8FC7;&#xFF0C;&#x8FD9;&#x5F88;&#x597D;<br><input name="q36" type="radio" data-infl="cx" data-value="1">&#x4F60;&#x53EF;&#x4EE5;&#x8D4C;&#x6211;&#x4F1A;&#x5426;&#x723D;&#x7EA6;<br><input name="q36" type="radio" data-infl="cx" data-value="2">&#x5982;&#x679C;&#x8FD9;&#x4E0D;&#x662F;&#x4EC0;&#x4E48;&#x597D;&#x5DEE;&#x4E8B;&#xFF0C;&#x90A3;&#x7B97;&#x4E86;&#x5427;<br></li></ol><div align="center"><button id="submit" class="button button-inverse button-rounded" type="button">&#x63D0;&#x4EA4;</button></div><div id="result"></div></form></div></body>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;#x672C;&amp;#x7248;&amp;#x6D4B;&amp;#x8BD5;&amp;#x642C;&amp;#x8FD0;&amp;#x81EA;&lt;a href=&quot;http://www.padnd.com/alignment_test2.php&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&amp;#x4E00;&amp;#x4E2A;&amp;#x975E;&amp;#x5B98;&amp;#x65B9;&amp;#x7684;&amp;#x7F51;&amp;#x7AD9;&lt;/a&gt;&amp;#xFF0C;&amp;#x7FFB;&amp;#x8BD1;&amp;#x51FA;&amp;#x81EA;&lt;a href=&quot;https://www.douban.com/group/topic/5049348/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&amp;#x8C46;&amp;#x74E3;&lt;/a&gt;&amp;#x3002;&amp;#x867D;&amp;#x7136;&amp;#x6D4B;&amp;#x8BD5;&amp;#x5E76;&amp;#x975E;&amp;#x51FA;&amp;#x81EA;&amp;#x5B98;&amp;#x7F51;&amp;#xFF0C;&amp;#x4F46;&amp;#x5185;&amp;#x5BB9;&amp;#x662F;&amp;#x4E00;&amp;#x6837;&amp;#x7684;&amp;#x3002;&lt;span class=&quot;spoiler&quot;&gt;&amp;#x4E3A;&amp;#x4EC0;&amp;#x4E48;&amp;#x6211;&amp;#x4E0D;&amp;#x76F4;&amp;#x63A5;&amp;#x642C;&amp;#x5B98;&amp;#x7F51;&amp;#x7684;&amp;#x5462;&amp;#xFF1F;&amp;#x56E0;&amp;#x4E3A;&amp;#x6211;&amp;#x627E;&amp;#x4E0D;&amp;#x5230;&amp;#x5B98;&amp;#x7F51;&amp;#x7684;&amp;#x6D4B;&amp;#x8BD5;&amp;#x7ED3;&amp;#x679C;&amp;#x5904;&amp;#x7406;&amp;#x811A;&amp;#x672C;&amp;#x554A;&amp;#xFF01;&lt;/span&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="杂项" scheme="https://unnamed42.github.io/categories/%E6%9D%82%E9%A1%B9/"/>
    
    
      <category term="测试" scheme="https://unnamed42.github.io/tags/%E6%B5%8B%E8%AF%95/"/>
    
      <category term="DnD" scheme="https://unnamed42.github.io/tags/DnD/"/>
    
  </entry>
  
  <entry>
    <title>hexo spoiler插件</title>
    <link href="https://unnamed42.github.io/2016-06-25-hexo-spoiler%E6%8F%92%E4%BB%B6.html"/>
    <id>https://unnamed42.github.io/2016-06-25-hexo-spoiler插件.html</id>
    <published>2016-06-25T11:23:32.000Z</published>
    <updated>2017-06-10T05:52:13.000Z</updated>
    
    <content type="html"><![CDATA[<p>&#x8FD9;&#x662F;&#x4E2A;&#x65B0;&#x624B;&#x505A;&#x7684;&#x975E;&#x5E38;&#x7B80;&#x5355;&#x7684;&#x63D2;&#x4EF6;&#x3002;</p><p>UPDATE 2016/06/27: &#x6DFB;&#x52A0;&#x70B9;&#x51FB;&#x53EF;&#x89C1;&#x529F;&#x80FD;</p><p>UPDATE 2017/03/13: &#x66F4;&#x6B63;&#x4E00;&#x4E9B;&#x9519;&#x8BEF;&#x77E5;&#x8BC6;</p><a id="more"></a><p>&#x7531;&#x4E8E;&#x770B;&#x5230;&#x4E86;&#x840C;&#x5A18;&#x767E;&#x79D1;&#x548C;Steam&#x7684;&#x9ED1;&#x5E55;&#x63D2;&#x4EF6;&#xFF0C;&#x6211;&#x5C31;&#x840C;&#x751F;&#x4E86;&#x5728;&#x535A;&#x5BA2;&#x4E0A;&#x4E5F;&#x7528;&#x4E0A;&#x8FD9;&#x4E2A;&#x529F;&#x80FD;&#x7684;&#x60F3;&#x6CD5;&#x3002;&#x4E4B;&#x524D;&#x60F3;&#x8868;&#x8FBE;&#x4E00;&#x4E9B;&#x563F;&#x563F;&#x563F;&#x7684;&#x4FE1;&#x606F;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8981;&#x4E48;&#x4F7F;&#x7528;&#x81EA;&#x5E26;&#x7684;&#x5212;&#x7EBF;&#xFF0C;&#x6216;&#x8005;&#x662F;&#x4F7F;&#x7528;<a href="https://github.com/JamesPan/hexo-ruby-character" target="_blank" rel="noopener">hexo-ruby-character</a>&#x3002;&#x4F46;&#x8FD9;&#x4E9B;&#x8FD8;&#x4E0D;&#x591F;&#x559C;&#x611F;&#xFF0C;&#x50CF;&#x840C;&#x5A18;&#x767E;&#x79D1;&#x7684;&#x90A3;&#x79CD;&#x624D;&#x6709;&#x559C;&#x611F;&#xFF0C;&#x7136;&#x800C;&#x5B83;&#x5728;&#x624B;&#x673A;&#x4E0A;&#x5341;&#x5206;&#x86CB;&#x75BC;&#xFF08;&#x624B;&#x673A;&#x4E0A;&#x5C31;&#x7B97;&#x9009;&#x4E2D;&#x4E86;&#x4E5F;&#x770B;&#x4E0D;&#x5230;&#x5185;&#x5BB9;&#xFF0C;&#x800C;&#x4E14;&#x90A3;&#x4E2A;&#x9ED1;&#x6761;&#x4E5F;&#x4E0D;&#x662F;&#x70B9;&#x51FB;&#x6D88;&#x5931;&#x7684;&#xFF09;&#x3002;&#x6211;&#x7684;&#x5C0F;&#x4F19;&#x4F34;&#x4E5F;&#x505A;&#x4E86;&#x4E2A;&#x9ED1;&#x5E55;&#x63D2;&#x4EF6;&#xFF0C;&#x5728;&#x6B64;&#x6253;&#x4E2A;<a href="https://github.com/MaoKwen/hexo-black-cover" target="_blank" rel="noopener">&#x5E7F;&#x544A;</a><span class="spoiler">&#x6211;&#x6CA1;&#x7528;&#x8FC7;&#xFF0C;&#x4E0D;&#x77E5;&#x9053;&#x600E;&#x6837;&#xFF0C;&#x6548;&#x679C;&#x4E0D;&#x597D;&#x4E0D;&#x8981;&#x6253;&#x6211;</span>&#x3002;</p><p>&#x4ECA;&#x5929;&#x505A;&#x5236;&#x4F5C;&#x51C6;&#x5907;&#x5DE5;&#x4F5C;&#x7684;&#x65F6;&#x5019;&#xFF08;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x5728;&#x5404;&#x7F51;&#x7AD9;&#x641C;&#x522E;css&#x548C;&#x811A;&#x672C;&#xFF09;&#xFF0C;&#x5076;&#x7136;&#x95F4;&#x53D1;&#x73B0;&#x4E86;<a href="https://meta.discourse.org/t/folding-spoilers/16123/2" target="_blank" rel="noopener">&#x8FD9;&#x4E2A;&#x7F51;&#x7AD9;</a>&#xFF0C;&#x4ED6;&#x81EA;&#x5E26;&#x7684;spoiler&#x662F;&#x7C7B;&#x4F3C;&#x9AD8;&#x65AF;&#x6A21;&#x7CCA;&#x6548;&#x679C;&#xFF0C;&#x70B9;&#x51FB;&#x53EF;&#x6D88;&#x5931;&#xFF0C;&#x6211;&#x4E00;&#x4E0B;&#x5C31;&#x5FC3;&#x52A8;&#x4E86;&#xFF0C;&#x4EFF;&#x7167;&#x4ED6;&#x4EEC;&#x7684;&#x505A;&#x4E86;&#x8FD9;&#x4E48;&#x4E2A;&#x63D2;&#x4EF6;&#x3002;</p><h2 id="&#x5B89;&#x88C5;&#x4E0E;&#x4F7F;&#x7528;">&#x5B89;&#x88C5;&#x4E0E;&#x4F7F;&#x7528;</h2><p>&#x5B89;&#x88C5;&#xFF1A;</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-spoiler --save</span><br></pre></td></tr></table></figure><p>&#x4F7F;&#x7528;&#xFF1A;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">{% spoiler text %}</span><br></pre></td></tr></table></figure><h2 id="&#x6210;&#x679C;&#x5C55;&#x793A;">&#x6210;&#x679C;&#x5C55;&#x793A;</h2><p>&#x53EF;&#x4EE5;&#x906E;&#x853D;&#x6B63;&#x5E38;&#x6587;&#x672C;&#xFF1A;<span class="spoiler">text</span></p><p>&#x53EF;&#x4EE5;&#x906E;&#x853D;&#x5E26;&#x683C;&#x5F0F;&#x7684;&#x6587;&#x672C;&#xFF1A;<span class="spoiler"><em>text</em> <strong>text</strong> <s>text</s></span></p><p>&#x53EF;&#x4EE5;&#x906E;&#x853D;&#x884C;&#x5185;&#x4EE3;&#x7801;&#xFF0C;&#x4F46;&#x662F;&#x6548;&#x679C;&#x975E;&#x5E38;&#x5DEE;&#xFF1A;<span class="spoiler"><code>code</code></span></p><h2 id="&#x7F3A;&#x70B9;">&#x7F3A;&#x70B9;</h2><ol><li><p>&#x5F53;&#x5185;&#x90E8;&#x6709;&#x4EE3;&#x7801;&#x5757;&#x7684;&#x65F6;&#x5019;&#x6548;&#x679C;&#x975E;&#x5E38;&#x7CDF;&#x7CD5;</p></li><li><p><del>&#x53EA;&#x662F;&#x9F20;&#x6807;&#x5212;&#x8FC7;&#x7684;&#x65F6;&#x5019;&#x663E;&#x793A;&#x6587;&#x672C;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x50CF;&#x539F;&#x7F51;&#x7AD9;&#x90A3;&#x6837;&#x70B9;&#x51FB;&#x663E;&#x793A;&#x6587;&#x672C;&#xFF0C;&#x518D;&#x70B9;&#x51FB;&#x9690;&#x85CF; <span class="spoiler">&#x6211;&#x89C9;&#x5F97;&#x4ED6;&#x4EEC;&#x80AF;&#x5B9A;&#x7528;&#x4E86;js&#x811A;&#x672C;</span></del>&#x70B9;&#x51FB;&#x53EF;&#x9690;&#x85CF;&#xFF0C;&#x518D;&#x70B9;&#x51FB;&#x6D88;&#x5931;<del>&#xFF0C;&#x4F46;&#x7F3A;&#x5C11;&#x52A8;&#x753B;&#x6548;&#x679C;</del>&#x3002;</p></li><li><p>&#x76EE;&#x524D;&#x5B83;&#x4EA7;&#x751F;&#x7684;HTML&#x4EE3;&#x7801;&#x662F;<code>&lt;span&gt;</code>&#x5305;&#x8D77;&#x6765;&#x7684;&#xFF0C;&#x800C;&#x4E14;&#x6211;&#x53BB;&#x9664;&#x4E86;&#x5B83;&#x6E32;&#x67D3;&#x65F6;&#x751F;&#x6210;&#x7684;<code>&lt;p&gt;</code>, &#x6240;&#x4EE5;&#x5982;&#x679C;&#x4F60;&#x9700;&#x8981;&#x6362;&#x884C;&#x7684;&#x8BDD;&#x4E5F;&#x8BB8;&#x9700;&#x8981;&#x81EA;&#x5DF1;&#x624B;&#x52A8;&#x52A0;&#x4E0A;<code>&lt;br&gt;</code></p></li><li><p><del>&#x5728;&#x624B;&#x673A;&#x4E0A;&#x4F1A;&#x6709;&#x70B9;&#x5361;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x4F3C;&#x4E4E;&#x5148;&#x89E6;&#x53D1;<code>hover</code>&#x6548;&#x679C;&#x518D;&#x89E6;&#x53D1;<code>click</code>&#x4E8B;&#x4EF6;&#x3002;</del>&#x5DF2;&#x7ECF;&#x65E0;&#x6240;&#x8C13;&#x4E86;</p></li></ol><h2 id="&#x80CC;&#x540E;&#x7684;&#x6545;&#x4E8B;">&#x80CC;&#x540E;&#x7684;&#x6545;&#x4E8B;</h2><p>&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x6284;&#x88AD;&#x90A3;&#x4E2A;&#x7F51;&#x7AD9;&#x7684;css, &#x5728;&#x6BCF;&#x4E2A;&#x6587;&#x7AE0;&#x7684;&#x6B63;&#x6587;&#x4E2D;&#x90FD;&#x690D;&#x5165;&#x8FD9;&#x4E2A;css. css&#x957F;&#x8FD9;&#x6837;&#xFF1A;</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">span</span><span class="selector-class">.spoiler</span> {</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">rgba</span>(0, 0, 0, 0);</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(0, 0, 0, 0);</span><br><span class="line">    <span class="attribute">text-shadow</span>: grey <span class="number">0px</span> <span class="number">0px</span> <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">}</span><br><span class="line"><span class="selector-tag">span</span><span class="selector-class">.spoiler</span><span class="selector-pseudo">:hover</span> {</span><br><span class="line">    <span class="attribute">text-shadow</span>: grey <span class="number">0px</span> <span class="number">0px</span> <span class="number">5px</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-tag">span</span><span class="selector-class">.spoiler</span><span class="selector-class">.revealed</span> {</span><br><span class="line">    <span class="attribute">text-shadow</span>: grey <span class="number">0px</span> <span class="number">0px</span> <span class="number">0px</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x7136;&#x540E;&#x7ED9;&#x6BCF;&#x4E2A;&#x9700;&#x8981;&#x906E;&#x853D;&#x7684;&#x6587;&#x672C;&#x6E32;&#x67D3;&#x540E;&#x7528;<code>&lt;span class=&quot;spoiler&quot;&gt;</code>&#x6846;&#x8D77;&#x6765;&#x3002;&#x4F7F;&#x7528;jQuery&#x6216;&#x8005;&#x662F;DOM API&#x6765;&#x5904;&#x7406;&#x5B83;&#x7684;&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#xFF0C;&#x901A;&#x8FC7;&#x52A0;&#x4E0A;<code>revealed</code>&#x6765;&#x4F7F;&#x9A6C;&#x8D5B;&#x514B;&#x6D88;&#x5931;&#x6216;&#x663E;&#x793A;&#xFF1A;</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line">    <span class="keyword">var</span> spoiler = <span class="built_in">document</span>.getElementsByClassName(<span class="string">&quot;spoiler&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; spoiler.length; ++i) {</span><br><span class="line">        spoiler[i].addEventListener(<span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">            <span class="keyword">this</span>.classList.toggle(<span class="string">&quot;revealed&quot;</span>);</span><br><span class="line">        });</span><br><span class="line">    }</span><br><span class="line">})();</span><br></pre></td></tr></table></figure><p>&#x5C31;&#x662F;&#x8FD9;&#x4E48;&#x7B80;&#x5355;&#x3002;&#x4E3A;&#x4EC0;&#x4E48;&#x6211;&#xFF08;&#x521D;&#x7248;&#xFF09;&#x505A;&#x4E86;&#x4E00;&#x5929;&#x5462;&#xFF1F;<span class="spoiler">&#x56E0;&#x4E3A;&#x4F60;&#x667A;&#x969C;&#x554A;</span></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;#x8FD9;&amp;#x662F;&amp;#x4E2A;&amp;#x65B0;&amp;#x624B;&amp;#x505A;&amp;#x7684;&amp;#x975E;&amp;#x5E38;&amp;#x7B80;&amp;#x5355;&amp;#x7684;&amp;#x63D2;&amp;#x4EF6;&amp;#x3002;&lt;/p&gt;&lt;p&gt;UPDATE 2016/06/27: &amp;#x6DFB;&amp;#x52A0;&amp;#x70B9;&amp;#x51FB;&amp;#x53EF;&amp;#x89C1;&amp;#x529F;&amp;#x80FD;&lt;/p&gt;&lt;p&gt;UPDATE 2017/03/13: &amp;#x66F4;&amp;#x6B63;&amp;#x4E00;&amp;#x4E9B;&amp;#x9519;&amp;#x8BEF;&amp;#x77E5;&amp;#x8BC6;&lt;/p&gt;
    
    </summary>
    
      <category term="杂项" scheme="https://unnamed42.github.io/categories/%E6%9D%82%E9%A1%B9/"/>
    
    
      <category term="Hexo" scheme="https://unnamed42.github.io/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>二叉树的遍历-无栈</title>
    <link href="https://unnamed42.github.io/2016-06-22-2016-06-022-%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E9%81%8D%E5%8E%86-%E6%97%A0%E6%A0%88.html"/>
    <id>https://unnamed42.github.io/2016-06-22-2016-06-022-二叉树的遍历-无栈.html</id>
    <published>2016-06-22T13:42:30.000Z</published>
    <updated>2017-06-10T05:52:14.000Z</updated>
    
    <content type="html"><![CDATA[<p>一个在数据结构领域被艹了又艹的话题。本文只涉及使用指向父节点的指针<code>parent</code>来遍历二叉树（不包含层次遍历），并将其包装为迭代器。</p><p>UPDATE 2016/06/22: 将不使用栈的部分从原来的大文章中分离出来</p><p>UPDATE 2016/10/28: 文章名从“二叉树的遍历-迭代器”改为“二叉树的遍历-无栈”，并将使用栈的迭代器移到对应文章</p><a id="more"></a><h2 id="直接遍历">直接遍历</h2><h3 id="有关约定">有关约定</h3><p>树节点定义如下：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">TreeNode</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> data;</span><br><span class="line">    TreeNode *left,*right,*parent;</span><br><span class="line">    </span><br><span class="line">    TreeNode(<span class="keyword">int</span> x):data(x),left(<span class="literal">nullptr</span>),right(<span class="literal">nullptr</span>),parent(<span class="literal">nullptr</span>) &#123;&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>代码中的<code>Func</code>是函数类，也可以用函数指针/<code>std::function</code>替换之。</p><h3 id="不使用栈">不使用栈</h3><p>由于我的迭代器中不包含栈，所以首先要讨论这种不使用栈的方法，将循环的主体提取出来就是迭代器自增的逻辑。</p><p>为了达到回溯的目的，必须给节点添加上父节点的指针，否则遍历无法进行。虽然这种方法无需额外的辅助工具，但相比使用栈的算法，由于每个节点都多了一个<code>parent</code>指针，额外空间就相当于变成了$O(n)$（只是相比使用栈的，实际讨论起来这是个$O(1)$的算法）。</p><p>在这一类算法中，必须要用到各种遍历前后相邻节点的关系。</p><h4 id="前序遍历">前序遍历</h4><p>设当前节点为<code>node</code>, 父节点为<code>parent</code>. 在访问<code>node</code>之后，可有如下几种去向：</p><ol><li><p>向左进发；</p></li><li><p>左边已经访问过（或为空）时向右进发；</p></li><li><p>都访问过时向上回溯。</p></li></ol><p>前两个都很好理解，只是第三个需要进行一番讨论。从<code>node</code>向上回溯时，根据前序遍历特性可以认为以<code>node</code>为根的子树已经遍历完毕，其父节点<code>parent</code>也已访问过。回溯至<code>parent</code>, 如果<code>node</code>是<code>parent</code>的左子树，则对<code>parent</code>来说是左子树已经遍历完毕了，应该向<code>parent</code>的右子树进发；如果<code>node</code>是<code>parent</code>的右子树，此时<code>parent</code>的情况与<code>node</code>相同，此时令<code>node=parent</code>, <code>parent=parent-&gt;parent</code>, 循环处理。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">Func</span>&gt; <span class="title">void</span> <span class="title">preorder</span>(<span class="title">TreeNode</span> *<span class="title">root</span>,<span class="title">Func</span> <span class="title">visit</span>)&#123;</span></span><br><span class="line">    <span class="keyword">while</span>(root!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">        visit(root-&gt;data);</span><br><span class="line">        <span class="keyword">if</span>(root-&gt;left!=<span class="literal">nullptr</span>)</span><br><span class="line">            root=root-&gt;left;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(root-&gt;right!=<span class="literal">nullptr</span>)</span><br><span class="line">            root=root-&gt;right;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">auto</span> parent=root-&gt;parent;</span><br><span class="line">            <span class="keyword">while</span>(parent!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>(root==parent-&gt;left &amp;&amp; parent-&gt;right!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">                    root=parent-&gt;right;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="comment">/* if(root==parent-&gt;right) */</span> &#123;</span><br><span class="line">                    root=parent;</span><br><span class="line">                    parent=parent-&gt;parent;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(parent==<span class="literal">nullptr</span>)</span><br><span class="line">                root=<span class="literal">nullptr</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="中序遍历">中序遍历</h4><p>设当前节点为<code>node</code>, 父节点为<code>parent</code>. 在访问<code>node</code>之后，考虑到中序遍历特点我们可以认为<code>node</code>的左子树已经遍历完毕。因此，<code>node</code>可有如下几种去向：</p><ol><li><p>向右进发；</p></li><li><p>若右已经访问过（或为空），向上回溯。</p></li></ol><p>回溯至<code>parent</code>之后，如果<code>node</code>是<code>parent</code>的左子树，对<code>parent</code>来说要向右进发；如果<code>node</code>是<code>parent</code>的右子树，则对<code>parent</code>来说左右都已访问完毕，情况同<code>node</code>，即可令<code>node=parent</code>, <code>parent=parent-&gt;parent</code>, 循环处理。</p><p>由于中序遍历不是直接从树的根开始，因此要找到遍历的起始节点。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">TreeNode* <span class="title">inorder_first</span><span class="params">(TreeNode *root)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(root==<span class="literal">nullptr</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">    <span class="keyword">while</span>(root-&gt;left!=<span class="literal">nullptr</span>)</span><br><span class="line">        root=root-&gt;left;</span><br><span class="line">    <span class="keyword">return</span> root;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">Func</span>&gt; <span class="title">void</span> <span class="title">inorder</span>(<span class="title">TreeNode</span> *<span class="title">root</span>,<span class="title">Func</span> <span class="title">visit</span>)&#123;</span></span><br><span class="line">    root=inorder_first(root);</span><br><span class="line">    <span class="keyword">while</span>(root!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">        visit(root-&gt;data);</span><br><span class="line">        <span class="keyword">if</span>(root-&gt;right!=<span class="literal">nullptr</span>)</span><br><span class="line">            root=inorder_first(root-&gt;right);</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">auto</span> parent=root-&gt;parent;</span><br><span class="line">            <span class="keyword">while</span>(parent!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>(root==parent-&gt;left)&#123;</span><br><span class="line">                    root=parent;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125; <span class="comment">/* else if(root==parent-&gt;right) */</span></span><br><span class="line">                root=parent;</span><br><span class="line">                parent=parent-&gt;parent;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(parent==<span class="literal">nullptr</span>)</span><br><span class="line">                root=<span class="literal">nullptr</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="后序遍历">后序遍历</h4><p>设当前节点为<code>node</code>, 父节点为<code>parent</code>. 在访问<code>node</code>之后，考虑到后序遍历特点我们可以认为<code>node</code>的左右子树均已遍历完毕。因此，<code>node</code>只能向上回溯。</p><p>回溯至<code>parent</code>之后，如果<code>node</code>是<code>parent</code>的左子树，对<code>parent</code>来说接下来要遍历右子树；如果<code>node</code>是<code>parent</code>的右子树，则对<code>parent</code>来说左右已经访问完毕，情况同<code>node</code>，即可令<code>node=parent</code>, <code>parent=parent-&gt;parent</code>, 循环处理。</p><p>由于后序遍历不是直接从树的根开始，因此也要找到它起始节点。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">TreeNode* <span class="title">postorder_first</span><span class="params">(TreeNode *root)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(root==<span class="literal">nullptr</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">    <span class="keyword">for</span>(;;)&#123;</span><br><span class="line">        <span class="keyword">if</span>(root-&gt;left!=<span class="literal">nullptr</span>)</span><br><span class="line">            root=root-&gt;left;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(root-&gt;right!=<span class="literal">nullptr</span>)</span><br><span class="line">            root=root-&gt;right;</span><br><span class="line">        <span class="keyword">else</span> </span><br><span class="line">            <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">Func</span>&gt; <span class="title">void</span> <span class="title">postorder</span>(<span class="title">TreeNode</span> *<span class="title">root</span>,<span class="title">Func</span> <span class="title">visit</span>)&#123;</span></span><br><span class="line">    root=postorder_first(root);</span><br><span class="line">    <span class="keyword">while</span>(root!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">        visit(root-&gt;data);</span><br><span class="line">        <span class="keyword">auto</span> parent=root-&gt;parent;</span><br><span class="line">        <span class="keyword">if</span>(parent!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(root==parent-&gt;left &amp;&amp; parent-&gt;right!=<span class="literal">nullptr</span>)</span><br><span class="line">                root=postorder_first(parent-&gt;right);</span><br><span class="line">            <span class="keyword">else</span> <span class="comment">/* if(root==parent-&gt;right) */</span></span><br><span class="line">                root=parent;</span><br><span class="line">        &#125; <span class="keyword">else</span> </span><br><span class="line">            root=<span class="literal">nullptr</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="迭代器遍历">迭代器遍历</h2><h3 id="有关约定-v2">有关约定</h3><p>迭代器有关接口声明如下：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">iterator</span>&#123;</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        iterator(TreeNode *root); <span class="comment">// 待实现</span></span><br><span class="line">        iterator(<span class="keyword">const</span> iterator &amp;o):m_cursor(o.m_cursor) &#123;&#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span>&amp; <span class="keyword">operator</span>*() <span class="keyword">const</span> &#123;<span class="keyword">return</span> m_cursor-&gt;data;&#125;</span><br><span class="line">        <span class="keyword">int</span>* <span class="keyword">operator</span>-&gt;() <span class="keyword">const</span> &#123;<span class="keyword">return</span> &amp;<span class="keyword">operator</span>*();&#125;</span><br><span class="line">        iterator&amp; <span class="keyword">operator</span>++(); <span class="comment">// 待实现</span></span><br><span class="line">        iterator <span class="keyword">operator</span>++(<span class="keyword">int</span>) &#123;<span class="keyword">auto</span> i=*<span class="keyword">this</span>; <span class="keyword">operator</span>++(); <span class="keyword">return</span> i;&#125;</span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        TreeNode *m_cursor;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>注意：</p><ol><li><p><code>operator++()</code>所实现的操作是找到在遍历序列中，当前节点的下一个节点。我们应该认为当前节点已经访问过了。</p></li><li><p>在下文中，虽然三种遍历算法的迭代器都叫<code>iterator</code>, 但实际上是三种不同的类型。为描述简单起见我共用一个名称。</p></li><li><p>在这里<code>operator-&gt;()</code>是非必须的，如果使用会导致编译错误。但设计成泛型迭代器的话那么就是必须要重载的一个重要运算符了。</p></li><li><p>如果想和STL接轨，迭代器实现起来不会如此简单，还要定义一大堆类型别名，设置迭代器种类等。该迭代器由于只能自增，因此属于<a href="http://en.cppreference.com/w/cpp/concept/ForwardIterator" target="_blank" rel="noopener"><code>ForwardIterator</code></a>.</p></li></ol><h3 id="具体实现">具体实现</h3><p>比起有栈的版本，不使用栈的版本更好拆分。我们可以认为while循环之前的部分是迭代器初始化，while循环之内除去<code>visit</code>的部分是一次<code>operator++()</code>.</p><h4 id="前序遍历-v2">前序遍历</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">iterator::iterator(TreeNode *root):m_cursor(root) &#123;&#125;</span><br><span class="line"></span><br><span class="line">iterator&amp; iterator::<span class="keyword">operator</span>++()&#123;</span><br><span class="line">    <span class="keyword">if</span>(m_cursor==<span class="literal">nullptr</span>)</span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">if</span>(m_cursor-&gt;left!=<span class="literal">nullptr</span>)</span><br><span class="line">        m_cursor=m_cursor-&gt;left;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(m_cursor-&gt;right!=<span class="literal">nullptr</span>)</span><br><span class="line">        m_cursor=m_cursor-&gt;right;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">auto</span> parent=m_cursor-&gt;parent;</span><br><span class="line">        <span class="keyword">while</span>(parent!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(parent-&gt;right==<span class="literal">nullptr</span> || m_cursor==parent-&gt;right)&#123;</span><br><span class="line">                m_cursor=parent;</span><br><span class="line">                parent=parent-&gt;parent;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                m_cursor=parent-&gt;right;</span><br><span class="line">                <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        m_cursor=<span class="literal">nullptr</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="中序遍历-v2">中序遍历</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">iterator::iterator(TreeNode *root):m_cursor(root)&#123;</span><br><span class="line">    <span class="keyword">if</span>(m_cursor==<span class="literal">nullptr</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">while</span>(m_cursor-&gt;left!=<span class="literal">nullptr</span>)</span><br><span class="line">        m_cursor=m_cursor-&gt;left;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">iterator&amp; iterator::<span class="keyword">operator</span>++()&#123;</span><br><span class="line">    <span class="keyword">if</span>(m_cursor==<span class="literal">nullptr</span>)</span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">if</span>(m_cursor-&gt;right!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">        m_cursor=m_cursor-&gt;right;</span><br><span class="line">        <span class="keyword">while</span>(m_cursor-&gt;left!=<span class="literal">nullptr</span>)</span><br><span class="line">            m_cursor=m_cursor-&gt;left;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">auto</span> parent=m_cursor-&gt;parent;</span><br><span class="line">        <span class="keyword">while</span>(parent!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(m_cursor==parent-&gt;left)&#123;</span><br><span class="line">                m_cursor=parent;</span><br><span class="line">                <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            m_cursor=parent;</span><br><span class="line">            parent=parent-&gt;parent;</span><br><span class="line">        &#125;</span><br><span class="line">        m_cursor=<span class="literal">nullptr</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="后序遍历-v2">后序遍历</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 辅助用函数</span></span><br><span class="line"><span class="function">TreeNode* <span class="title">next</span><span class="params">(TreeNode *root)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(root==<span class="literal">nullptr</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">    <span class="keyword">for</span>(;;)&#123;</span><br><span class="line">        <span class="keyword">if</span>(root-&gt;left!=<span class="literal">nullptr</span>)</span><br><span class="line">            root=root-&gt;left;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(root-&gt;right!=<span class="literal">nullptr</span>)</span><br><span class="line">            root=root-&gt;right;</span><br><span class="line">        <span class="keyword">else</span> </span><br><span class="line">            <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">iterator::iterator(TreeNode *root):m_cursor(next(root)) &#123;&#125;</span><br><span class="line"></span><br><span class="line">iterator&amp; iterator::<span class="keyword">operator</span>++()&#123;</span><br><span class="line">    <span class="keyword">if</span>(m_cursor==<span class="literal">nullptr</span>)</span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">auto</span> parent=m_cursor-&gt;parent;</span><br><span class="line">    <span class="keyword">if</span>(parent!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(m_cursor==parent-&gt;left &amp;&amp; parent-&gt;right!=<span class="literal">nullptr</span>)</span><br><span class="line">            m_cursor=next(parent-&gt;right);</span><br><span class="line">        <span class="keyword">else</span> </span><br><span class="line">            m_cursor=parent;</span><br><span class="line">    &#125; <span class="keyword">else</span> </span><br><span class="line">        m_cursor=<span class="literal">nullptr</span>;</span><br><span class="line">    <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;一个在数据结构领域被艹了又艹的话题。本文只涉及使用指向父节点的指针&lt;code&gt;parent&lt;/code&gt;来遍历二叉树（不包含层次遍历），并将其包装为迭代器。&lt;/p&gt;&lt;p&gt;UPDATE 2016/06/22: 将不使用栈的部分从原来的大文章中分离出来&lt;/p&gt;&lt;p&gt;UPDATE 2016/10/28: 文章名从“二叉树的遍历-迭代器”改为“二叉树的遍历-无栈”，并将使用栈的迭代器移到对应文章&lt;/p&gt;
    
    </summary>
    
      <category term="编程" scheme="https://unnamed42.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
    
      <category term="算法" scheme="https://unnamed42.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>二叉树的遍历-栈</title>
    <link href="https://unnamed42.github.io/2016-06-22-%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E9%81%8D%E5%8E%86-%E6%A0%88.html"/>
    <id>https://unnamed42.github.io/2016-06-22-二叉树的遍历-栈.html</id>
    <published>2016-06-22T13:42:30.000Z</published>
    <updated>2017-06-10T05:52:14.000Z</updated>
    
    <content type="html"><![CDATA[<p>一个在数据结构领域被艹了又艹的话题。本文只涉及使用栈来遍历二叉树（不包含层次遍历），并将其包装为迭代器。</p><p>UPDATE 2016/06/22: 将栈的部分从原来的大文章中分离出来</p><p>UPDATE 2016/10/28: 拿回了属于自己的迭代器</p><a id="more"></a><h2 id="直接遍历">直接遍历</h2><h3 id="有关约定">有关约定</h3><p>树节点定义如下：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">TreeNode</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> data;</span><br><span class="line">    TreeNode *left,*right;</span><br><span class="line">    </span><br><span class="line">    TreeNode(<span class="keyword">int</span> x):data(x),left(<span class="literal">nullptr</span>),right(<span class="literal">nullptr</span>) &#123;&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>代码中的<code>Func</code>是函数类，也可以用函数指针/<code>std::function</code>替换之。</p><h3 id="使用系统栈">使用系统栈</h3><p>这绝对是简单到爆的一个实现方法了，不可能还有比这更简单的了。几乎就是照着这几种遍历的定义翻译到程序代码，因此不做过多解释。</p><h4 id="前序遍历">前序遍历</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">Func</span>&gt; <span class="title">void</span> <span class="title">preorder</span>(<span class="title">TreeNode</span> *<span class="title">root</span>,<span class="title">Func</span> <span class="title">visit</span>)&#123;</span></span><br><span class="line">    <span class="keyword">if</span>(root==<span class="literal">nullptr</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    visit(root-&gt;data);</span><br><span class="line">    preorder(root-&gt;left,visit);</span><br><span class="line">    preorder(root-&gt;right,visit);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="中序遍历">中序遍历</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">Func</span>&gt; <span class="title">void</span> <span class="title">inorder</span>(<span class="title">TreeNode</span> *<span class="title">root</span>,<span class="title">Func</span> <span class="title">visit</span>)&#123;</span></span><br><span class="line">    <span class="keyword">if</span>(root==<span class="literal">nullptr</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    inorder(root-&gt;left,visit);</span><br><span class="line">    visit(root-&gt;data);</span><br><span class="line">    inorder(root-&gt;right,visit);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="后序遍历">后序遍历</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">Func</span>&gt; <span class="title">void</span> <span class="title">postorder</span>(<span class="title">TreeNode</span> *<span class="title">root</span>,<span class="title">Func</span> <span class="title">visit</span>)&#123;</span></span><br><span class="line">    <span class="keyword">if</span>(root==<span class="literal">nullptr</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    postorder(root-&gt;left,visit);</span><br><span class="line">    postorder(root-&gt;right,visit);</span><br><span class="line">    visit(root-&gt;data);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="使用自定义栈">使用自定义栈</h3><p>难度开始逐步提升了。在抛开了系统栈之后，我们应该如何使用自定义栈来<strong>替换</strong>掉系统栈呢？</p><h4 id="前序遍历-v2">前序遍历</h4><p>观察原来使用系统栈的算法，先访问当前节点，之后向左走，再之后向右走。如果只是对系统栈无脑地模拟的话，向左走时把当前节点入栈，完成后退栈；向右走时同法。但在向右走时这一个调用（<code>preorder(root-&gt;right,visit)</code>）属于尾递归，此时不需要入栈，直接替换掉对应变量值即可。</p><p>总结一下，先访问当前节点；将右边入栈；节点值替换成左节点，循环。当前支路走无可走之时，弹栈，继续；此时如果栈空，结束。循环这整个过程。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">Func</span>&gt; <span class="title">void</span> <span class="title">preorder</span>(<span class="title">TreeNode</span> *<span class="title">root</span>,<span class="title">Func</span> <span class="title">visit</span>)&#123;</span></span><br><span class="line">    <span class="keyword">if</span>(root==<span class="literal">nullptr</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">stack</span>&lt;TreeNode*&gt; <span class="built_in">stack</span>;</span><br><span class="line">    <span class="keyword">while</span>(root!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">        visit(root-&gt;data);</span><br><span class="line">        <span class="keyword">if</span>(root-&gt;right!=<span class="literal">nullptr</span>)</span><br><span class="line">            <span class="built_in">stack</span>.push(root-&gt;right);</span><br><span class="line">        <span class="keyword">if</span>(root-&gt;left!=<span class="literal">nullptr</span>)</span><br><span class="line">            root=root-&gt;left;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">stack</span>.empty())</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            root=<span class="built_in">stack</span>.top();</span><br><span class="line">            <span class="built_in">stack</span>.pop();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="中序遍历-v2">中序遍历</h4><p>同样对系统栈进行模拟，参考前序的流程，中序的流程如下：将当前节点入栈，向左走走到黑；不可走时弹栈（如果栈空则结束），访问该节点，之后向右走一步。如果向右走遇到空，重复弹栈-访问-向右的操作。循环这整个过程。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">Func</span>&gt; <span class="title">void</span> <span class="title">inorder</span>(<span class="title">TreeNode</span> *<span class="title">root</span>,<span class="title">Func</span> <span class="title">visit</span>)&#123;</span></span><br><span class="line">    <span class="keyword">if</span>(root==<span class="literal">nullptr</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">stack</span>&lt;TreeNode*&gt; <span class="built_in">stack</span>;</span><br><span class="line">    <span class="keyword">while</span>(root!=<span class="literal">nullptr</span>||!<span class="built_in">stack</span>.empty())&#123;</span><br><span class="line">        <span class="keyword">if</span>(root!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">            <span class="built_in">stack</span>.push(root);</span><br><span class="line">            root=root-&gt;left;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">stack</span>.empty())</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            root=<span class="built_in">stack</span>.top();</span><br><span class="line">            <span class="built_in">stack</span>.pop();</span><br><span class="line">            visit(root-&gt;data);</span><br><span class="line">            root=root-&gt;right;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>为简化代码起见，把“弹栈-访问-向右”的循环合并到主流程里面了。</p><h4 id="后序遍历-v2">后序遍历</h4><p>后序遍历就有些复杂了（Leetcode上非递归<a href="https://leetcode.com/problems/binary-tree-preorder-traversal/" target="_blank" rel="noopener">前序</a>，<a href="https://leetcode.com/problems/binary-tree-inorder-traversal/" target="_blank" rel="noopener">中序</a>都是Medium, <a href="https://leetcode.com/problems/binary-tree-postorder-traversal/" target="_blank" rel="noopener">后序</a>就成了Hard我会说？）。</p><p>将当前节点入栈，向左走；不可走时弹栈，向右走，跳回前一步；不可走时弹栈，栈空时结束。问题在于，此时弹栈之后，可能是要向左走，也可能是要向右走，而且同一个节点可能会被弹多次。考虑下面这棵树：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">    1</span><br><span class="line">   / \</span><br><span class="line">  2   3</span><br><span class="line"> / \</span><br><span class="line">4   5</span><br></pre></td></tr></table></figure><p>在系统栈作用下，在<code>4</code>不可走时，节点<code>2</code>被弹出，随后又入栈，走向<code>5</code>, 此后再一次弹出<code>2</code>, 这次是真正的弹出了。因此，重点在于判断节点被弹出后，是否还要向右走。主要是需要判断是否是第二次弹出，因此可设一个<code>visit</code>数组来记录访问状态，但太浪费空间。</p><p>这时就要用到后序遍历的特性了。记当前节点为<code>node</code>, 若<code>node</code>被访问，则其左右子树已经遍历完毕，应该向上回溯了。如果<code>node</code>为<code>parent</code>的左子树，代表着<code>parent</code>的左子树遍历完成，接下来就是右子树，应该向<code>parent</code>的右边进发；如果<code>node</code>是<code>parent</code>的右子树，代表<code>parent</code>的左右子树已经遍历完毕，这时它的情况和<code>node</code>一样，循环进行处理。</p><p>我们设置一个辅助变量<code>last</code>(初始设为空), 用来记录上次访问的节点。遍历时，节点一路向左一路入栈走到成空为止，此后取栈顶<code>parent</code>, 如果上次访问的<code>last</code>不为<code>parent</code>的右子树，且右子树不为空，这时要向右进发；其他情况（即<code>parent</code>的左右子树已经遍历完毕）就该访问<code>parent</code>了。之后，更新<code>last</code>记录。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">Func</span>&gt; <span class="title">void</span> <span class="title">postorder</span>(<span class="title">TreeNode</span> *<span class="title">root</span>,<span class="title">Func</span> <span class="title">visit</span>)&#123;</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">stack</span>&lt;TreeNode*&gt; <span class="built_in">stack</span>;</span><br><span class="line">    TreeNode *last=<span class="literal">nullptr</span>;</span><br><span class="line">    <span class="keyword">while</span>(root!=<span class="literal">nullptr</span>||!<span class="built_in">stack</span>.empty())&#123;</span><br><span class="line">        <span class="keyword">if</span>(root!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">            <span class="built_in">stack</span>.push(root);</span><br><span class="line">            root=root-&gt;left;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            TreeNode *parent=<span class="built_in">stack</span>.top();</span><br><span class="line">            <span class="keyword">if</span>(last!=parent-&gt;right &amp;&amp; parent-&gt;right!=<span class="literal">nullptr</span>)</span><br><span class="line">                root=parent-&gt;right;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                visit(parent-&gt;data);</span><br><span class="line">                last=parent;</span><br><span class="line">                <span class="built_in">stack</span>.pop();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="仙术">仙术</h5><p>此方法根据树的遍历定义得来。树的前序遍历是“根-左-右”，后序遍历是“左-右-根”。修改前序遍历的代码，使其顺序变为“根-右-左”，再将修改后得到的前序遍历序列逆置，即可得到后序遍历的“左-右-根”顺序。由于该方法需要一个额外的记录序列的容器，Leetcode的题目正好就是要获得一个这样的序列，因此该序列容器不占空间复杂度，在我这个遍历算法中就不一样了。解法放在这里，给各位扩展一下思路。</p><p>该方法来自Leetcode讨论区的<a href="https://leetcode.com/discuss/9736/accepted-code-with-explaination-does-anyone-have-better-idea" target="_blank" rel="noopener">这篇帖子</a>。</p><h2 id="迭代器遍历">迭代器遍历</h2><h3 id="有关约定-v2">有关约定</h3><p>迭代器有关接口声明如下：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">iterator</span>&#123;</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        iterator(TreeNode *root); <span class="comment">// 待实现</span></span><br><span class="line">        iterator(<span class="keyword">const</span> iterator &amp;o):m_cursor(o.m_cursor) &#123;&#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span>&amp; <span class="keyword">operator</span>*() <span class="keyword">const</span> &#123;<span class="keyword">return</span> m_cursor.top()-&gt;data;&#125;</span><br><span class="line">        <span class="keyword">int</span>* <span class="keyword">operator</span>-&gt;() <span class="keyword">const</span> &#123;<span class="keyword">return</span> &amp;<span class="keyword">operator</span>*();&#125;</span><br><span class="line">        iterator&amp; <span class="keyword">operator</span>++(); <span class="comment">// 待实现</span></span><br><span class="line">        iterator <span class="keyword">operator</span>++(<span class="keyword">int</span>) &#123;<span class="keyword">auto</span> i=*<span class="keyword">this</span>; <span class="keyword">operator</span>++(); <span class="keyword">return</span> i;&#125;</span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">stack</span>&lt;TreeNode*&gt; m_cursor;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ol><li><p><code>operator++()</code>所实现的操作是找到在遍历序列中，当前节点的下一个节点。我们应该认为当前节点已经访问过了。</p></li><li><p>使用栈时的迭代器内部封装的是一个栈，复制起来开销太大，你可以在此基础实现上移动语义以降低开销。</p></li><li><p>在下文中，虽然三种遍历算法的迭代器都叫<code>iterator</code>, 但实际上是三种不同的类型。为描述简单起见我共用一个名称。</p></li><li><p>在这里<code>operator-&gt;()</code>是非必须的，如果使用会导致编译错误。但设计成泛型迭代器的话那么就是必须要重载的一个重要运算符了。</p></li><li><p>如果想和STL接轨，迭代器实现起来不会如此简单，还要定义一大堆类型别名，设置迭代器种类等。该迭代器由于只能自增，因此属于<a href="http://en.cppreference.com/w/cpp/concept/ForwardIterator" target="_blank" rel="noopener"><code>ForwardIterator</code></a>.</p></li></ol><h3 id="具体实现">具体实现</h3><p>主算法已经在上面讨论过了，因此在这里主要是将循环的单步操作提取出来作为迭代器的自增操作。初始化迭代器时，应该找到这种遍历方式生成的序列中的第一个节点。</p><h4 id="前序遍历-v3">前序遍历</h4><p>前序的第一个节点就是根。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">iterator::iterator(TreeNode *root):m_cursor() &#123;</span><br><span class="line">    <span class="keyword">if</span>(root!=<span class="literal">nullptr</span>)</span><br><span class="line">        m_cursor.push(root);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">iterator&amp; iterator::<span class="keyword">operator</span>++() &#123;</span><br><span class="line">    <span class="keyword">if</span>(m_cursor.empty())</span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">auto</span> tmp=m_cursor.top();</span><br><span class="line">    m_cursor.pop();</span><br><span class="line">    <span class="keyword">if</span>(tmp-&gt;right != <span class="literal">nullptr</span>)</span><br><span class="line">        m_cursor.push(tmp-&gt;right);</span><br><span class="line">    <span class="keyword">if</span>(tmp-&gt;left != <span class="literal">nullptr</span>)</span><br><span class="line">        m_cursor.push(tmp-&gt;left);</span><br><span class="line">    <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="中序遍历-v3">中序遍历</h4><p>中序遍历的第一个节点是最左的一个节点。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">iterator::iterator(TreeNode *root):m_cursor() &#123;</span><br><span class="line">    <span class="keyword">while</span>(root!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">        m_cursor.push(root);</span><br><span class="line">        root=root-&gt;left;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">iterator&amp; iterator::<span class="keyword">operator</span>++() &#123;</span><br><span class="line">    <span class="keyword">if</span>(m_cursor.empty())</span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">auto</span> ptr = m_cursor.top()-&gt;right;</span><br><span class="line">    m_cursor.pop();</span><br><span class="line">    <span class="keyword">while</span>(ptr != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">        m_cursor.push(ptr);</span><br><span class="line">        ptr = ptr-&gt;left;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="后序遍历-v3">后序遍历</h4><p>后序遍历的第一个节点沿左边的支路向下的第一个叶子节点。</p><p>为了不给后序迭代器增加一个<code>last</code>成员，将上面的遍历算法做出一点修改：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 辅助用函数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">next</span><span class="params">(TreeNode *root,<span class="built_in">std</span>::<span class="built_in">stack</span>&lt;TreeNode*&gt; &amp;s)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(;;)&#123;</span><br><span class="line">        s.push(root);</span><br><span class="line">        <span class="keyword">if</span>(root-&gt;left != <span class="literal">nullptr</span>)</span><br><span class="line">            root = root-&gt;left;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(root-&gt;right != <span class="literal">nullptr</span>)</span><br><span class="line">            root = root-&gt;right;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">Func</span>&gt; <span class="title">void</span> <span class="title">postorder</span>(<span class="title">TreeNode</span> *<span class="title">root</span>,<span class="title">Func</span> <span class="title">visit</span>)&#123;</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">stack</span>&lt;TreeNode*&gt; <span class="built_in">stack</span>;</span><br><span class="line">    next(root,<span class="built_in">stack</span>);</span><br><span class="line">    <span class="keyword">while</span>(!<span class="built_in">stack</span>.empty())&#123;</span><br><span class="line">        root=<span class="built_in">stack</span>.top();<span class="built_in">stack</span>.pop();</span><br><span class="line">        visit(root-&gt;data);</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">stack</span>.empty())</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        TreeNode *parent=<span class="built_in">stack</span>.top(), *tmp=parent-&gt;right;</span><br><span class="line">        <span class="keyword">if</span>(root==parent-&gt;left &amp;&amp; tmp!=<span class="literal">nullptr</span>)</span><br><span class="line">            next(tmp,<span class="built_in">stack</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>迭代器算法如下：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 辅助用函数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">next</span><span class="params">(TreeNode *root,<span class="built_in">std</span>::<span class="built_in">stack</span>&lt;TreeNode*&gt; &amp;s)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(;;)&#123;</span><br><span class="line">        s.push(root);</span><br><span class="line">        <span class="keyword">if</span>(root-&gt;left != <span class="literal">nullptr</span>)</span><br><span class="line">            root = root-&gt;left;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(root-&gt;right != <span class="literal">nullptr</span>)</span><br><span class="line">            root = root-&gt;right;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">iterator::iterator(TreeNode *root):m_cursor() &#123;</span><br><span class="line">    <span class="keyword">if</span>(root==<span class="literal">nullptr</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    next(root,m_cursor);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">iterator&amp; iterator::<span class="keyword">operator</span>++() &#123;</span><br><span class="line">    <span class="keyword">if</span>(m_cursor.empty())</span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">auto</span> ptr=m_cursor.top();</span><br><span class="line">    m_cursor.pop_back();</span><br><span class="line">    <span class="keyword">if</span>(m_cursor.empty())</span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">auto</span> parent = m_cursor.top(), tmp = parent-&gt;right;</span><br><span class="line">    <span class="keyword">if</span>(ptr == parent-&gt;left &amp;&amp; tmp != <span class="literal">nullptr</span>)</span><br><span class="line">        next(tmp,m_cursor);</span><br><span class="line">    <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;一个在数据结构领域被艹了又艹的话题。本文只涉及使用栈来遍历二叉树（不包含层次遍历），并将其包装为迭代器。&lt;/p&gt;&lt;p&gt;UPDATE 2016/06/22: 将栈的部分从原来的大文章中分离出来&lt;/p&gt;&lt;p&gt;UPDATE 2016/10/28: 拿回了属于自己的迭代器&lt;/p&gt;
    
    </summary>
    
      <category term="编程" scheme="https://unnamed42.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
    
      <category term="算法" scheme="https://unnamed42.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>BMP位图到ASCII字符画</title>
    <link href="https://unnamed42.github.io/2016-02-27-BMP%E4%BD%8D%E5%9B%BE%E5%88%B0ASCII%E5%AD%97%E7%AC%A6%E7%94%BB.html"/>
    <id>https://unnamed42.github.io/2016-02-27-BMP位图到ASCII字符画.html</id>
    <published>2016-02-27T04:41:33.000Z</published>
    <updated>2017-06-10T05:52:13.000Z</updated>
    
    <content type="html"><![CDATA[<p>最近闲得蛋疼，所以诞生了搞些大新闻的念头。</p><p>由于我<ruby>不擅长<rp>(</rp><rt>lǎn de xué</rt><rp>)</rp></ruby>脚本语言，因此费力不讨好地去用C++来完成这项工作。</p><p>UPDATE 2016-03-18: 修复失效的图片链接</p><a id="more"></a><h2 id="bmp简略介绍">BMP简略介绍</h2><p>位图一共有两种类型，即：设备相关位图(DDB)和设备无关位图(DIB). DDB位图在早期的Windows系统（Windows 3.0以前）中是很普遍的，事实上它也是唯一的。然而，随着显示器制造技术的进步，以及显示设备的多样化，DDB位图的一些固有的问题开始浮现出来了。比如，它不能够存储（或者说获取）创建这张图片的原始设备的分辨率，这样，应用程序就不能快速的判断客户机的显示设备是否适合显示这张图片。为了解决这一难题，微软创建了DIB位图格式。</p><p>设备无关位图(Device-Independent Bitmap)包含下列的颜色和尺寸信息：</p><ul><li><p>原始设备（即创建图片的设备）的颜色格式</p></li><li><p>原始设备的分辨率</p></li><li><p>原始设备的调色板</p></li><li><p>一个位数组，由红、绿、蓝（RGB）三个值代表一个像素</p></li><li><p>一个数组压缩标志，用于表明数据的压缩方案（如果需要的话）</p></li></ul><h2 id="bmp文件结构">BMP文件结构</h2><p><img src="https://upload.wikimedia.org/wikipedia/commons/c/c4/BMPfileFormat.png" alt="Wikipedia: BMP文件结构图"></p><p><img src="https://msdn.microsoft.com/dynimg/IC444238.png" alt="MSDN: BMP文件结构简图"></p><p>位图文件由以下结构体依次构成：</p><table><thead><tr><th>结构体名称</th><th>可选</th><th>大小</th><th>用途</th><th>备注</th></tr></thead><tbody><tr><td>位图文件头</td><td>否</td><td>14字节</td><td>存储位图文件通用信息</td><td>仅在读取文件时有用</td></tr><tr><td>DIB头</td><td>否</td><td>固定（存在7种不同版本）</td><td>存储位图详细信息及像素格式</td><td>紧接在位图文件头后</td></tr><tr><td>附加位掩码</td><td>是</td><td>3或4 DWORD（12或16字节）</td><td>定义像素格式</td><td>仅在DIB头是BITMAPINFOHEADER时存在</td></tr><tr><td>调色板</td><td>见备注</td><td>可变</td><td>定义图像数据（像素数组）所用颜色</td><td>色深≤ 8时不能省略</td></tr><tr><td>填充区A</td><td>是</td><td>可变</td><td>结构体对齐</td><td>位图文件头中像素数组偏移量的产物</td></tr><tr><td>像素数组</td><td>否</td><td>可变</td><td>定义实际的像素数值</td><td>像素数据在DIB头和附加位掩码中定义。像素数组中每行均以4字节对齐</td></tr><tr><td>填充区B</td><td>是</td><td>可变</td><td>结构体对齐</td><td>DIB头中ICC色彩特性数据偏移量的产物</td></tr><tr><td>ICC色彩特性数据</td><td>是</td><td>可变</td><td>定义色彩特性</td><td>可以包含外部文件路径，由该文件来定义色彩特性</td></tr></tbody></table><h3 id="bitmapfileheader">BITMAPFILEHEADER</h3><p><code>BITMAPFILEHEADER</code>位于文件的开头，存储着整个文件的概要信息。<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/dd183374.aspx" target="_blank" rel="noopener">MSDN</a>上，该结构体的定义如下：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">tagBITMAPFILEHEADER</span> &#123;</span></span><br><span class="line">  WORD  bfType;</span><br><span class="line">  DWORD bfSize;</span><br><span class="line">  WORD  bfReserved1;</span><br><span class="line">  WORD  bfReserved2;</span><br><span class="line">  DWORD bfOffBits;</span><br><span class="line">&#125; BITMAPFILEHEADER, *PBITMAPFILEHEADER;</span><br></pre></td></tr></table></figure><p>注：<code>WORD</code>, <code>DWORD</code>为微软MFC的经典类型别名，类型的要求分别是16位无符号整型和32位无符号整型。</p><p>各变量作用如下：</p><ul><li><p><code>bfType</code>: 文件签名，标识文件类型。这两个字节内容是0x42 0x4D, 如果以<code>char</code>的方式来读取的话要求为<code>'B'</code>, <code>'M'</code>. 根据标准的不同，也可以是其他内容（见附表）。</p></li><li><p><code>bfSize</code>: 文件大小，记录整个文件的大小（单位：字节）。</p></li><li><p><code>bfReserved1</code>, <code>bfReserved2</code>: 保留位，其内容必须是0(MSDN); 取决于具体创建图形文件的程序(Wikipedia).</p></li><li><p><code>bfOffBits</code>: 偏移量（单位：字节），标识从<code>BITMAPFILEHEADER</code>结构体的开头到位图像素数据的偏移量。</p></li></ul><h4 id="bftype的可能值">bfType的可能值</h4><table><thead><tr><th style="text-align:center">值</th><th>含义</th></tr></thead><tbody><tr><td style="text-align:center">BM</td><td>Windows 3.1x, 95, NT, … etc.</td></tr><tr><td style="text-align:center">BA</td><td>OS/2 struct Bitmap Array</td></tr><tr><td style="text-align:center">CI</td><td>OS/2 struct Color Icon</td></tr><tr><td style="text-align:center">CP</td><td>OS/2 const Color Pointer</td></tr><tr><td style="text-align:center">IC</td><td>OS/2 struct Icon</td></tr><tr><td style="text-align:center">PT</td><td>OS/2 Pointer</td></tr></tbody></table><h3 id="bitmapinfoheader">BITMAPINFOHEADER</h3><p>紧跟着<code>BITMAPFILEHEADER</code>的就是位图信息头，主要有<code>BITMAPINFOHEADER</code>, <code>BITMAPV4HEADER</code>, 以及<code>BITMAPV5HEADER</code>这几种。这里我们介绍使用最广的<code>BITMAPINFOHEADER</code>结构体。<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/dd183376.aspx" target="_blank" rel="noopener">MSDN</a>上定义如下：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">tagBITMAPINFOHEADER</span> &#123;</span></span><br><span class="line">  DWORD biSize;</span><br><span class="line">  LONG  biWidth;</span><br><span class="line">  LONG  biHeight;</span><br><span class="line">  WORD  biPlanes;</span><br><span class="line">  WORD  biBitCount;</span><br><span class="line">  DWORD biCompression;</span><br><span class="line">  DWORD biSizeImage;</span><br><span class="line">  LONG  biXPelsPerMeter;</span><br><span class="line">  LONG  biYPelsPerMeter;</span><br><span class="line">  DWORD biClrUsed;</span><br><span class="line">  DWORD biClrImportant;</span><br><span class="line">&#125; BITMAPINFOHEADER, *PBITMAPINFOHEADER;</span><br></pre></td></tr></table></figure><p>注：<code>LONG</code>的要求为32位有符号整型。</p><p>各变量作用如下：</p><ul><li><p><code>biSize</code>: 该结构体需要的字节数。</p></li><li><p><code>biWidth</code>: 位图的宽度（单位：像素）。 如果<code>biCompression</code>为<code>BI_JPEG</code>或<code>BI_PNG</code>, 那么<code>biWidth</code>表示解压缩后图像的宽度。</p></li><li><p><code>biHeight</code>: 位图的高度（单位：像素）。 如果为正，位图像素就是从下往上，从左往右存储，原点在左下角。如果为负，则是从上至下存储。此时，<code>biCompression</code>必须为<code>BI_RGB</code>或<code>BI_BITFIELDS</code>. 从上至下存储的位图不能压缩。 如果<code>biCompression</code>为<code>BI_JPEG</code>或<code>BI_PNG</code>, 那么<code>biHeight</code>表示解压缩后图像的高度。</p></li><li><p><code>biPlanes</code>: 目标设备的颜色面板值数量。该值必须为1.</p></li><li><p><code>biBitCount</code>: 每像素的位(bit)数。即图像色深。该成员变量决定了位图的最大色彩数。该值必须为表格内容之一（表格附后）。</p></li><li><p><code>biCompression</code>: 表示从下至上存储的位图的压缩方式。具体值见下表（表格附后）。</p></li><li><p><code>biSizeImage</code>: 图像的大小（单位：字节），无压缩位图该值可能设为0. 如果<code>biCompression</code>为<code>BI_JPEG</code>或<code>BI_PNG</code>, 那么<code>biSizeImage</code>表示对应JPEG或PNG图像的缓冲区大小。</p></li><li><p><code>biXPelsPerMeter</code>: 目标设备位图的横向分辨率（单位：像素/米）。程序可根据该值来选择合适大小的位图来显示。</p></li><li><p><code>biYPelsPerMeter</code>: 目标设备位图的纵向分辨率（单位：像素/米）。</p></li><li><p><code>biClrUsed</code>: 表示该位图中使用过的颜色索引数量。如果该值为0, 那么位图使用的是<code>biCompression</code>压缩模式下对应<code>biBitCount</code>的最大色彩数。 如果该值非0且<code>biBitCount</code>小于16, 那么<code>biClrUsed</code>表示图像引擎或设备驱动访问的色彩数。如果<code>biBitCount</code>大于等于16, 那么<code>biClrUsed</code>表示颜色表大小来优化系统调色板的性能。如果<code>biBitCount</code>等于16或32, 优化过的调色板紧跟着接下来的3个<code>DWORD</code>掩码后开始。 如果位图阵列紧跟在<code>BITMAPINFO</code>后，那么它是填充位图(packed bitmap). 填充位图是由单个指针引用。填充位图要求该<code>biClrUsed</code>必须是0或颜色表的实际大小。</p></li><li><p><code>biClrImportant</code>: 为显示该位图所需要的颜色索引数量。如果该值为0, 那么所有颜色都是需要的。</p></li></ul><h4 id="bibitcount的可能值">biBitCount的可能值</h4><table><thead><tr><th style="text-align:center">值</th><th>含义</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td>色深由内含的JPEG或PNG格式图像显式确定或隐含</td></tr><tr><td style="text-align:center">1</td><td>位图是单色图。<code>BITMAPINFO</code>的<code>bmiColors</code>包含两个条目。位图的每一bit表示一个像素，如果是0则像素颜色是<code>bmiColors</code>的第一个条目内容；其余情况是第二个条目内容</td></tr><tr><td style="text-align:center">4</td><td>位图色彩数量最大为16, <code>bmiColors</code>包含16个条目。每四bit表示一个像素</td></tr><tr><td style="text-align:center">8</td><td>位图色彩数量最大为256, <code>bmiColors</code>包含256个条目。每一字节表示一个像素</td></tr><tr><td style="text-align:center">16</td><td>位图色彩数量最大为$2^{16}$. 如果<code>biCompression</code>为<code>BI_RGB</code>, 那么<code>bmiColors</code>为<code>NULL</code>. 每一<code>WORD</code>表示一个像素</td></tr><tr><td style="text-align:center">24</td><td>位图色彩数量最大为$2^{24}$, 并且<code>bmiColors</code>为<code>NULL</code>. 每3字节表示一个像素，每一字节分别表示一个像素的BGR分量</td></tr><tr><td style="text-align:center">32</td><td>位图色彩数量最大为$2^{32}$. 如果<code>biCompression</code>为<code>BI_RGB</code>, 那么<code>bmiColors</code>为<code>NULL</code>. 每一<code>DWORD</code>表示一个像素</td></tr></tbody></table><h4 id="bicompression的可能值">biCompression的可能值</h4><table><thead><tr><th style="text-align:center">值</th><th style="text-align:center">标识</th><th>压缩方法</th><th>备注</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:center">BI_RGB</td><td>无</td><td>最常见</td></tr><tr><td style="text-align:center">1</td><td style="text-align:center">BI_RLE8</td><td>RLE8位/像素</td><td>只能用于格式为8位/像素的位图</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">BI_RLE4</td><td>RLE4位/像素</td><td>只能用于格式为4位/像素的位图</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center">BI_BITFIELDS</td><td>位字段或者霍夫曼1D压缩（BITMAPCOREHEADER2）</td><td>像素格式由位掩码指定，或位图经过霍夫曼1D压缩（BITMAPCOREHEADER2）</td></tr><tr><td style="text-align:center">4</td><td style="text-align:center">BI_JPEG</td><td>JPEG或RLE-24压缩（BITMAPCOREHEADER2）</td><td>位图包含JPEG图像或经过RLE-24压缩（BITMAPCOREHEADER2）</td></tr><tr><td style="text-align:center">5</td><td style="text-align:center">BI_PNG</td><td>PNG</td><td>位图包含PNG图像</td></tr><tr><td style="text-align:center">6</td><td style="text-align:center">BI_ALPHABITFIELDS</td><td>位字段</td><td>针对WindowsCE.NET4.0及之后版本</td></tr></tbody></table><h3 id="bitmapinfo">BITMAPINFO</h3><p>该结构体包含了一个DIB的主要信息和色彩信息。<a href="https://msdn.microsoft.com/zh-cn/library/windows/desktop/dd183375.aspx" target="_blank" rel="noopener">MSDN</a>定义如下：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">tagBITMAPINFO</span> &#123;</span></span><br><span class="line">  BITMAPINFOHEADER bmiHeader;</span><br><span class="line">  RGBQUAD          bmiColors[<span class="number">1</span>];</span><br><span class="line">&#125; BITMAPINFO, *PBITMAPINFO;</span><br></pre></td></tr></table></figure><p>各变量作用如下：</p><ul><li><p><code>bmiHeader</code>: 见上一部分</p></li><li><p><code>bmiColors</code>: 一个<code>bmiColors</code>包含以下二者之一：</p><ul><li>一个<code>RGBQUAD</code>的数组，数组元素组成了颜色表。</li><li>一个16位无符号整型的数组，元素是本地调色板的颜色索引。</li></ul></li></ul><h4 id="rgbquad">RGBQUAD</h4><p>该结构体描述BGR色彩分量值。<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/dd162938.aspx" target="_blank" rel="noopener">MSDN</a>定义如下：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">tagRGBQUAD</span> &#123;</span></span><br><span class="line">  BYTE rgbBlue;</span><br><span class="line">  BYTE rgbGreen;</span><br><span class="line">  BYTE rgbRed;</span><br><span class="line">  BYTE rgbReserved;</span><br><span class="line">&#125; RGBQUAD;</span><br></pre></td></tr></table></figure><p>注： <code>BYTE</code>的要求是宽为1字节的类型。一般为<code>typedef unsigned char BYTE;</code></p><p>需要注意的是它的真实顺序是BGR而不是RGB.</p><h2 id="读取bmp文件">读取BMP文件</h2><p>有了上面的资料我们就能很快地写出读取文件的代码。</p><p>首先准备好两个文件头结构体，注意要禁止编译器自动对齐。在GCC/Clang下可以用<code>__attribute__((packed))</code>, VS下可以用<code>#pragma pack(1)</code>.</p><figure class="highlight cpp"><figcaption><span>bmp.h</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> __BMP__</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> __BMP__</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdint&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">file_header</span>&#123;</span></span><br><span class="line">    <span class="keyword">uint8_t</span> signature[<span class="number">2</span>];   <span class="comment">// 4 bytes signature, or you can use a single uint16_t instead.</span></span><br><span class="line">    <span class="keyword">uint32_t</span> file_size;</span><br><span class="line">    <span class="keyword">uint16_t</span> reserved1;</span><br><span class="line">    <span class="keyword">uint16_t</span> reserved2;</span><br><span class="line">    <span class="keyword">uint32_t</span> off_bits;</span><br><span class="line">&#125; __attribute__((packed));</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">info_header</span>&#123;</span></span><br><span class="line">    <span class="keyword">uint32_t</span> info_header_size;</span><br><span class="line">    <span class="keyword">int32_t</span> width;</span><br><span class="line">    <span class="keyword">int32_t</span> height;</span><br><span class="line">    <span class="keyword">uint16_t</span> planes;</span><br><span class="line">    <span class="keyword">uint16_t</span> bit_count;</span><br><span class="line">    <span class="keyword">uint32_t</span> compression;</span><br><span class="line">    <span class="keyword">uint32_t</span> image_size;</span><br><span class="line">    <span class="keyword">int32_t</span> x_res;</span><br><span class="line">    <span class="keyword">int32_t</span> y_res;</span><br><span class="line">    <span class="keyword">uint32_t</span> color_used;</span><br><span class="line">    <span class="keyword">uint32_t</span> color_important;</span><br><span class="line">&#125; __attribute__((packed));</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">read</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *filename,file_header *f,info_header *i,<span class="keyword">uint8_t</span> *data)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure><p>然后可以写一个简单的读取程序。除第一个参数表示文件路径外，其它的均是以指针形式返回的返回值。</p><p>我们直接为每个像素分配3字节的空间来存储RGB信息，而非使用<code>RGBQUAD</code>结构体。为简单起见，假设我们读取的BMP文件都是24位真彩色的，无压缩，从下至上存储。</p><figure class="highlight cpp"><figcaption><span>bmp.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"bmp.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdexcept&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">read</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *filename,file_header *f,info_header *i,<span class="keyword">uint8_t</span>* &amp;data,<span class="keyword">uint32_t</span> &amp;size_of_data)</span></span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="function">fstream <span class="title">file</span><span class="params">(filename,<span class="built_in">std</span>::ios::in|<span class="built_in">std</span>::ios::binary)</span></span>;</span><br><span class="line">    <span class="keyword">if</span>(!file.is_open()||!file.bad())</span><br><span class="line">        <span class="keyword">throw</span> <span class="built_in">std</span>::runtime_error(<span class="string">"cannot open or read file"</span>);</span><br><span class="line">    file.read(<span class="keyword">reinterpret_cast</span>&lt;<span class="keyword">char</span>*&gt;(f),<span class="keyword">sizeof</span>(file_header));</span><br><span class="line">    <span class="comment">// check signature of file</span></span><br><span class="line">    <span class="keyword">if</span>(f-&gt;signature[<span class="number">0</span>]!=<span class="string">'B'</span>||f-&gt;signature[<span class="number">1</span>]!=<span class="string">'M'</span>)&#123;</span><br><span class="line">        file.close();</span><br><span class="line">        <span class="keyword">throw</span> <span class="built_in">std</span>::runtime_error(<span class="string">"Wrong image file type"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    file.read(<span class="keyword">reinterpret_cast</span>&lt;<span class="keyword">char</span>*&gt;(i),<span class="keyword">sizeof</span>(info_header));</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(i-&gt;bit_count&lt;<span class="number">8</span>)&#123;</span><br><span class="line">        file.close();</span><br><span class="line">        <span class="keyword">throw</span> <span class="built_in">std</span>::runtime_error(<span class="string">"Unsupported format."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(i-&gt;compression &gt; <span class="number">1</span>)&#123;</span><br><span class="line">        file.close();</span><br><span class="line">        <span class="keyword">throw</span> <span class="built_in">std</span>::runtime_error(<span class="string">"Unsupported compression mode."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// recalculate file size</span></span><br><span class="line">    file.seekg(<span class="number">0</span>,<span class="built_in">std</span>::ios::end);</span><br><span class="line">    f-&gt;file_size=file.tellg();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">uint32_t</span> data_size = i-&gt;width * i-&gt;height * i-&gt;bit_count / <span class="number">8</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">uint32_t</span> image_size=f-&gt;file_size - data_size;</span><br><span class="line">    data=<span class="keyword">new</span> <span class="keyword">uint8_t</span>[image_size];</span><br><span class="line">    size_of_data=image_size;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// set to the beginning</span></span><br><span class="line">    file.seekg(f-&gt;off_bits,<span class="built_in">std</span>::ios::beg);</span><br><span class="line">    <span class="comment">// read pixel data</span></span><br><span class="line">    file.read(<span class="keyword">reinterpret_cast</span>&lt;<span class="keyword">char</span>*&gt;(data),image_size);</span><br><span class="line">    file.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="灰度转换">灰度转换</h2><p>现在我们得到了每个像素的RGB信息（上一步得到的<code>data</code>还需要经过处理变成RGB顺序），现在将其转换成灰度。我们使用这样的一个公式：</p><p>$$ Luminace = 0.299 Red + 0.587 Green + 0.114 Blue $$</p><ruby>最简单<rp>(</rp><rt>bù dòng nǎo</rt><rp>)</rp></ruby>的一个写法如下：<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> i=<span class="number">0U</span>;i&lt;size;i+=<span class="number">3</span>)</span><br><span class="line">    output[i]=<span class="keyword">uint8_t</span>(<span class="number">0.299</span>*data[i] + <span class="number">0.587</span>*data[i+<span class="number">1</span>] + <span class="number">0.114</span>*data[i+<span class="number">2</span>] + <span class="number">0.5</span>);</span><br></pre></td></tr></table></figure><p>最后加入<code>+ 0.5</code>是为了实现四舍五入而不是全部截断。</p><p>由于涉及到了浮点数，导致比整型之间的乘除法慢了很多。因此，我们把公式做个近似，变成了：</p><p>$$ Luminance = { {2 Red + 5 Green + Blue} \over 8} $$</p><p>在此基础上使用移位运算优化，整个变成了：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> i=<span class="number">0U</span>;i&lt;size;i+=<span class="number">3</span>)&#123;</span><br><span class="line">    <span class="keyword">auto</span> temp=data[i] &lt;&lt; <span class="number">1</span>;            <span class="comment">// 2*Red</span></span><br><span class="line">    temp+=(data[i+<span class="number">1</span>]&lt;&lt;<span class="number">2</span>) + data[i+<span class="number">1</span>];  <span class="comment">// 5*Green</span></span><br><span class="line">    temp+=data[i+<span class="number">2</span>];                   <span class="comment">// Blue</span></span><br><span class="line">    output[i]=<span class="keyword">uint8_t</span>(temp&gt;&gt;<span class="number">3</span>);        <span class="comment">// divide by 8</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="转换到ascii字符">转换到ASCII字符</h2><p>参考资料中给出了两种思路，在此只简单介绍其中一种。</p><p>该方法的基本思路是，针对每一个点（一些像素组成的小区域），计算它平均灰度强度然后将其替换为强度差不多的字符。基于此我们需要一组字符，记为<code>map</code>. 其强度我们可以采取线性分布，即满足：</p><p>$$ \begin{aligned} intensity(map_i) = intensity(map_{i-1})+Constant \end{aligned} $$</p><p>然后选取字符时可以像查表一样：</p><p>$$ character=map_{intensity(dot) \over Constant} $$</p><p>因此，大致步骤如下：</p><ol><li><p>将图片平均分割为像素点或者是（矩形）小区域</p></li><li><p>计算每个部分的灰度强度</p></li><li><p>将每个部分替换为与它灰度强度最相近的字符</p></li></ol><p>我们所选取的字符组最好是强度均匀分布。刚上手时可以使用<code>const char *map=&quot; .,:;ox%#@&quot;;</code>, 并按照强度递减排列处理。使用这个<code>map</code>的话，选取对应的字符的代码则是<code>char c=map[(255-intensity(dot))*strlen(map)/256];</code>.简略代码如下：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdint&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::<span class="function"><span class="built_in">string</span> <span class="title">ascii</span><span class="params">(<span class="keyword">uint8_t</span> *data,<span class="keyword">uint32_t</span> height,<span class="keyword">uint32_t</span> width,<span class="keyword">uint32_t</span> line_width,<span class="keyword">const</span> <span class="keyword">char</span> *<span class="built_in">map</span>=<span class="string">"@#%xo;:,. "</span>)</span></span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="function"><span class="built_in">string</span> <span class="title">result</span><span class="params">(<span class="string">""</span>)</span></span>;</span><br><span class="line">    <span class="keyword">uint32_t</span> len=<span class="built_in">std</span>::<span class="built_in">strlen</span>(<span class="built_in">map</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> y=<span class="number">0U</span>;i&lt;height;++y)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> x=<span class="number">0U</span>;x&lt;width;++x)&#123;</span><br><span class="line">            <span class="keyword">auto</span> intensity=data[y*line_width+x]+data[y*line_width+x+<span class="number">1</span>]+data[y*line_width+x+<span class="number">2</span>];</span><br><span class="line">            intensity=(intensity*len)/<span class="number">768</span>;      <span class="comment">// for average</span></span><br><span class="line">            result+=<span class="built_in">map</span>[len-intensity];</span><br><span class="line">        &#125;</span><br><span class="line">        result+=<span class="string">'\n'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>转换的效果可以看图：</p><p><img src="https://i.stack.imgur.com/V0zRq.png" alt="无耻的我从原作者处偷来的图"></p><h2 id="参考资料">参考资料</h2><ol><li><p><a href="http://www.songho.ca/dsp/luminance/luminance.html" target="_blank" rel="noopener">彩色图到灰度图</a></p></li><li><p><a href="http://stackoverflow.com/a/32987834" target="_blank" rel="noopener">灰度图到ASCII字符画</a></p></li><li><p><a href="https://en.wikipedia.org/wiki/BMP_file_format" target="_blank" rel="noopener">Wikipedia: BMP文件格式</a></p></li><li><p><a href="https://msdn.microsoft.com/en-us/library/windows/desktop/dd183391.aspx" target="_blank" rel="noopener">MSDN: BMP文件格式</a></p></li><li><p><a href="https://msdn.microsoft.com/library/windows/desktop/aa383751" target="_blank" rel="noopener">Windows Data Types</a></p></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最近闲得蛋疼，所以诞生了搞些大新闻的念头。&lt;/p&gt;&lt;p&gt;由于我&lt;ruby&gt;不擅长&lt;rp&gt;(&lt;/rp&gt;&lt;rt&gt;lǎn de xué&lt;/rt&gt;&lt;rp&gt;)&lt;/rp&gt;&lt;/ruby&gt;脚本语言，因此费力不讨好地去用C++来完成这项工作。&lt;/p&gt;&lt;p&gt;UPDATE 2016-03-18: 修复失效的图片链接&lt;/p&gt;
    
    </summary>
    
      <category term="编程" scheme="https://unnamed42.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
    
      <category term="算法" scheme="https://unnamed42.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>Leetcode 136, 137, 260 &quot;Single Number&quot;-s</title>
    <link href="https://unnamed42.github.io/2016-02-08-Leetcode-136-137-260-Single-Number-s.html"/>
    <id>https://unnamed42.github.io/2016-02-08-Leetcode-136-137-260-Single-Number-s.html</id>
    <published>2016-02-08T13:44:43.000Z</published>
    <updated>2017-12-06T06:06:13.000Z</updated>
    
    <content type="html"><![CDATA[<p>LeetCode 136, 137, 260 的题解</p><p>UPDATE 2016/06/23: 我数电修炼有成，回来改了我原先写的自己都看不懂的解答。</p><a id="more"></a><h2 id="leetcode-136-single-number">Leetcode 136 Single Number</h2><blockquote><p>Given an array of integers, every element appears twice except for one. Find that single one.</p><p><strong>Note</strong>: Your algorithm should have a linear runtime complexity. Could you implement it without using extra memory?</p></blockquote><p>由于大多数的数都出现了两次，我们希望将这些数都成对消去。此时就会想到异或运算的两条性质：</p><ol><li><p><code>(a^b)^b=a</code>.</p></li><li><p><code>0^a=a</code>.</p></li></ol><p>使用异或，所有重复的数都能成对消去，因此解法如下：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">singleNumber</span><span class="params">(<span class="keyword">int</span>* nums, <span class="keyword">int</span> numsSize)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;numsSize;i++)</span><br><span class="line">        res^=nums[i];</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>该解法实质是要寻找这样的一个二元运算$\oplus$, 使得：</p><ol><li><p>$ (a \oplus b) \oplus b = a $ .</p></li><li><p>$ \exists X \forall a, X \oplus a = a $ .</p></li></ol><p>正好异或运算就满足这样的性质，其中X=0.</p><h2 id="leetcode-137-single-number-ii">Leetcode 137 Single Number II</h2><blockquote><p>Given an array of integers, every element appears <em>three</em> times except for one. Find that single one.</p><p><strong>Note</strong>: Your algorithm should have a linear runtime complexity. Could you implement it without using extra memory?</p></blockquote><h3 id="解法1">解法1</h3><p>参照I的思路，我们需要寻找一个二元运算$\oplus$, 使得：</p><ol><li><p>$ ((a \oplus b) \oplus b) \oplus b = a $.</p></li><li><p>$ \exists X \forall a, X \oplus a = a $.</p></li></ol><p>三进制的不进位加法可满足这些要求，其中X=0. 现在使用二进制来模拟一位的这种三进制加法。模拟一个三进制位需要三个状态，至少需要两个二进制位，而两个二进制位能表示00, 01, 10, 11四个状态。我们舍去状态11, 在三进制下不断加一应该出现如下循环：<code>00-&gt;01-&gt;10-&gt;00-&gt;...</code>。记输入为$D$，原状态的两个位分别为$A_n$（高位）和$B_n$（低位），将其列出真值表如下：</p><table><thead><tr><th style="text-align:center">$D$</th><th style="text-align:center">$A_n$</th><th style="text-align:center">$B_n$</th><th style="text-align:center">$A_{n+1}$</th><th style="text-align:center">$B_{n+1}$</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:center">0</td><td style="text-align:center">0</td><td style="text-align:center">0</td><td style="text-align:center">0</td></tr><tr><td style="text-align:center">0</td><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">1</td></tr><tr><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">0</td></tr><tr><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">1</td><td style="text-align:center">X</td><td style="text-align:center">X</td></tr><tr><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">0</td><td style="text-align:center">0</td><td style="text-align:center">1</td></tr><tr><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">1</td><td style="text-align:center">0</td></tr><tr><td style="text-align:center">1</td><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">0</td><td style="text-align:center">0</td></tr><tr><td style="text-align:center">1</td><td style="text-align:center">1</td><td style="text-align:center">1</td><td style="text-align:center">X</td><td style="text-align:center">X</td></tr></tbody></table><p>其中<code>X</code>表示输入出现了不应出现的状态，可作为无关项用于化简。根据真值表使用卡诺图大法化简得到逻辑表达式如下：</p><ul><li><p>$A_{n+1} = D B_n + \overline{D} A_n$</p></li><li><p>$B_{n+1} = D \overline{A_n} \overline{B_n} + \overline{D} B_n$</p></li></ul><p>此即为所求的运算。放在题中的<code>int</code>上，一个数的各位计算所得$A_n B_n$与其他位的值无关，只与$A_n B_n$原状态和对应位的值有关。因此我们直接用两个<code>int</code>数<code>a</code>, <code>b</code>来保存$A_n B_n$, <code>a</code>, <code>b</code> 的第i位分别表示将给定数的第i位作为$D$输入后$A_n B_n$的计算结果。回到题目中来，出现三次的数会使$A_n B_n$进行一个周期，因此这些数对$A_n B_n$的值没有任何影响；对于只出现一次的那个数，在$A_n B_n$初始值为00的情况下，一次操作后只有$B_n$由0变到1, 换句话说此时<code>b</code>每个位的内容和要找的数每个位的内容相同，即<code>b</code>为所求。</p><p>写成代码就是：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">singleNumber</span><span class="params">(<span class="keyword">int</span>* nums, <span class="keyword">int</span> numsSize)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a=<span class="number">0</span>,b=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; numsSize; ++i)&#123;</span><br><span class="line">        <span class="keyword">int</span> tmp=a;</span><br><span class="line">        a=(nums[i]&amp;a)|((~nums[i])&amp;a);</span><br><span class="line">        b=(nums[i]&amp;(~tmp)&amp;~b)|((~nums[i])&amp;b);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>简直丑出新高度……卡诺图化简能达到与或的最简表达，但对要到达形式最简没有任何帮助。</p><p>下面是来自<a href="https://leetcode.com/discuss/6632/challenge-me-thx" target="_blank" rel="noopener">Leetcode讨论区</a>的仙法，一看到就给人一种美的享受，一种视觉上的冲击。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">singleNumber</span><span class="params">(<span class="keyword">int</span>* nums,<span class="keyword">int</span> numsSize)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ones = <span class="number">0</span>, twos = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; numsSize; i++)&#123;</span><br><span class="line">        ones = (ones ^ nums[i]) &amp; ~twos;</span><br><span class="line">        twos = (twos ^ nums[i]) &amp; ~ones;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ones;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>下面按照我上面的思路瞎扯一二：上面我的丑极的代码选择忽略状态11，选择循环<code>00-&gt;01-&gt;10-&gt;00-&gt;...</code>。在此我们照样忽略11，但选择的循环是<code>00-&gt;10-&gt;01-&gt;00-&gt;...</code>，列出真值表如下：</p><table><thead><tr><th style="text-align:center">$D$</th><th style="text-align:center">$A_n$</th><th style="text-align:center">$B_n$</th><th style="text-align:center">$A_{n+1}$</th><th style="text-align:center">$B_{n+1}$</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:center">0</td><td style="text-align:center">0</td><td style="text-align:center">0</td><td style="text-align:center">0</td></tr><tr><td style="text-align:center">0</td><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">1</td></tr><tr><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">0</td></tr><tr><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">1</td><td style="text-align:center">X</td><td style="text-align:center">X</td></tr><tr><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">0</td></tr><tr><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">0</td></tr><tr><td style="text-align:center">1</td><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">0</td><td style="text-align:center">1</td></tr><tr><td style="text-align:center">1</td><td style="text-align:center">1</td><td style="text-align:center">1</td><td style="text-align:center">X</td><td style="text-align:center">X</td></tr></tbody></table><p>得到逻辑表达式：</p><ul><li><p>$ A_{n+1} = D \overline{A_n} \overline{B_n} + \overline{D} A_n \overline{B_n} = (D \overline{A_n} + \overline{D} A_n) \overline{B_n} = (D \oplus A_n) \overline{B_n} $</p></li><li><p>$ B_{n+1} = \overline{D} \overline{A_n} B_n + D A_n \overline{B_n} = \ldots = (D \oplus B_n) \overline{ A_{n+1} } $</p></li></ul><p>其中$B_{n+1}$的逻辑式我只能验证而不是化简到对应结果，这里面一定隐藏了什么我不知道的变换方法。</p><p>由于从状态00到状态10变换的是$A_n$, 因此我们应该返回的值是<code>a</code>, 在上面的代码里就是<code>ones</code>.</p><h3 id="解法2">解法2</h3><p>该解法来自于这篇<a href="http://www.1point3acres.com/bbs/forum.php?mod=viewthread&amp;tid=111563&amp;page=1#pid1954331" target="_blank" rel="noopener">帖子</a>。</p><p>我们可以统计所有第<code>i</code>位是<code>1</code>的数（二进制表示）的个数，该结果对3求余结果只可能是0和1(重复三次的数对应<code>i</code>位上的<code>1</code>的个数一定是三的倍数。如果单次出现的数第<code>i</code>位上是<code>0</code>, 取余会得到0; 如果单次出现的数第<code>i</code>位上是<code>1</code>, 那么结果是三的倍数+1, 取余结果为1), 正好就是要求的数二进制表示的第<code>i</code>位。把数的<code>sizeof(int)*8</code>位都如此处理，然后将结果按顺序组合起来就能得到要求的数。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> K 3</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">singleNumber</span><span class="params">(<span class="keyword">int</span>* nums,<span class="keyword">int</span> numsSize)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> len = <span class="keyword">sizeof</span>(<span class="keyword">int</span>) * <span class="number">8</span> , res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; numsSize; j++) </span><br><span class="line">            sum += (nums[j] &gt;&gt; i) &amp; <span class="number">0x01</span>;</span><br><span class="line">        res += (sum % K) &lt;&lt; i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在本题中<code>K</code>为3(大部分数出现三次), 如果题目变动的话可以据此修改<code>K</code>值而不用更改其他。</p><h2 id="leetcode-260-single-number-iii">Leetcode 260 Single Number III</h2><blockquote><p>Given an array of numbers <code>nums</code>, in which exactly two elements appear only once and all the other elements appear exactly twice. Find the two elements that appear only once.</p><p>For example:</p><p>Given <code>nums = [1, 2, 1, 3, 2, 5]</code>, return <code>[3, 5]</code>.</p><p><strong>Note</strong>:</p><ol><li>The order of the result is not important. So in the above example, <code>[5, 3]</code> is also correct.</li><li>Your algorithm should run in linear runtime complexity. Could you implement it using only constant space complexity?</li></ol></blockquote><p>使用I的思路，一遍异或下来我们能够得到<code>A^B</code>(记为<code>bit</code>). 因此下面要做的就是把<code>A</code>和<code>B</code>使用某种方法区分出来（<code>A</code>, <code>B</code>为我们要求的两个数）。</p><p>由于<code>A</code>与<code>B</code>是不同的数，因此<code>bit</code>里面至少有一位二进制位是<code>1</code>. 我们使用小技巧<code>bit&amp;(~(bit-1))</code>(或<code>bit&amp;(-bit)</code>)来将它的最低位的<code>1</code>取出来，从而将整组数分成两组，<code>A</code>,<code>B</code>肯定在不同的组里面，这样就变成了我们在<a href="#leetcode-136-single-number">Single Number</a>里面解决过的问题了。</p><p>代码如下：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; singleNumber(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums) &#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; result(<span class="number">2</span>,<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">int</span> bit=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> num:nums)</span><br><span class="line">            bit^=num;</span><br><span class="line">        <span class="keyword">int</span> lowest=bit&amp;(~(bit<span class="number">-1</span>));</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> num:nums)&#123;</span><br><span class="line">            <span class="keyword">if</span>((lowest&amp;num)==<span class="number">0</span>)</span><br><span class="line">                result[<span class="number">0</span>]^=nums[i];</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                result[<span class="number">1</span>]^=nums[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>其极简版：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; singleNumber(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums) &#123;</span><br><span class="line">        <span class="keyword">int</span> bit=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> num:nums)</span><br><span class="line">            bit^=num;</span><br><span class="line">        bit&amp;=(~(bit<span class="number">-1</span>));</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; result(<span class="number">2</span>,<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> num:nums)</span><br><span class="line">            result[!(num&amp;bit)]^=num;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;LeetCode 136, 137, 260 的题解&lt;/p&gt;&lt;p&gt;UPDATE 2016/06/23: 我数电修炼有成，回来改了我原先写的自己都看不懂的解答。&lt;/p&gt;
    
    </summary>
    
      <category term="编程" scheme="https://unnamed42.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
    
      <category term="Leetcode" scheme="https://unnamed42.github.io/tags/Leetcode/"/>
    
      <category term="算法" scheme="https://unnamed42.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>Leetcode 331 Verify Preorder Serialization of a Binary Tree</title>
    <link href="https://unnamed42.github.io/2016-02-02-Leetcode-331-Verify-Preorder-Serialization-of-a-Binary-Tree.html"/>
    <id>https://unnamed42.github.io/2016-02-02-Leetcode-331-Verify-Preorder-Serialization-of-a-Binary-Tree.html</id>
    <published>2016-02-02T15:15:32.000Z</published>
    <updated>2017-06-10T05:52:13.000Z</updated>
    
    <content type="html"><![CDATA[<p>Leetcode 331 的题解</p><a id="more"></a><p>题目如下：</p><blockquote><p>One way to serialize a binary tree is to use pre-order traversal. When we encounter a non-null node, we record the node’s value. If it is a null node, we record using a sentinel value such as <code>#</code>.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">     _9_</span><br><span class="line">    /   \</span><br><span class="line">   3     2</span><br><span class="line">  / \   / \</span><br><span class="line"> 4   1  #  6</span><br><span class="line">/ \ / \   / \</span><br><span class="line"># # # #   # #</span><br></pre></td></tr></table></figure><p>For example, the above binary tree can be serialized to the string <code>“9,3,4,#,#,1,#,#,2,#,6,#,#”</code>, where <code>#</code> represents a null node.</p><p>Given a string of comma separated values, verify whether it is a correct preorder traversal serialization of a binary tree. Find an algorithm without reconstructing the tree.</p><p>Each comma separated value in the string must be either an integer or a character <code>'#'</code> representing null pointer.</p><p>You may assume that the input format is always valid, for example it could never contain two consecutive commas such as <code>&quot;1,,3&quot;</code>.</p><p><strong>Example 1</strong>:<br><code>&quot;9,3,4,#,#,1,#,#,2,#,6,#,#&quot;</code><br>Return <code>true</code></p><p><strong>Example 2</strong>:<br><code>&quot;1,#&quot;</code><br>Return <code>false</code></p><p><strong>Example 3</strong>:<br><code>&quot;9,#,#,1&quot;</code><br>Return <code>false</code></p></blockquote><hr><p>该解法来源于这篇<a href="https://leetcode.com/discuss/83824/7-lines-easy-java-solution" target="_blank" rel="noopener">Discuss</a>.</p><p>在二叉树中，如果把空节点也当做叶子节点考虑的话，有如下性质：</p><ul><li><p>除根节点外，所有非空节点有2个出度和1个入度（2个子节点，1个父节点）</p></li><li><p>所有空节点有0个出度和1个入度（0个子节点，1个父节点）</p></li></ul><p>现在假设我们在根据先序遍历结果建立这棵树。建立过程中，用变量<code>diff</code>记录总的出度与入度之差(<code>diff=outdegree-indegree</code>)。读入下一个节点时，将<code>diff</code>减一，因为该节点具有一个入度。如果该节点非空，那么将<code>diff</code>加二，因为该节点具有两个出度。如果该先序序列是正确的话，那么<code>diff</code>不可能为负且结果应该为0.</p><p>代码如下：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">isValidSerialization</span><span class="params">(<span class="keyword">char</span>* preorder)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">char</span> *iter=strtok(preorder,<span class="string">","</span>);</span><br><span class="line">    <span class="keyword">int</span> diff=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(iter!=<span class="literal">NULL</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(--diff&lt;<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">strcmp</span>(iter,<span class="string">"#"</span>)!=<span class="number">0</span>)</span><br><span class="line">            diff+=<span class="number">2</span>;</span><br><span class="line">        iter=strtok(<span class="literal">NULL</span>,<span class="string">","</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> diff==<span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>diff</code>初始化为<code>1</code>是为了刚开始处理根节点的时候不至于在第一步得到<code>false</code>, 并且这样能够使得根节点与其他节点是使用同一逻辑处理。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Leetcode 331 的题解&lt;/p&gt;
    
    </summary>
    
      <category term="编程" scheme="https://unnamed42.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
    
      <category term="Leetcode" scheme="https://unnamed42.github.io/tags/Leetcode/"/>
    
      <category term="算法" scheme="https://unnamed42.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>Leetcode 268 Missing Number</title>
    <link href="https://unnamed42.github.io/2016-02-02-Leetcode-268-Missing-Number.html"/>
    <id>https://unnamed42.github.io/2016-02-02-Leetcode-268-Missing-Number.html</id>
    <published>2016-02-02T14:30:47.000Z</published>
    <updated>2017-06-10T05:52:13.000Z</updated>
    
    <content type="html"><![CDATA[<p>Leetcode 268 的题解</p><a id="more"></a><p>题目如下：</p><blockquote><p>Given an array containing n distinct numbers taken from 0, 1, 2, …, n, find the one that is missing from the array.</p><p>For example, Given <code>nums = [0, 1, 3]</code> return <code>2</code>.</p><p><strong>Note</strong>: Your algorithm should run in linear runtime complexity. Could you implement it using only constant extra space complexity?</p></blockquote><hr><p><strong>解法1</strong>：</p><p>由等差数列求和可知，从$ 0 $到$ n $的自然数之和为$ {n(n+1)} \over 2 $. 我们求得给出数组的和，二者相减，就可得到缺失的那个数。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">missingNumber</span><span class="params">(<span class="keyword">int</span>* nums, <span class="keyword">int</span> numsSize)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> sum_n=numsSize*(numsSize+<span class="number">1</span>)/<span class="number">2</span>,sum_nums=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;numsSize;i++)</span><br><span class="line">        sum_nums+=nums[i];</span><br><span class="line">    <span class="keyword">return</span> sum_n-sum_nums;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>该方法有个缺点，就是当<code>numsSize</code>很大的时候，求出来的和可能会溢出。</p><p><strong>解法2</strong>：</p><p>该方法用到了按位异或运算的几个性质：</p><ol><li><p>假设<code>a</code>与<code>b</code>均为整数，则<code>(a^b)^b=a</code>.</p></li><li><p><code>0^a=a</code>.</p></li></ol><p>考虑到一次遍历过程中，下标<code>i</code>的可能取值为$ 0 $到$ numsSize-1 $, 数组里<code>numsSize</code>个数的范围则是$ 0 $到$ numsSize $. 使用变量<code>res</code>来存放结果，如果让<code>res</code>每次都与<code>i</code>和<code>nums[i]</code>进行异或，则最终能够成对消去大部分的数，剩下来的结果则是我们真正要求的那个数。下面我们来探讨<code>res</code>的初值。</p><p>由于<code>i</code>始终小于<code>numsSize</code>, 因此如果将<code>res</code>初始化为<code>0</code>则会出错：正好缺失$ numsSize $时，遍历一次数组，异或完毕后所有的数全部成对消去，<code>res</code>必定为0. 因此我们需要将<code>res</code>初始化为$ numsSize $, 则不缺$ numsSize $时其他的数能够成对消去，结果为所缺的那个数；缺$ numsSize $时其他的数全部消去，剩下的就是$ numsSize $.</p><p>代码如下：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">missingNumber</span><span class="params">(<span class="keyword">int</span>* nums, <span class="keyword">int</span> numsSize)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> res=numsSize;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;numsSize;i++)&#123;</span><br><span class="line">        res^=i;</span><br><span class="line">        res^=nums[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>该解法能够避免解法1中潜在的溢出风险。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Leetcode 268 的题解&lt;/p&gt;
    
    </summary>
    
      <category term="编程" scheme="https://unnamed42.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
    
      <category term="Leetcode" scheme="https://unnamed42.github.io/tags/Leetcode/"/>
    
      <category term="算法" scheme="https://unnamed42.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>西方政治坐标测试</title>
    <link href="https://unnamed42.github.io/2016-01-10-%E8%A5%BF%E6%96%B9%E6%94%BF%E6%B2%BB%E5%9D%90%E6%A0%87%E6%B5%8B%E8%AF%95.html"/>
    <id>https://unnamed42.github.io/2016-01-10-西方政治坐标测试.html</id>
    <published>2016-01-10T14:02:52.000Z</published>
    <updated>2017-06-10T05:52:14.000Z</updated>
    
    <content type="html"><![CDATA[<p><del>没错我玩上瘾了！</del></p><hr><p>本测试转载自政治坐标测试北大未名版之<a href="http://zuobiao.me/~zuobiaom/politicalcompass/" target="_blank" rel="external">西方政治坐标系测试</a></p><a id="more"></a><p>以下测试题目原文来自英文「<a href="https://www.politicalcompass.org/test" target="_blank" rel="external">政治指南针</a>」网站，英文版权属于原作者。本站对该测试的准确性及所造成的一切后果不负责。测试结果不能作为任何学术研究的依据。<br>本测试的目的是反映答题者经济与政治观念「左与右」的坐标。本测试系统建立于西方政治价值体系基础之上，<strong>某些问题强烈的依赖于具体的西方社会环境，未必能够充分反映中国国情。</strong><br>题目分六个部分，必须全部回答。</p><script type="text/javascript">$(function(){$("#submit").click(function(){var t=0,a=0;$('#questions input[name^="c"]:checked').each(function(){t+=parseFloat($(this).attr("data-x")),a+=parseFloat($(this).attr("data-y"))}),t=Math.round(100*t)/100,a=Math.round(100*a)/100,$("#answer").html("经济立场坐标（左翼<->右翼）"+t+"，政治立场坐标（专制<->自由）"+a)})});</script><style>.red{color:red}#wrapper{text-align:center}</style><form id="questions"><p><strong>第一部分</strong>：你如何看待国家与世界。</p><ol><li>如果全球化无法避免，应该首先为人服务而不是跨国公司的利益。<br><input name="c1" type="radio" data-x="0.5" data-y="0" checked>强烈反对<br><input name="c1" type="radio" data-x="0.25" data-y="0">反对<br><input name="c1" type="radio" data-x="-0.375" data-y="0">同意<br><input name="c1" type="radio" data-x="-0.625" data-y="0">强烈同意<br></li><li>我会一直支持我的国家，无论它是对是错。<br><input name="c2" type="radio" data-x="0" data-y="-0.26" checked>强烈反对<br><input name="c2" type="radio" data-x="0" data-y="-0.155">反对<br><input name="c2" type="radio" data-x="0" data-y="0.15">同意<br><input name="c2" type="radio" data-x="0" data-y="0.255">强烈同意<br></li><li>没有人可以选择祖国，因此为祖国自豪很愚蠢。<br><input name="c3" type="radio" data-x="0" data-y="0.23" checked>强烈反对<br><input name="c3" type="radio" data-x="0" data-y="0.13">反对<br><input name="c3" type="radio" data-x="0" data-y="-0.13">同意<br><input name="c3" type="radio" data-x="0" data-y="-0.23">强烈同意<br></li><li>我的种族和其他种族相比有很多出众的优点。<br><input name="c4" type="radio" data-x="0" data-y="-0.23" checked>强烈反对<br><input name="c4" type="radio" data-x="0" data-y="-0.13">反对<br><input name="c4" type="radio" data-x="0" data-y="0.13">同意<br><input name="c4" type="radio" data-x="0" data-y="0.23">强烈同意<br></li><li>敌人的敌人是朋友。<br><input name="c5" type="radio" data-x="0" data-y="-0.23" checked>强烈反对<br><input name="c5" type="radio" data-x="0" data-y="-0.13">反对<br><input name="c5" type="radio" data-x="0" data-y="0.13">同意<br><input name="c5" type="radio" data-x="0" data-y="0.23">强烈同意<br></li><li>违反国际法的军事行动有时候是正当的。<br><input name="c6" type="radio" data-x="0" data-y="-0.2" checked>强烈反对<br><input name="c6" type="radio" data-x="0" data-y="-0.1">反对<br><input name="c6" type="radio" data-x="0" data-y="0.11">同意<br><input name="c6" type="radio" data-x="0" data-y="0.21">强烈同意<br></li><li>现在信息和娱乐已经令人忧虑的交融在一起。<br><input name="c7" type="radio" data-x="0" data-y="0.23" checked>强烈反对<br><input name="c7" type="radio" data-x="0" data-y="0.13">反对<br><input name="c7" type="radio" data-x="0" data-y="-0.13">同意<br><input name="c7" type="radio" data-x="0" data-y="-0.23">强烈同意<br></li></ol><p><strong>第二部分</strong>：经济问题。</p><ol><li>人民根本上说是通过阶级而不是国籍来区分的。<br><input name="c8" type="radio" data-x="0.5" data-y="0" checked>强烈反对<br><input name="c8" type="radio" data-x="0.25" data-y="0">反对<br><input name="c8" type="radio" data-x="-0.375" data-y="0">同意<br><input name="c8" type="radio" data-x="-0.625" data-y="0">强烈同意<br></li><li>控制通货膨胀比控制失业要重要。<br><input name="c9" type="radio" data-x="-0.5" data-y="0" checked>强烈反对<br><input name="c9" type="radio" data-x="-0.25" data-y="0">反对<br><input name="c9" type="radio" data-x="0.375" data-y="0">同意<br><input name="c9" type="radio" data-x="0.625" data-y="0">强烈同意<br></li><li>因为无法信任企业能够自觉保护环境，因此需要规章来规范它们。<br><input name="c10" type="radio" data-x="0.5" data-y="0" checked>强烈反对<br><input name="c10" type="radio" data-x="0.25" data-y="0">反对<br><input name="c10" type="radio" data-x="-0.25" data-y="0">同意<br><input name="c10" type="radio" data-x="-0.5" data-y="0">强烈同意<br></li><li>“各尽所能，各取所需”从根本上说是个好的想法。<br><input name="c11" type="radio" data-x="0.5" data-y="0" checked>强烈反对<br><input name="c11" type="radio" data-x="0.25" data-y="0">反对<br><input name="c11" type="radio" data-x="-0.375" data-y="0">同意<br><input name="c11" type="radio" data-x="-0.625" data-y="0">强烈同意<br></li><li>令人沮丧的是在我们的社会中一些最基本的事物比如饮用水现在都成为了瓶装、注明商标的商品。<br><input name="c12" type="radio" data-x="0.5" data-y="0" checked>强烈反对<br><input name="c12" type="radio" data-x="0.25" data-y="0">反对<br><input name="c12" type="radio" data-x="-0.5" data-y="0">同意<br><input name="c12" type="radio" data-x="-0.75" data-y="0">强烈同意<br></li><li>土地不应当被作为商品买卖。<br><input name="c13" type="radio" data-x="0.5" data-y="0" checked>强烈反对<br><input name="c13" type="radio" data-x="0.25" data-y="0">反对<br><input name="c13" type="radio" data-x="-0.5" data-y="0">同意<br><input name="c13" type="radio" data-x="-0.75" data-y="0">强烈同意<br></li><li>很多人赚钱完全是靠运作资金，而并没有为社会做出任何贡献，这是令人不爽的。<br><input name="c14" type="radio" data-x="0.5" data-y="0" checked>强烈反对<br><input name="c14" type="radio" data-x="0.25" data-y="0">反对<br><input name="c14" type="radio" data-x="-0.375" data-y="0">同意<br><input name="c14" type="radio" data-x="-0.625" data-y="0">强烈同意<br></li><li>保护主义对贸易来说有时候是必须的。<br><input name="c15" type="radio" data-x="0.5" data-y="0" checked>强烈反对<br><input name="c15" type="radio" data-x="0.25" data-y="0">反对<br><input name="c15" type="radio" data-x="-0.5" data-y="0">同意<br><input name="c15" type="radio" data-x="-0.625" data-y="0">强烈同意<br></li><li>公司为它的股东赚取利润就是它仅有的社会职责。<br><input name="c16" type="radio" data-x="-0.5" data-y="0" checked>强烈反对<br><input name="c16" type="radio" data-x="-0.25" data-y="0">反对<br><input name="c16" type="radio" data-x="0.375" data-y="0">同意<br><input name="c16" type="radio" data-x="0.625" data-y="0">强烈同意<br></li><li>对富人征的税太高了。<br><input name="c17" type="radio" data-x="-0.5" data-y="0" checked>强烈反对<br><input name="c17" type="radio" data-x="-0.25" data-y="0">反对<br><input name="c17" type="radio" data-x="0.375" data-y="0">同意<br><input name="c17" type="radio" data-x="0.5" data-y="0">强烈同意<br></li><li>那些付得起钱的人应该有权获得更好的医疗服务。<br><input name="c18" type="radio" data-x="-0.5" data-y="0" checked>强烈反对<br><input name="c18" type="radio" data-x="-0.25" data-y="0">反对<br><input name="c18" type="radio" data-x="0.25" data-y="0">同意<br><input name="c18" type="radio" data-x="0.5" data-y="0">强烈同意<br></li><li>政府应该惩罚误导公众的商业行为。<br><input name="c19" type="radio" data-x="0.5" data-y="0" checked>强烈反对<br><input name="c19" type="radio" data-x="0.25" data-y="0">反对<br><input name="c19" type="radio" data-x="-0.25" data-y="0">同意<br><input name="c19" type="radio" data-x="-0.375" data-y="0">强烈同意<br></li><li>一个真正的自由市场需要对跨国大公司的垄断进行限制。<br><input name="c20" type="radio" data-x="0" data-y="0" checked>强烈反对<br><input name="c20" type="radio" data-x="0" data-y="0">反对<br><input name="c20" type="radio" data-x="0" data-y="0">同意<br><input name="c20" type="radio" data-x="0" data-y="0">强烈同意<br></li><li>市场越自由，人民越自由。<br><input name="c21" type="radio" data-x="-0.5" data-y="0" checked>强烈反对<br><input name="c21" type="radio" data-x="-0.25" data-y="0">反对<br><input name="c21" type="radio" data-x="0.5" data-y="0">同意<br><input name="c21" type="radio" data-x="0.75" data-y="0">强烈同意<br></li></ol><p><strong>第三部分</strong>：社会价值观。</p><ol><li>除非妇女的生命受到危及，否则总应该禁止堕胎。<br><input name="c22" type="radio" data-x="0" data-y="-0.2" checked>强烈反对<br><input name="c22" type="radio" data-x="0" data-y="-0.1">反对<br><input name="c22" type="radio" data-x="0" data-y="0.11">同意<br><input name="c22" type="radio" data-x="0" data-y="0.21">强烈同意<br></li><li>一切当权者都应该受到质询。<br><input name="c23" type="radio" data-x="0" data-y="0.23" checked>强烈反对<br><input name="c23" type="radio" data-x="0" data-y="0.175">反对<br><input name="c23" type="radio" data-x="0" data-y="-0.13">同意<br><input name="c23" type="radio" data-x="0" data-y="-0.23">强烈同意<br></li><li>以眼还眼，以牙还牙。<br><input name="c24" type="radio" data-x="0" data-y="-0.18" checked>强烈反对<br><input name="c24" type="radio" data-x="0" data-y="-0.125">反对<br><input name="c24" type="radio" data-x="0" data-y="0.08">同意<br><input name="c24" type="radio" data-x="0" data-y="0.18">强烈同意<br></li><li>税收不应该支持那些没法靠商业手段活下去的剧院和博物馆。<br><input name="c25" type="radio" data-x="-0.5" data-y="0" checked>强烈反对<br><input name="c25" type="radio" data-x="-0.25" data-y="0">反对<br><input name="c25" type="radio" data-x="0.5" data-y="0">同意<br><input name="c25" type="radio" data-x="0.625" data-y="0">强烈同意<br></li><li>学校不应该强制学生签到。<br><input name="c26" type="radio" data-x="0" data-y="0.26" checked>强烈反对<br><input name="c26" type="radio" data-x="0" data-y="0.055">反对<br><input name="c26" type="radio" data-x="0" data-y="-0.15">同意<br><input name="c26" type="radio" data-x="0" data-y="-0.255">强烈同意<br></li><li>所有人都有自己的权利，但让不同类型的人保持自己的个性对每个人来说都更好。<br><input name="c27" type="radio" data-x="0" data-y="-0.23" checked>强烈反对<br><input name="c27" type="radio" data-x="0" data-y="-0.13">反对<br><input name="c27" type="radio" data-x="0" data-y="0.13">同意<br><input name="c27" type="radio" data-x="0" data-y="0.23">强烈同意<br></li><li>好父母有时候也不得不打孩子。<br><input name="c28" type="radio" data-x="0" data-y="-0.26" checked>强烈反对<br><input name="c28" type="radio" data-x="0" data-y="-0.155">反对<br><input name="c28" type="radio" data-x="0" data-y="0.1">同意<br><input name="c28" type="radio" data-x="0" data-y="0.255">强烈同意<br></li><li>孩子对父母有秘密很正常。<br><input name="c29" type="radio" data-x="0" data-y="0.23" checked>强烈反对<br><input name="c29" type="radio" data-x="0" data-y="0.13">反对<br><input name="c29" type="radio" data-x="0" data-y="-0.08">同意<br><input name="c29" type="radio" data-x="0" data-y="-0.23">强烈同意<br></li><li>大麻应该合法。<br><input name="c30" type="radio" data-x="0" data-y="0.2" checked>强烈反对<br><input name="c30" type="radio" data-x="0" data-y="0.045">反对<br><input name="c30" type="radio" data-x="0" data-y="-0.11">同意<br><input name="c30" type="radio" data-x="0" data-y="-0.21">强烈同意<br></li><li>学校的首要职能是让下一代人能找到工作。<br><input name="c31" type="radio" data-x="0" data-y="-0.26" checked>强烈反对<br><input name="c31" type="radio" data-x="0" data-y="-0.155">反对<br><input name="c31" type="radio" data-x="0" data-y="0.1">同意<br><input name="c31" type="radio" data-x="0" data-y="0.255">强烈同意<br></li><li>应当不允许有严重遗传疾病的残疾人生育。<br><input name="c32" type="radio" data-x="0" data-y="-0.29" checked>强烈反对<br><input name="c32" type="radio" data-x="0" data-y="-0.185">反对<br><input name="c32" type="radio" data-x="0" data-y="0.17">同意<br><input name="c32" type="radio" data-x="0" data-y="0.275">强烈同意<br></li><li>孩子最重要的事是学会遵守纪律。<br><input name="c33" type="radio" data-x="0" data-y="-0.26" checked>强烈反对<br><input name="c33" type="radio" data-x="0" data-y="-0.155">反对<br><input name="c33" type="radio" data-x="0" data-y="0.15">同意<br><input name="c33" type="radio" data-x="0" data-y="0.255">强烈同意<br></li><li>没有野蛮人和文明人，只有不同的文化。<br><input name="c34" type="radio" data-x="0" data-y="0.23" checked>强烈反对<br><input name="c34" type="radio" data-x="0" data-y="0.175">反对<br><input name="c34" type="radio" data-x="0" data-y="-0.13">同意<br><input name="c34" type="radio" data-x="0" data-y="-0.23">强烈同意<br></li><li>那些有能力工作却拒绝工作机会的人，不应该接受社会的资助。<br><input name="c35" type="radio" data-x="0" data-y="-0.23" checked>强烈反对<br><input name="c35" type="radio" data-x="0" data-y="-0.13">反对<br><input name="c35" type="radio" data-x="0" data-y="0.13">同意<br><input name="c35" type="radio" data-x="0" data-y="0.23">强烈同意<br></li><li>当你遇到困难时，最好不要去想它，而是不断地做令人高兴的事。<br><input name="c36" type="radio" data-x="0" data-y="-0.2" checked>强烈反对<br><input name="c36" type="radio" data-x="0" data-y="-0.1">反对<br><input name="c36" type="radio" data-x="0" data-y="0.11">同意<br><input name="c36" type="radio" data-x="0" data-y="0.21">强烈同意<br></li><li>第一代移民永远无法完全融入他们的新国家。<br><input name="c37" type="radio" data-x="0" data-y="-0.23" checked>强烈反对<br><input name="c37" type="radio" data-x="0" data-y="-0.075">反对<br><input name="c37" type="radio" data-x="0" data-y="0.13">同意<br><input name="c37" type="radio" data-x="0" data-y="0.23">强烈同意<br></li><li>有利于最成功的企业的事物，最终也总是有利于我们大家的。<br><input name="c38" type="radio" data-x="-0.5" data-y="0" checked>强烈反对<br><input name="c38" type="radio" data-x="-0.25" data-y="0">反对<br><input name="c38" type="radio" data-x="0.75" data-y="0">同意<br><input name="c38" type="radio" data-x="0.875" data-y="0">强烈同意<br></li><li>任何广播电视机构，无论它的内容有多独立，都不应该接受公共资金的支持。<br><input name="c39" type="radio" data-x="-0.5" data-y="0" checked>强烈反对<br><input name="c39" type="radio" data-x="-0.375" data-y="0">反对<br><input name="c39" type="radio" data-x="0.125" data-y="0">同意<br><input name="c39" type="radio" data-x="0.25" data-y="0">强烈同意<br></li></ol><p><strong>第四部分</strong>：你如何看待更广阔的社会。</p><p><ol><li>在反恐的名义下，公民自由被过度限制了。<br><input name="c40" type="radio" data-x="0" data-y="0.26" checked>强烈反对<br><input name="c40" type="radio" data-x="0" data-y="0.155">反对<br><input name="c40" type="radio" data-x="0" data-y="-0.1">同意<br><input name="c40" type="radio" data-x="0" data-y="-0.255">强烈同意<br></li><li>一党制国家的一个显著优点是它避免了在民主政体中耽误发展的所有那些争论。<br><input name="c41" type="radio" data-x="0" data-y="-0.29" checked>强烈反对<br><input name="c41" type="radio" data-x="0" data-y="-0.135">反对<br><input name="c41" type="radio" data-x="0" data-y="0.17">同意<br><input name="c41" type="radio" data-x="0" data-y="0.275">强烈同意<br></li><li>尽管在电子时代官方的监听更容易了，但只有坏人才需要对此担忧。<br><input name="c42" type="radio" data-x="0" data-y="-0.26" checked>强烈反对<br><input name="c42" type="radio" data-x="0" data-y="-0.155">反对<br><input name="c42" type="radio" data-x="0" data-y="0.15">同意<br><input name="c42" type="radio" data-x="0" data-y="0.255">强烈同意<br></li><li>对罪大恶极的犯罪分子，死刑不失为一种选项。<br><input name="c43" type="radio" data-x="0" data-y="-0.26" checked>强烈反对<br><input name="c43" type="radio" data-x="0" data-y="-0.155">反对<br><input name="c43" type="radio" data-x="0" data-y="0.15">同意<br><input name="c43" type="radio" data-x="0" data-y="0.255">强烈同意<br></li><li>在一个文明社会，一个人必须遵从上级、命令下级。<br><input name="c44" type="radio" data-x="0" data-y="-0.2" checked>强烈反对<br><input name="c44" type="radio" data-x="0" data-y="-0.1">反对<br><input name="c44" type="radio" data-x="0" data-y="0.11">同意<br><input name="c44" type="radio" data-x="0" data-y="0.21">强烈同意<br></li><li>那些什么也没有表达的抽象艺术根本就不应该被称为艺术。<br><input name="c45" type="radio" data-x="0" data-y="-0.26" checked>强烈反对<br><input name="c45" type="radio" data-x="0" data-y="-0.155">反对<br><input name="c45" type="radio" data-x="0" data-y="0.15">同意<br><input name="c45" type="radio" data-x="0" data-y="0.255">强烈同意<br></li><li>在刑事审判中，惩罚比改造更重要。<br><input name="c46" type="radio" data-x="0" data-y="-0.23" checked>强烈反对<br><input name="c46" type="radio" data-x="0" data-y="-0.13">反对<br><input name="c46" type="radio" data-x="0" data-y="0.13">同意<br><input name="c46" type="radio" data-x="0" data-y="0.23">强烈同意<br></li><li>改造有些犯罪分子就是浪费时间。<br><input name="c47" type="radio" data-x="0" data-y="-0.26" checked>强烈反对<br><input name="c47" type="radio" data-x="0" data-y="-0.155">反对<br><input name="c47" type="radio" data-x="0" data-y="0.15">同意<br><input name="c47" type="radio" data-x="0" data-y="0.255">强烈同意<br></li><li>商人和制造业者比作家和艺术家更重要。<br><input name="c48" type="radio" data-x="0" data-y="-0.18" checked>强烈反对<br><input name="c48" type="radio" data-x="0" data-y="-0.08">反对<br><input name="c48" type="radio" data-x="0" data-y="0.08">同意<br><input name="c48" type="radio" data-x="0" data-y="0.18">强烈同意<br></li><li>母亲们可以有职业，但她们的首要职责是家庭主妇。<br><input name="c49" type="radio" data-x="0" data-y="-0.23" checked>强烈反对<br><input name="c49" type="radio" data-x="0" data-y="-0.13">反对<br><input name="c49" type="radio" data-x="0" data-y="0.13">同意<br><input name="c49" type="radio" data-x="0" data-y="0.23">强烈同意<br></li><li>跨国公司正在不道德地开发发展中国家的植物基因资源。<br><input name="c50" type="radio" data-x="0" data-y="0.23" checked>强烈反对<br><input name="c50" type="radio" data-x="0" data-y="0.13">反对<br><input name="c50" type="radio" data-x="0" data-y="-0.13">同意<br><input name="c50" type="radio" data-x="0" data-y="-0.23">强烈同意<br></li><li>同现有体制和谐相处是成熟的重要一方面。<br><input name="c51" type="radio" data-x="0" data-y="-0.2" checked>强烈反对<br><input name="c51" type="radio" data-x="0" data-y="-0.1">反对<br><input name="c51" type="radio" data-x="0" data-y="0.11">同意<br><input name="c51" type="radio" data-x="0" data-y="0.21">强烈同意<br></li></ol></p><p><strong>第五部分</strong>：关于宗教。</p><p><ol><li>占星术精确地解释了很多东西。<br><input name="c52" type="radio" data-x="0" data-y="-0.23" checked>强烈反对<br><input name="c52" type="radio" data-x="0" data-y="-0.13">反对<br><input name="c52" type="radio" data-x="0" data-y="0.13">同意<br><input name="c52" type="radio" data-x="0" data-y="0.23">强烈同意<br></li><li>你如果不信宗教就不可能道德。<br><input name="c53" type="radio" data-x="0" data-y="-0.2" checked>强烈反对<br><input name="c53" type="radio" data-x="0" data-y="-0.1">反对<br><input name="c53" type="radio" data-x="0" data-y="0.11">同意<br><input name="c53" type="radio" data-x="0" data-y="0.21">强烈同意<br></li><li>慈善捐助在帮助真正的弱势群体时做得比社会保障要好。<br><input name="c54" type="radio" data-x="-0.5" data-y="0" checked>强烈反对<br><input name="c54" type="radio" data-x="-0.375" data-y="0">反对<br><input name="c54" type="radio" data-x="0.625" data-y="0">同意<br><input name="c54" type="radio" data-x="0.75" data-y="0">强烈同意<br></li><li>有些人天生不走运。<br><input name="c55" type="radio" data-x="0" data-y="-0.23" checked>强烈反对<br><input name="c55" type="radio" data-x="0" data-y="-0.13">反对<br><input name="c55" type="radio" data-x="0" data-y="0.13">同意<br><input name="c55" type="radio" data-x="0" data-y="0.23">强烈同意<br></li><li>我孩子的学校向他传授宗教价值观，这点非常重要。<br><input name="c56" type="radio" data-x="0" data-y="-0.2" checked>强烈反对<br><input name="c56" type="radio" data-x="0" data-y="-0.1">反对<br><input name="c56" type="radio" data-x="0" data-y="0.11">同意<br><input name="c56" type="radio" data-x="0" data-y="0.21">强烈同意<br></li></ol></p><p><strong>第六部分</strong>：关于性。</p><ol><li>婚姻之外的性是不道德的。<br><input name="c57" type="radio" data-x="0" data-y="-0.23" checked>强烈反对<br><input name="c57" type="radio" data-x="0" data-y="-0.175">反对<br><input name="c57" type="radio" data-x="0" data-y="0.13">同意<br><input name="c57" type="radio" data-x="0" data-y="0.23">强烈同意<br></li><li>一对稳定、相爱的同性伴侣，应有收养孩子的权利。<br><input name="c58" type="radio" data-x="0" data-y="0.23" checked>强烈反对<br><input name="c58" type="radio" data-x="0" data-y="0.175">反对<br><input name="c58" type="radio" data-x="0" data-y="-0.13">同意<br><input name="c58" type="radio" data-x="0" data-y="-0.23">强烈同意<br></li><li>由成年人自愿演出的色情影视应该对成人合法化。<br><input name="c59" type="radio" data-x="0" data-y="0.23" checked>强烈反对<br><input name="c59" type="radio" data-x="0" data-y="0.13">反对<br><input name="c59" type="radio" data-x="0" data-y="-0.13">同意<br><input name="c59" type="radio" data-x="0" data-y="-0.23">强烈同意<br></li><li>在私人卧室里两个成年人只见不管做什么，只要是自愿的，国家就管不着。<br><input name="c60" type="radio" data-x="0" data-y="0.26" checked>强烈反对<br><input name="c60" type="radio" data-x="0" data-y="0.155">反对<br><input name="c60" type="radio" data-x="0" data-y="-0.15">同意<br><input name="c60" type="radio" data-x="0" data-y="-0.255">强烈同意<br></li><li>没有人会天生同性恋。<br><input name="c61" type="radio" data-x="0" data-y="-0.26" checked>强烈反对<br><input name="c61" type="radio" data-x="0" data-y="-0.155">反对<br><input name="c61" type="radio" data-x="0" data-y="0.15">同意<br><input name="c61" type="radio" data-x="0" data-y="0.255">强烈同意<br></li><li>社会对性开放并没错，但现在已经开放的过分了。<br><input name="c62" type="radio" data-x="0" data-y="-0.2" checked>强烈反对<br><input name="c62" type="radio" data-x="0" data-y="-0.1">反对<br><input name="c62" type="radio" data-x="0" data-y="0.11">同意<br><input name="c62" type="radio" data-x="0" data-y="0.21">强烈同意<br></li></ol></form><div id="wrapper"><button id="submit" type="button" class="button button-inverse button-rounded">提交</button><br><span id="answer" class="red"></span></div><hr><p>横坐标反映经济观念，负值为左(<a href="https://en.wikipedia.org/wiki/Communism" target="_blank" rel="external">共产主义</a>, <a href="https://en.wikipedia.org/wiki/Collectivism" target="_blank" rel="external">集体主义</a>)，正值为右(<a href="https://en.wikipedia.org/wiki/Neoliberalism" target="_blank" rel="external">新自由主义</a>, <a href="https://en.wikipedia.org/wiki/Libertarianism" target="_blank" rel="external">自由意志主义</a>)。<br>纵坐标反映政治社会观念，负值为自由(<a href="https://en.wikipedia.org/wiki/Anarchism" target="_blank" rel="external">无政府主义</a>, 自由意志论者)，正值为专制或保守(<a href="https://en.wikipedia.org/wiki/Fascism" target="_blank" rel="external">法西斯主义</a>, <a href="https://en.wikipedia.org/wiki/Authoritarianism" target="_blank" rel="external">独裁主义</a>)。</p><p>本测试系统建立于西方政治价值体系基础之上，某些问题强烈的依赖于具体的西方社会环境，未必能够充分反映中国国情。根据周围人群的实验结果，中国人的测试结果普遍位于第三象限（即两坐标均为负值），平均值位于<span class="red">(-2,-2)</span>附近。为了区分中国人习惯意义上的「左与右」，可以以<span class="red">(-2,-2)</span>为坐标原点重新划分坐标平面，即经济坐标小于<span class="red">-2</span>为左，反之为右。政治坐标小于<span class="red">-2</span>为自由，反之为保守或专制。</p><p>下面是著名政治人物的坐标位置以供参考：<br>第一象限（经济右，政治保守）：希特勒，撒切尔夫人，布什，布莱尔，希拉克。<br>第二象限（经济左，政治保守）：斯大林，萨达姆，教皇本笃十四世。<br>第三象限（经济左，政治自由）：甘地，达赖喇嘛，曼德拉。<br>第四象限（经济右，政治自由）：弗里德曼，哈耶克。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;del&gt;没错我玩上瘾了！&lt;/del&gt;&lt;/p&gt;&lt;hr&gt;&lt;p&gt;本测试转载自政治坐标测试北大未名版之&lt;a href=&quot;http://zuobiao.me/~zuobiaom/politicalcompass/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;西方政治坐标系测试&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="杂项" scheme="https://unnamed42.github.io/categories/%E6%9D%82%E9%A1%B9/"/>
    
    
      <category term="测试" scheme="https://unnamed42.github.io/tags/%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>Hexo 标签用法</title>
    <link href="https://unnamed42.github.io/2016-01-06-Hexo-%E6%A0%87%E7%AD%BE%E7%94%A8%E6%B3%95.html"/>
    <id>https://unnamed42.github.io/2016-01-06-Hexo-标签用法.html</id>
    <published>2016-01-06T10:40:01.000Z</published>
    <updated>2017-12-06T08:56:34.000Z</updated>
    
    <content type="html"><![CDATA[<p>搬运自 <a href="http://Hexo.io" target="_blank" rel="noopener">Hexo.io</a> 的标签插件使用样例，以及我自己添加的一部分</p><p>UPDATE 2016/3/9: 添加内容“Github标签”</p><a id="more"></a><p>标签插件和 Front-matter 中的标签不同，它们是用于在文章中快速插入特定内容的插件。</p><h2 id="引用块">引用块</h2><p>在文章中插入引言，可包含作者、来源和标题。</p><p><strong>别号：</strong> quote</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% blockquote [author[, source]] [link] [source_link_title] %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endblockquote %&#125;</span><br></pre></td></tr></table></figure><h3 id="样例">样例</h3><p><strong>没有提供参数，则只输出普通的 blockquote</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% blockquote %&#125;</span><br><span class="line">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque hendrerit lacus ut purus iaculis feugiat. Sed nec tempor elit, quis aliquam neque. Curabitur sed diam eget dolor fermentum semper at eu lorem.</span><br><span class="line">&#123;% endblockquote %&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque hendrerit lacus ut purus iaculis feugiat. Sed nec tempor elit, quis aliquam neque. Curabitur sed diam eget dolor fermentum semper at eu lorem.</p></blockquote><p><strong>引用书上的句子</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% blockquote David Levithan, Wide Awake %&#125;</span><br><span class="line">Do not just seek happiness for yourself. Seek happiness for all. Through kindness. Through mercy.</span><br><span class="line">&#123;% endblockquote %&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Do not just seek happiness for yourself. Seek happiness for all. Through kindness. Through mercy.</p><footer><strong>David Levithan</strong><cite>Wide Awake</cite></footer></blockquote><p><strong>引用 Twitter</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% blockquote @DevDocs https://twitter.com/devdocs/status/356095192085962752 %&#125;</span><br><span class="line">NEW: DevDocs now comes with syntax highlighting. http://devdocs.io</span><br><span class="line">&#123;% endblockquote %&#125;</span><br></pre></td></tr></table></figure><blockquote><p>NEW: DevDocs now comes with syntax highlighting. <a href="http://devdocs.io" target="_blank" rel="noopener">http://devdocs.io</a></p><footer><strong>@DevDocs</strong><cite><a href="https://twitter.com/devdocs/status/356095192085962752" target="_blank" rel="noopener">twitter.com/devdocs/status/356095192085962752</a></cite></footer></blockquote><p><strong>引用网络上的文章</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% blockquote Seth Godin http://sethgodin.typepad.com/seths_blog/2009/07/welcome-to-island-marketing.html Welcome to Island Marketing %&#125;</span><br><span class="line">Every interaction is both precious and an opportunity to delight.</span><br><span class="line">&#123;% endblockquote %&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Every interaction is both precious and an opportunity to delight.</p><footer><strong>Seth Godin</strong><cite><a href="http://sethgodin.typepad.com/seths_blog/2009/07/welcome-to-island-marketing.html" target="_blank" rel="noopener">Welcome to Island Marketing</a></cite></footer></blockquote><h2 id="代码块">代码块</h2><p>在文章中插入代码。</p><p><strong>别名：</strong> code</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% codeblock [title] [lang:language] [url] [link text] %&#125;</span><br><span class="line">code snippet</span><br><span class="line">&#123;% endcodeblock %&#125;</span><br></pre></td></tr></table></figure><h3 id="样例-v2">样例</h3><p><strong>普通的代码块</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% codeblock %&#125;</span><br><span class="line">alert(&apos;Hello World!&apos;);</span><br><span class="line">&#123;% endcodeblock %&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert(&apos;Hello World!&apos;);</span><br></pre></td></tr></table></figure><p><strong>指定语言</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% codeblock lang:objc %&#125;</span><br><span class="line">[rectangle setX: 10 y: 10 width: 20 height: 20];</span><br><span class="line">&#123;% endcodeblock %&#125;</span><br></pre></td></tr></table></figure><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[rectangle setX: <span class="number">10</span> y: <span class="number">10</span> width: <span class="number">20</span> height: <span class="number">20</span>];</span><br></pre></td></tr></table></figure><p><strong>附加说明</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% codeblock Array.map %&#125;</span><br><span class="line">array.map(callback[, thisArg])</span><br><span class="line">&#123;% endcodeblock %&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><figcaption><span>Array.map</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array.map(callback[, thisArg])</span><br></pre></td></tr></table></figure><p><strong>附加说明和网址</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% codeblock _.compact http://underscorejs.org/#compact Underscore.js %&#125;</span><br><span class="line">_.compact([0, 1, false, 2, &apos;&apos;, 3]);</span><br><span class="line">=&gt; [1, 2, 3]</span><br><span class="line">&#123;% endcodeblock %&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><figcaption><span>_.compact</span><a href="http://underscorejs.org/#compact" target="_blank" rel="noopener">Underscore.js</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">_.compact([0, 1, false, 2, &apos;&apos;, 3]);</span><br><span class="line">=&gt; [1, 2, 3]</span><br></pre></td></tr></table></figure><h2 id="反引号代码块">反引号代码块</h2><p>另一种形式的代码块，不同的是它使用三个反引号来包裹。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">``` [language] [title] [url] [link text]</span><br><span class="line">code snippet</span><br><span class="line">```</span><br></pre></td></tr></table></figure><h2 id="pull-quote">Pull Quote</h2><p>在文章中插入 Pull quote。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% pullquote [class] %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endpullquote %&#125;</span><br></pre></td></tr></table></figure><h2 id="jsfiddle">jsFiddle</h2><p>在文章中嵌入 jsFiddle。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% jsfiddle shorttag [tabs] [skin] [width] [height] %&#125;</span><br></pre></td></tr></table></figure><h2 id="gist">Gist</h2><p>在文章中嵌入 Gist。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% gist gist_id [filename] %&#125;</span><br></pre></td></tr></table></figure><h2 id="iframe">iframe</h2><p>在文章中插入 iframe。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% iframe url [width] [height] %&#125;</span><br></pre></td></tr></table></figure><h2 id="image">Image</h2><p>在文章中插入指定大小的图片。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% img [class names] /path/to/image [width] [height] [title text [alt text]] %&#125;</span><br></pre></td></tr></table></figure><h2 id="link">Link</h2><p>在文章中插入链接，并自动给外部链接添加 <code>target=&quot;_blank&quot;</code> 属性。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% link text url [external] [title] %&#125;</span><br></pre></td></tr></table></figure><h2 id="include-code">Include Code</h2><p>插入 <code>source</code> 文件夹内的代码文件。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% include_code [title] [lang:language] path/to/file %&#125;</span><br></pre></td></tr></table></figure><h2 id="youtube">Youtube</h2><p>在文章中插入 Youtube 视频。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% youtube video_id %&#125;</span><br></pre></td></tr></table></figure><h2 id="vimeo">Vimeo</h2><p>在文章中插入 Vimeo 视频。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% vimeo video_id %&#125;</span><br></pre></td></tr></table></figure><h2 id="引用文章">引用文章</h2><p>引用其他文章的链接。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% post_path slug %&#125;</span><br><span class="line">&#123;% post_link slug [title] %&#125;</span><br></pre></td></tr></table></figure><h2 id="引用资源">引用资源</h2><p>引用文章的资源。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% asset_path slug %&#125;</span><br><span class="line">&#123;% asset_img slug [title] %&#125;</span><br><span class="line">&#123;% asset_link slug [title] %&#125;</span><br></pre></td></tr></table></figure><h2 id="raw">Raw</h2><p>如果您想在文章中插入 Swig 标签，可以尝试使用 Raw 标签，以免发生解析异常。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% raw %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endraw %&#125;</span><br></pre></td></tr></table></figure><hr><p>以上内容搬运自<a href="https://raw.githubusercontent.com/hexojs/site/master/source/zh-cn/docs/tag-plugins.md" target="_blank" rel="noopener">hexo官方文档</a></p><hr><h2 id="mathjax">MathJax</h2><p>插入利用MathJax显示的数学公式，需要安装<code>hexo-math</code>.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;% math %&#125;</span><br><span class="line">\begin&#123;aligned&#125;</span><br><span class="line">\dot&#123;x&#125; &amp; = \sigma(y-x) \\</span><br><span class="line">\dot&#123;y&#125; &amp; = \rho x - y - xz \\</span><br><span class="line">\dot&#123;z&#125; &amp; = -\beta z + xy</span><br><span class="line">\end&#123;aligned&#125;</span><br><span class="line">&#123;% endmath %&#125;</span><br></pre></td></tr></table></figure><p>$$ \begin{aligned} \dot{x} &amp; = \sigma(y-x) \ \dot{y} &amp; = \rho x - y - xz \ \dot{z} &amp; = -\beta z + xy \end{aligned} $$</p><h2 id="bilibili-视频">Bilibili 视频</h2><p>插入来自bilibili的视频，需要安装<code>hexo-tag-bilibili</code>.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% bilibili [av_id] %&#125;</span><br><span class="line">or</span><br><span class="line">&#123;% bilibili [av_id] [page] %&#125;</span><br></pre></td></tr></table></figure><h2 id="ruby-character-tag">Ruby character tag</h2><p>Ruby标签，需要安装<code>hexo-ruby-character</code>.</p><p><strong>英文</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% ruby Base|top %&#125;</span><br></pre></td></tr></table></figure><ruby>Base<rp>(</rp><rt>top</rt><rp>)</rp></ruby><p><strong>中文+拼音</strong></p><p>在top域里写中文会被自动转换成拼音。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% ruby 佐天泪子|掀裙狂魔 %&#125;</span><br></pre></td></tr></table></figure><ruby>佐天泪子<rp>(</rp><rt>xiān qún kuáng mó</rt><rp>)</rp></ruby><p><strong>其他CJK字符</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% ruby 超電磁砲|レールガン %&#125;</span><br></pre></td></tr></table></figure><ruby>超電磁砲<rp>(</rp><rt>レールガン</rt><rp>)</rp></ruby>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;搬运自 &lt;a href=&quot;http://Hexo.io&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo.io&lt;/a&gt; 的标签插件使用样例，以及我自己添加的一部分&lt;/p&gt;&lt;p&gt;UPDATE 2016/3/9: 添加内容“Github标签”&lt;/p&gt;
    
    </summary>
    
      <category term="学习" scheme="https://unnamed42.github.io/categories/%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="Hexo" scheme="https://unnamed42.github.io/tags/Hexo/"/>
    
      <category term="插件" scheme="https://unnamed42.github.io/tags/%E6%8F%92%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>DnD非官方版阵营测试</title>
    <link href="https://unnamed42.github.io/2016-01-05-DnD%E9%9D%9E%E5%AE%98%E6%96%B9%E7%89%88%E9%98%B5%E8%90%A5%E6%B5%8B%E8%AF%95.html"/>
    <id>https://unnamed42.github.io/2016-01-05-DnD非官方版阵营测试.html</id>
    <published>2016-01-05T12:14:13.000Z</published>
    <updated>2017-12-18T05:44:27.233Z</updated>
    
    <content type="html"><![CDATA[<p>由于<a href="http://www.wizards.com/default.asp?x=dnd%2Fdnd%2F20001222b" target="_blank" rel="external">官方版</a>的测试规则我还不清楚，因此只能退而求其次找了个替代版，至少我测试起来在官方版和这个版本里是一样的结果。同时，我也是第一次使用JavaScript(之前完全没摸过……)，因此效果会有点渣，希望各位不要介意。</p><p>UPDATE 2016/06/23: 参考<a href="http://maokwen.tk/2016/06/23/mbti/" target="_blank" rel="external">此处</a>更改了结果显示的方式，告别了alert</p><p>UPDATE 2016/06/28: 使用jQuery大幅改进了脚本</p><a id="more"></a><p>测试转载自<a href="http://www.360doc.com/content/13/0511/22/175820_284689475.shtml" target="_blank" rel="external">此</a>，不代表本人任何观点。</p><hr><p>回答下面的问题时，最好把自己代入，然后凭自己的第一感觉去回答，不要想当然地就认为自己会怎么怎么样，有好多事情，我告诉你，你其实做不来滴。嘻嘻……</p><form id="questions"><script type="text/javascript">$(function(){$("#submit").click(function(){var p=0,a=0;$("#questions input[name^='q']:checked").each(function(){p+=parseInt($(this).val())}),$("#questions input[name^='p']:checked").each(function(){a+=parseInt($(this).val())}),p=8>p?3:p>16?1:2,a=11>a?3:a>15?1:2;var e="<hr><h3>您的测试结果为：";switch(10*p+a){case 11:e+="Lawful Good 守序善良</h3><p>守序善良的人按照一个好人应该或必须遵循的方式行动。他致力于与邪恶斗争，惩罚邪恶决不宽容。他说真话，守承诺，帮助需要帮助的人，伸张正义直言不公。守序善良的人不喜欢看见有罪者不受惩罚。例如一位面对罪恶挺身而出的圣骑士就是守序善良的代表人物。守序善良是结合了荣誉感和同情心的阵营。已经不能用善良来形容阁下了，也许正义才是最好的形容词，您就是生活在现在的骑士，正气十足，疾恶如仇。可以认真的执行每一件事，可靠，值得信任。</p><p>忠告：不过～您知道吗，骑士在古代是死亡率相当高的一种职业！如果您对很多东西过于较真，会失去很多生活的乐趣，而且水至清则无鱼，多和朋友沟通一下，随和一些，让自己多放松一下，您的预期寿命会大大地延长的。</p>";break;case 21:e+="Neutral Good 中立善良</h3><p>中立善良者尽其所能做着一个好人能做的事情。他致力于帮助别人。他配合国王和大臣们的工作，但并不感到蒙恩于其。中立善良的寻常称谓是“真正善良”。一位根据他人需要施以援助的牧师就是中立善良的代表。中立善良是不带偏见或不违反信念去行善的阵营。<p>同志啊～～表误会，港湾只是想说我们是一个阵营的而已！尽自己的能力帮助他人，是令这个阵营的人显得可爱的一大特点。当然，和LG那些家伙们不同的是，当我们力不能及的时候，我们一般不会干出牺牲自己的蠢事。我们也很少考虑什么社会的进步之类的大问题，我们就帮助身边随手可及的，简单而快乐地活着，顺便作着“好人有好报”的白日梦！</p><p>忠告：帮助别人之前要稍微谨慎一些，这个阵营上当受骗的比率是所有阵营之最，虽然真正被骗得很惨的都是LE的家伙们。</p>";break;case 31:e+="Chaotic Good 混乱善良</h3><p>混乱善良的人按照自己的良心行动，极少考虑别人对他的规范和要求。他以自己的方式处事，但却善良友好且乐善好施。他相信善良及正义，不过认为法律和规章没什么用处，并且憎恨那些胁迫并命令别人的人。他尊序自己的道德准则，这些准则虽然是良善的，但却可能与社会上的准则不相一致。一位劫富济贫的侠盗就属于混乱善良阵营。混乱善良是结合了善良心灵和自由精神的阵营。美丽心灵和令人头疼的个性的结合体。十足的性格令他们不会那么老实地循规蹈矩。说话也常常是一点也不留口德，有的时候也会捉弄一下自己的朋友，总之是充满了创意和活力的一群人。</p><p>忠告：虽然有一颗豆腐心，但是刀子嘴有的时候还是挺可怕的。还有，有的时候还是要稍微尊重一下权威的……</p>";break;case 12:e+="Lawful Neutral 守序中立</h3><p>守序中立的人行动时遵从法律、传统或个人信条的指导。秩序和组织对他来说至关重要。他也许信仰某些私人法则，并按某种信条或道德标准生活；他也可能信仰适用于所有人的秩序，并且喜欢稳固强大有组织的政府。一位按照命令毫不留情地拷问罪犯的狱卒就属于守序中立阵营。守序中立的寻常称谓是“真正守序”，是注重荣誉却不狂热盲目的阵营。《80天环绕地球》里面的主人公一开始就是那样的人，还有那些特别遵从纪律和法令的人。你相信总结出规矩并让大多数人都遵守的规矩可以使你的生活更加的轻松，即使这些规矩对你带来的些许的不便，你也认为与他们相比带来的好处可以忽略不及。</p><p>忠告：大哥，军队的生活最适合你这种人了。不过个性这种东西还是最好发扬一下，要是淹没到了人群中，有的时候也不是那么理想呢。当然如果你只是想做“革命机器上的一颗螺丝钉”我也不好说什么了，不过还是建议你看看梦工厂的《A.NT Z》</p>";break;case 22:e+="True Neutral 绝对中立</h3><p>大部分绝对中立者是因其没有特别的坚信和偏爱而成中立。在善良与邪恶、秩序与混乱之间他们并不特别遵循其中某一者，但他们并不致力于维持事物中立的状态。这样的人认为善良比邪恶要好，他们也更愿意有善良而非邪恶的邻居和统治者。尽管如此，他却并不承诺在任何情况或全体方式中亲身支援良善。另一方面，某些绝对中立的人物委身于中庸的哲学观点。他们认为善良、邪恶、秩序、混乱都是偏见和危险的极端观点。他们提倡中立之路，认为从长远看它是最好最平衡的道路。绝对中立是行动自然不持偏见强迫的阵营。其实绝对中立不是TN，不过反正你也不在乎，处在这个阵营的，不是随风飘舞的墙头草，就是超然世外的高人。走自己的路，让别人去说吧。唉，反正人数非常的少……</p><p>忠告：这种阵营的人一般不需要什么忠告，他们可以很自由地转换到其他的阵营去！</p>";break;case 32:e+="Chaotic Neutral 混乱中立</h3><p>混乱中立的人按自己一时的兴致行动。他是一个完全的个人主义者。他重视自己的自由权利，但并不致力于保护别人的自由。他蔑视权威，愤恨约束并且挑战传统，但他不会向无政府运动那样有意瓦解组织。如果这么做，他必须把自己的阵营转成善良(希望解放他人)或是邪恶(使异己受苦)。不过，混乱中立者的行为也许很难预测，但他的举止并非完全随机的，他从桥上走过去的可能性和从桥上跳下去的可能性大小并不相等。一位靠着自己的小聪明来谋生的吟游诗人就属于混乱中立阵营。混乱中立的寻常称谓是“真正无序”，是真正自由于社会约束和对改良社会有着空想的阵营，追求自由，奔放。毕竟人生到这个世界上不是为了受苦的，而是为了享受和创造的。相信这是这个阵营绝大多数人的心声吧？不会循规蹈矩，也不会束缚自己，挺好的生活方式呢！</p><p>忠告：多练练怎么与人配合吧，现在的社会对合作要求比较高的，还有就是别干太出格的事。</p>";break;case 13:e+="Lawful Evil 守序邪恶</h3><p>守序邪恶的人有计划地谋求他想要的东西，此行为受到他行为准则的限制，但并不顾忌受其伤害的人。他关心传统、忠诚和秩序，但不关心自由、尊严和生命。他按规则行动，但没有怜悯和同情。他觉得待在统治阶层里很舒服，愿意支配别人，但也乐意为别人服务。他处罚谴责别人并不是根据他们的行为而是根据种族、信仰、祖国或社会阶层。他不愿违反法律或承诺，这种不愿部分是因为他的天性，部分是因为他需要秩序来保护他免受道德上的反对。某些守序邪恶者有特别的禁忌，比如不冷血嗜杀(但让属下去做)或不伤害儿童(如果可能的话)。他们认为这些良心上的原则使自己比一般不合人道的恶人水准高。像一个诡计多端扩展自己势力并压迫领土内平民的贵族就是守序邪恶的绝好代表。某些守序邪恶的人或生物狂热的效忠于邪恶，就好像十字军效忠于良善一样。伤害别人是他们这么做的目的，传播邪恶本身也是他们乐于如此的原因。他们也可能认为行恶是对某种邪恶神明或主人的责任的一部分。守序邪恶是一个有方法有意图并且能常常有所成就的邪恶阵营，为提高自己的地位而不断地努力着，当我有一个朋友告诉我她是LE的时候，真的吓了我一跳，不过后来想想，也没有什么的，挺正常的，毕竟还是遵纪守法的好公民，除了没有什么同情心，稍微冷漠了一点，有一点贪小便宜，也没什么大的毛病了。</p><p>忠告：法律这种东西，不仅仅建立在“合理”的基础上，而且最早地建立在“合情”的基础之上。这个社会的竞争绝对没有你想象的那样残酷，温情还是居多的，好好享受吧！</p>";break;case 23:e+="Neutral Evil 中立邪恶</h3><p>中立邪恶者做任何可能不受或逃脱惩罚的事。他完全为自己着想，眼里只有自身的利益，纯粹而简单。他不在乎被他杀死的人，无论是因为利益、消遣还是便利。他对秩序并无偏爱，但如果遵从法律会使他得利，他就会照做；但如果撕毁协议能使他获得更大的利益，他也会毫不犹豫地背约。那些情报贩子，以及通过抢掠和凶杀来得到他想要的东西的罪犯就是中立邪恶的代表人物。中立邪恶代表着无关对象的邪恶，因此又被称为是“真正邪恶”。价值观其实也没什么的，人类本来就是一个社会性和个体性并存的生物，注重个体的发展也没什么不好的。</p><p>忠告：不过，老大，有的时候也要稍微考虑一下别人的立场吧。忘掉生活中的一些不快，把心放宽，和我一起大声地念：HA.KUNA. MA.TA.TA.</p>";break;case 33:e+="Chaotic Evil 混乱邪恶</h3><p>混乱邪恶的人做任何他的欲望、恨意和破坏欲所驱使他做的事。他性情暴躁、恶毒，独断专行、手段粗暴并且行为无常。他无情残忍，肆无忌惮地夺取任何他可以夺取的东西。这样的人被视作社会的毒瘤。值得庆幸的是，他毫无计划，所有他参加的和形成的群体都组织极差。一般而言，唯有强迫和暴力才能使混乱邪恶的人在一起工作，只有真正的强者才能居于首领地位。而他一旦露出衰弱的迹象，就会被取而代之。一个疯狂追求复仇和破坏的法师就是混乱邪恶的代表人物。混乱邪恶所毁灭的，不仅仅是美丽和生命，而且还有维持着美丽和生命的秩序。老大，有个性，真的非常有个性，你们是所有人中最有创意的一种人了，从某种角度来说，社会是你们所推动的！</p><p>忠告：你们也是不需要忠告的一类人……不过，也许你们再重新认识一下这个社会会比较好一点……</p>"}$("#result").html(e)})});</script><p><strong>第一卷</strong></p><ol><li>当年，苏格拉底因为他的学说太那个了，被指控为“异端”和“误导年轻人”。长老会审判的结果是让他服毒。其实他当时是可以逃亡的，正如几十年后他的弟子柏拉图所作的那样，那个时候柏拉图面对指控就跑路了。可惜当时苏格拉底认为——遵从法律是一个国家公民应尽的职责和义务，哪怕这个法律现在还有缺陷。所以这个家伙就biu~的一声死掉了。这就是哲学上著名的“苏格拉底之死”。你认为这个家伙：<br><input checked name="q1" type="radio" value="2"> A. 为信念而死，值得敬佩。<br><input name="q1" type="radio" value="1"> B. 信念正确，行为可笑，理想主义得过了头！<br><input name="q1" type="radio" value="0"> C. 他……大脑进水了吗？看来他的学说确实够那个的啦……<br></li><br><li>在法国大革命期间，由于社会的动荡，雅各宾派政权颁发了一条法令，叫《惩治嫌疑犯条例》。这个条例和先进大多数的法律不同的地方是它采用的是“有罪推定”，就是说，如果一个嫌疑人无法证明他是无罪的，那么他就被认定有罪——和现金的“无罪推定”正好相反。结果是在条例的作用之下，社会治安迅速地好转，当然也死了不少无辜的人。所以你认为，在社会状况非常恶化的情况之下，是否应该使用“有罪推定”来改善治安状况？<br><input checked name="q2" type="radio" value="2"> A. 呵呵！有杀错，无放过。保证大多数人的利益最正确！<br><input name="q2" type="radio" value="1"> B. 视情况而定吧，如果情况真的不可收拾，我不反对……<br><input name="q2" type="radio" value="0"> C. 绝对不应以无辜者的鲜血来换来这种恐怖的安宁！<br></li><br><li>“少数服从多数”是现今常用的规则，你认为这样的规则：<br><input checked name="q3" type="radio" value="2"> A. 很好，保障大多数人的利益是非常重要的……<br><input name="q3" type="radio" value="1"> B. 还可以吧，反正我会尽量站在大多数人一边……<br><input name="q3" type="radio" value="0"> C. 不公平！少数人的利益和个性被忽视和掩盖了，而且最糟糕的是，“真理往往在少数人手中”……<br></li><br><li>“伟人之所以伟大，是因为我们都是跪着看他们”……<br><input checked name="q4" type="radio" value="2"> A. 并不是这样，伟人们确实有他们值得敬仰的地方。<br><input name="q4" type="radio" value="1"> B. 不太清楚，这句话有一定的道理吧？<br><input name="q4" type="radio" value="0"> C. 我也可以成为伟人的，其实成功并不是那么的遥不可及……<br></li><br><li>“二战中犯下战争罪行的德军士兵辩解说，是命令让他那么作的，如果他不执行命令，就会被军法处置，你认为这些士兵："<br><input checked name="q5" type="radio" value="2"> A. 情有可原，身为小兵其实挺无奈的。但是下命令的那个混蛋真他妈的该死。<br><input name="q5" type="radio" value="1"> B. 我也不太清楚，也不想体会那种情景<br><input name="q5" type="radio" value="0"> C. 任何有独立思想的成年人都不能以命令为借口为自己的行为进行推脱。（这也是国际法中明确说明的！）<br></li><br><li>“当你处在一个十字路口，面前是红灯，但是你前面却没有一辆车通行，你是否会穿越红灯呢？"<br><input checked name="q6" type="radio" value="2"> A. 绝对不会！我会严格遵守交通规则！<br><input name="q6" type="radio" value="1"> B. 有急事的时候会过去。<br><input name="q6" type="radio" value="0"> C. 规矩是死的，人是活的……<br></li><br><li>“当病人生不如死的时候，他提出安乐死，如果你是医生，你是否会帮助他？"<br><input checked name="q7" type="radio" value="2"> A. 这是犯罪！我不会杀人的！<br><input name="q7" type="radio" value="1"> B. 说不好……<br><input name="q7" type="radio" value="0"> C. 我会尽可能地帮助他。<br></li><br><li>“当你的好朋友沉浸在一项不好的生活，比如说网络游戏中，你想要劝她，你会怎么样？"<br><input checked name="q8" type="radio" value="2"> A. 好言相劝，毕竟是朋友。<br><input name="q8" type="radio" value="1"> B. 不知道！<br><input name="q8" type="radio" value="0"> C. 狠狠地骂她一顿，好好地刺激她一下，要不就打醒她！喝！<br></li><br><li>“你和你的朋友之间有了某个误会，如果你把真相说出来，她一定会非常的自责，但是如果你不说出真相，你自己又觉得非常的委屈："<br><input checked name="q9" type="radio" value="2"> A. 我忍，习惯了就好了！<br><input name="q9" type="radio" value="1"> B. 随遇而安，有可能真相被别人先说出来呢！<br><input name="q9" type="radio" value="0"> C. 绝不能让自己受到委屈，让她内疚而死吧……<br></li><br><li>“当你发现你和其他人的意见都不大相同的时候，你会："<br><input checked name="q10" type="radio" value="2"> A. 反复检查自己的意见，看看自己的意见是不是有什么问题。<br><input name="q10" type="radio" value="1"> B. 当作什么也没有发生好了<br><input name="q10" type="radio" value="0"> C. 他们全都错了，我是正确的！<br></li><br><li>““只要动机是好的，手段无所谓。”你是否赞同这句话？"<br><input checked name="q11" type="radio" value="2"> A. 你疯了吗，那样子会天下大乱的！<br><input name="q11" type="radio" value="1"> B. 有的时候稍微地犯规一下也没有什么的。<br><input name="q11" type="radio" value="0"> C. 本来就是这个样子的嘛！<br></li><br><li>“发生雪崩了，有两个人被困在了山上，发动n多人去搜救，可是这个时候，山上仍然有危险，可能会让更多的人遇险。如果你是总指挥，你可以接受多少人因为营救这两个人而送命？"<br><input checked name="q12" type="radio" value="2"> A. 嗯，你们安息吧，我不能因为两个人，而把几百号人置于危险之中。<br><input name="q12" type="radio" value="1"> B. 大家小心点，注意自己的安全，如果有人出现伤亡，马上就闪……<br><input name="q12" type="radio" value="0"> C. 每一个人的生命都是无价的，要不惜一切的代价……（美国大片里面的常见台词）<br></li><br><li>“城管和联合执法的在驱除道边上卖红薯的小贩，你会认为："<br><input checked name="q13" type="radio" value="2"> A. 维护市容，就应该这样！<br><input name="q13" type="radio" value="1"> B. 与我无关！<br><input name="q13" type="radio" value="0"> C. 人家也要糊口啊，挺可怜的呢！<br></li></ol><p><strong>第二卷</strong></p><ol><li>“你是否曾经无缘无故地欺负过小动物？（男生请从十岁之后开始计算。）"<br><input checked name="p1" type="radio" value="2"> A. 决不，我从来没有这么干过。<br><input name="p1" type="radio" value="1"> B. 有的时候心情不好，就会……不过一般我还是反对这么干的……<br><input name="p1" type="radio" value="0"> C. 我擅长用放大镜烧死蚂蚁，捕捉蜻蜓，走到道边看见狗都想踢两脚，当然不是太大的那种！<br></li><br><li>“曹操著名的那句“宁可我负天下人，不教天下人负我。”<br><input checked name="p2" type="radio" value="2"> A. 太偏激了<br><input name="p2" type="radio" value="1"> B. 有的时候，为了自保，也无可厚非，但是把这个东西当成信念就有点太那个啦……<br><input name="p2" type="radio" value="0"> C. 哼哼，这个世界本来就是那样的，人不为己，天诛地灭。<br></li><br><li>“你认为复仇和宽恕哪一个更加合适？"<br><input checked name="p3" type="radio" value="2"> A. 宽恕是美德，怨怨向报何时了<br><input name="p3" type="radio" value="1"> B. 不知道，希望不会发生这种事情<br><input name="p3" type="radio" value="0"> C. 宽恕是纵容，正是因为有了这么多虚伪的家伙，才会有越来越多的无法无天的家伙，敢惹我的，我十倍与之！<br></li><br><li>“当你因为某种原因陷入重大失败，进入人生的低潮时，你会怎么想："<br><input checked name="p4" type="radio" value="2"> A. 是我的实力还不够强，基本上是我自己的责任。<br><input name="p4" type="radio" value="1"> B. 非吾不能，天亡吾也！<br><input name="p4" type="radio" value="0"> C. 都是他们这些小人，处处算计于我，真该死～～～～～～～～～～～～～～～<br></li><br><li>“如果你以前被乞丐（假）骗过钱，你是否还会再看见乞丐，或者有人向你寻求帮助（要几块钱什么的，现在挺常见的），你是否会给予帮助？"<br><input checked name="p5" type="radio" value="2"> A. 万一那个人确实需要帮助呢？我不能因为以前别人骗了我就拒绝帮助一个困境中的人！<br><input name="p5" type="radio" value="1"> B. 我不知道，如果那个人看上去真的非常可怜的话，我可能会给钱的，但我认为他可能是骗子！<br><input name="p5" type="radio" value="0"> C. 滚！你这样的家伙我见得太多了！找民政部门去！<br></li><br><li>“卓别林的戏剧，欧亨利的小说，王尔德的童话，你的感觉是……（别和我说你一个都不知道！）"<br><input checked name="p6" type="radio" value="2"> A. 流泪<br><input name="p6" type="radio" value="1"> B. 大笑<br><input name="p6" type="radio" value="0"> C. 无聊<br></li><br><li>“我们在小学接受的教育都是在公共汽车上要让座，当车上有不应该站着的人站着的时候，如老人，而你是坐着的，你的反映是："<br><input checked name="p7" type="radio" value="2"> A. 假装下车，站起来，用身子挡着座，让该坐的人坐下！<br><input name="p7" type="radio" value="1"> B. 站起来，大声招呼对方坐下，然后虚伪地笑一笑……<br><input name="p7" type="radio" value="0"> C. 象大多数的年轻人一样，让小学的教育被素质教育所代替吧……<br></li><br><li>“当你为一个目标而努力了很久，但是却失败了，而这是你的最好的朋友却成功的时候，你心里酸酸的感觉能持续多久呢？"<br><input checked name="p8" type="radio" value="2"> A. 5分钟，然后真心地为朋友而高兴。<br><input name="p8" type="radio" value="1"> B. 一天，然后和她心存芥蒂。<br><input name="p8" type="radio" value="0"> C. 你们的友谊可能会就此而冲淡！<br></li><br><li>“你给朋友送礼物的时候，一般会："<br><input checked name="p9" type="radio" value="2"> A. 买两份，因为我只送我自己最喜欢的东西，所以自己都忍不住要留一份！<br><input name="p9" type="radio" value="1"> B. 例行公事，没好好考虑过。<br><input name="p9" type="radio" value="0"> C. 把用不到的东西送给别人吧～～～<br></li><br><li>“一个浑身是血而且赃兮兮的人向你求助，你能忍住恶心帮助这个人吗？（学医的话请以自己从医之前的行为做参考。）"<br><input checked name="p10" type="radio" value="2"> A. 义不容辞<br><input name="p10" type="radio" value="1"> B. 有点恶心<br><input name="p10" type="radio" value="0"> C. ～～～～～～～～滚！找别人去！<br></li><br><li>“神灯精灵在你的面前献身，满足你三个愿望。你可能会想到（注意，不是许愿，仅仅是想到）不为你自己的愿望吗？"<br><input checked name="p11" type="radio" value="2"> A. 世界和平？我所关心的人？<br><input name="p11" type="radio" value="1"> B. 在巨大的惊喜面前，大脑一片空白！<br><input name="p11" type="radio" value="0"> C. 正在阐心竭虑计算如何许愿才能让自己的利益最大化！<br></li><br><li>“你认为有可能在人类中消除犯罪吗？"<br><input checked name="p12" type="radio" value="2"> A. 总有一天的，等到……<br><input name="p12" type="radio" value="1"> B. 不知道，谁也所不清，也许有一天“犯罪”这个词的意义会发生改变？<br><input name="p12" type="radio" value="0"> C. 你睡醒了没，是不是有一点发烧？<br></li><br><li>“道边上有一健康成年男子在乞讨，对此你的看法是："<br><input checked name="p13" type="radio" value="2"> A. 是不是有什么迫不得已的情况？<br><input name="p13" type="radio" value="1"> B. 哀其不幸，怒其不争，这是社会的问题，与我无关！<br><input name="p13" type="radio" value="0"> C. 人渣，垃圾，怎么警察也不管一下？<br></li><br><li>“如果三天后就是世界末日，且只有你一个人知道人类世界会在三天之后灭绝了，你会怎么样？"<br><input checked name="p14" type="radio" value="2"> A. 尽自己的可能拯救这个世界，包括让应该知道这个信息的人知道。<br><input name="p14" type="radio" value="1"> B. 用不打扰其他人的方式尽情享受这几天，也一定要结束自己的处女（男）生涯，当然是在不伤害别人的基础上……<br><input name="p14" type="radio" value="0"> C. 哼哼哼哼，别人我管不了了，三天，我要做到无憾的三天，哼哼……（睁着充血的眼睛出去了……）<br></li><br></ol><div align="center"><br><button id="submit" class="button button-inverse button-rounded" type="button">提交</button></div><div id="result"></div></form>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;由于&lt;a href=&quot;http://www.wizards.com/default.asp?x=dnd%2Fdnd%2F20001222b&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;官方版&lt;/a&gt;的测试规则我还不清楚，因此只能退而求其次找了个替代版，至少我测试起来在官方版和这个版本里是一样的结果。同时，我也是第一次使用JavaScript(之前完全没摸过……)，因此效果会有点渣，希望各位不要介意。&lt;/p&gt;&lt;p&gt;UPDATE 2016/06/23: 参考&lt;a href=&quot;http://maokwen.tk/2016/06/23/mbti/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;此处&lt;/a&gt;更改了结果显示的方式，告别了alert&lt;/p&gt;&lt;p&gt;UPDATE 2016/06/28: 使用jQuery大幅改进了脚本&lt;/p&gt;
    
    </summary>
    
      <category term="杂项" scheme="https://unnamed42.github.io/categories/%E6%9D%82%E9%A1%B9/"/>
    
    
      <category term="测试" scheme="https://unnamed42.github.io/tags/%E6%B5%8B%E8%AF%95/"/>
    
      <category term="DnD" scheme="https://unnamed42.github.io/tags/DnD/"/>
    
  </entry>
  
  <entry>
    <title>随笔杂谈</title>
    <link href="https://unnamed42.github.io/2015-12-23-%E9%9A%8F%E7%AC%94%E6%9D%82%E8%B0%88.html"/>
    <id>https://unnamed42.github.io/2015-12-23-随笔杂谈.html</id>
    <published>2015-12-23T04:46:39.000Z</published>
    <updated>2017-06-10T05:52:13.000Z</updated>
    
    <content type="html"><![CDATA[<p>曾经多次，在夜深人静适合一个人思考钻死胡同的时候，酝酿过写这么个东西的想法；可惜这种想法往往不能留存过夜。第二天一觉起来神清气爽，似乎所有烦恼与抑郁症状都不翼而飞了，这种想法也就随之消散在脑海里，化作飞灰。但大量飞灰也有沉积起来形成星体的时候，于是你们现在看到了这份鬼话连篇的随笔杂谈。</p><a id="more"></a><p>在夜里，一个人独自思考，比较容易钻死胡同，积聚大量的负面情绪。此时只有你一个人独自徜徉在精神的海洋里，无论是捕捞到了五彩缤纷的海洋特产还是抽筋溺水一命呜呼都只有你一个人知道，所有的收获与损失都只能压积在心底，除非你精神分裂有另一个你和你一同嬉戏。但这是打发睡前漫长时间的方法，我乐此不疲。</p><p>说了这么多，就是想说这些东西堆积在我脑海里很久了，久到不吐不快的地步。自认优雅乃是行为准则的我自然不好去叨扰别人向他/她/它倾倒我积累起来的苦水，现在还没有谁能让我放心对其倾诉的地步，因为我觉得我肯定会在对方那里获得一个“你丫谁啊”的评价（在此诚征女朋友一名）。既然如此我就放在这里罢，当做是一次我自己对自己的谈话。</p><p>事情要从高考那时候说起：当时因为奇怪过敏病症躺在医院里的我，拿起手机向教育机构发起了查询请求，然后获得了一个令人心痛的590. 虽然我自己并不清楚自己能爬到什么样的高度，但我觉得590是不能够描述它的。看到590的我，感到浑身一麻：完了。</p><p>其实对这样的结果我早有预感：我没能评析诗经，语文自然不会好好评析我；我因为带有绝对值的数列递推而手忙脚乱，数学自然也不会给我好脸色看。怎么样呢？590，咎由自取。</p><p>但过去就是过去；你远大于普朗克长度的体型自然不能展示量子特性，你当然不能像光子一样搞个延迟选择改变历史路径。590就是590, 除非我愿意去像那谁一样读个高四高五高六去刷分。然而当时已经心灰意冷，“我才懒得去想这么多！该怎样就怎样吧！”</p><p>于是就报了一个糊里糊涂的志愿，度过了一个莫名其妙的大一。报志愿的时候十分的淡漠，好像黄文睿那不是我的名字一样。填了5个志愿进了第二个，填了5个专业没有一个要我的，哪怕是物理系也没有。进了一个我始料未及的专业，打了我个猝不及防。</p><p>这样的结果就是，高考完的暑假被拖着去走亲访友报个“喜”，重复着一遍又一遍对他们来说陌生的大学的名字，复述着一遍又一遍我打心底里不愿意去的专业，偏偏他们认为这就是我竭尽全力跳龙门的高度，嘴里“不错不错有前途”地说着。哼哼。</p><p>连带着陪同三位学神的帝都游我也是不能尽兴。人家秒解的题我不能秒解，人家随口而出的定理公式我听不懂，人家的随手取得的校荐我拿不到。结果就是人家搞出来的大新闻我要老老实实坐在下面学习一个。当时的我充斥着对自己的怀疑：我真的配得上和这样人均630+的人一起去玩耍？他们三位一路上对各种学校名人趣闻了如指掌，一路上带着的都是他们应得的“我是明日之星”的自豪与傲气。我呢？我能干啥？我只能听听，笑笑，表示我来了。</p><p>曾经是怎样期盼着大学的呢？一个知识的海洋，名师益友共同前行。但真正踏入之后就发现远远不是那么回事。强行建立的认同感，MOBA玩到傻的同学，依然像高中一样的授课方式，没事拉着你强行出观众的学校活动。我非常，非常，非常的失望，不论是对同学，对老师，对舍友，对学校，对教材，对生活环境，最重要的，对自己。当时哪怕是考再好一点，是不是就能进入到一个更高的平台，去和更好的人一起谈笑风生呢？</p><p>“母校”的地位并不能被拿来当挡箭牌，更何况我心中并没有把这里当做母校。课程水就是水，不能因为有几个上课精彩的老师就说好，正如不能因为有几个老师讲课烂就说烂一样。高等数学仿佛是择人而噬的恶魔，工程图学是吃人吐X光的黑洞，线性代数就是挥之不去减命折寿的梦魇，老师上课的精彩也不能掩盖学生们对知识本身的惧怕。至于其他的就更加糟糕，英语课如同玩耍（也许正应如此？），C语言课程简直是浪费生命。这是大学？这是985？简直是纸老虎。</p><p>大一就这么混过去了。我一直是以常态而学习，但他们却说着“学霸”调笑，仿佛有一条深沟横亘在我和他之间，仿佛我们就不是同一个物种。也许他们没办法理解我，就像我没办法理解为什么LoL有那么大的吸引力一样。更可怕的是，有那么一个糟糕的室友。我对他已经远远超出“不满”的程度，要是杀人不犯法的话我早就……</p><p>幸而我能够“脱颖而出”，走出了那个在我看来是一个深坑神坑的地方。我来到了曾经是我志愿的专业，又一次将其填在志愿表上。我当时想着，不肯录取我的地方，至少平均水平也得比我高上那么一点吧？</p><p>可惜，现实击碎了我的想法，它狠狠地打了我的脸，生疼。又一次感到了失望，心累。同样的内容在不同的地方上演。我感觉，是我错了？广受嘲笑的晋惠帝也许就是我，我想让所有人都吃的上肉糜，时间地点内容人物不同而已，其内核分毫不差。 俗话说不吐不快。吐了，也没能快了多少。火气易去，郁气难消。努力吧。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;曾经多次，在夜深人静适合一个人思考钻死胡同的时候，酝酿过写这么个东西的想法；可惜这种想法往往不能留存过夜。第二天一觉起来神清气爽，似乎所有烦恼与抑郁症状都不翼而飞了，这种想法也就随之消散在脑海里，化作飞灰。但大量飞灰也有沉积起来形成星体的时候，于是你们现在看到了这份鬼话连篇的随笔杂谈。&lt;/p&gt;
    
    </summary>
    
      <category term="杂项" scheme="https://unnamed42.github.io/categories/%E6%9D%82%E9%A1%B9/"/>
    
    
      <category term="情感叙事" scheme="https://unnamed42.github.io/tags/%E6%83%85%E6%84%9F%E5%8F%99%E4%BA%8B/"/>
    
  </entry>
  
  <entry>
    <title>C与C++的不同</title>
    <link href="https://unnamed42.github.io/2015-12-19-C%E4%B8%8EC-%E7%9A%84%E4%B8%8D%E5%90%8C.html"/>
    <id>https://unnamed42.github.io/2015-12-19-C与C-的不同.html</id>
    <published>2015-12-19T14:44:41.000Z</published>
    <updated>2017-06-10T05:52:14.000Z</updated>
    
    <content type="html"><![CDATA[<p>UPDATE 2017/03/10: 填了一部分</p><a id="more"></a><p>由于本人才疏学浅造成的错误希望各位在评论中<strong>心平气和</strong>地指正。</p><hr><h2 id="auto-关键字">auto 关键字</h2><p>在C语言中，这个关键字用于声明变量的生存期为自动，即将不在任何类、结构、枚举、联合和函数中定义的变量视为全局变量，而在函数中定义的变量视为局部变量。这个关键字不怎么多写，因为函数内局部变量默认就是<code>auto</code>的，与程序员预期相符合。C++98标准中<code>auto</code>关键字与C语言中的相同；而自C++11以来，<code>auto</code>的语义被修改，原来代表 “automatic” 的语义被废弃，该关键字转而用于两种情况：声明变量时根据初始化表达式自动推断该变量的类型、声明函数时函数返回值的占位符。</p><p>C++ <code>auto</code>用法举例：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>, <span class="title">class</span> <span class="title">U</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">auto</span> <span class="title">add</span>(<span class="title">T</span> <span class="title">t</span>, <span class="title">U</span> <span class="title">u</span>) -&gt; <span class="title">decltype</span>(<span class="title">t</span> + <span class="title">u</span>) // <span class="title">add</span>的返回类型与<span class="title">operator</span>+(<span class="title">T</span>, <span class="title">U</span>)的相同</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">return</span> t + u;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;type&gt; func()&#123;</span><br><span class="line">    <span class="comment">//something here</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">auto</span> a = func();  <span class="comment">// a的类型与func的返回值类型相同</span></span><br></pre></td></tr></table></figure><p>之所以上面返回类型需要使用<code>auto</code>占位，是因为你的类型推导式用到了函数参数<code>t</code>和<code>u</code>，而编译器读到返回类型推导式<code>decltype(t + u)</code>的时候<code>t</code>和<code>u</code>还没声明，也就用不了，形成了循环依赖。除了这种格式，还可以使用<code>decltype(*(T*)0 + *(U*)0)</code>这样的格式，虽然更难看。</p><h2 id="类型别名">类型别名</h2><p>类型别名用于避免又臭又长的变量声明（比如函数指针），以及保证可移植性（比如<code>stdint.h</code>里的<code>int32_t</code>保证是32位带符号整型）等等情况下。</p><p>C和C++均支持<code>typedef</code>的类型别名，并且都不允许<code>typedef</code>类型别名声明中出现<code>static</code>. <code>typedef</code>声明的作用域如同一个变量声明，在C++中多了类从而类中的<code>typedef</code>声明也多了访问权限控制。</p><p>在C++中多出了模板，而<code>typedef</code>不支持模板，定义的类型别名只能是模板实例化之后的类型。若要对模板进行类型别名声明新的模板，就要使用<code>using</code>关键字。</p><p><code>using</code>的使用方式如下：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Simple using alias</span></span><br><span class="line"><span class="keyword">using</span> alias_name = type_id;</span><br><span class="line"></span><br><span class="line"><span class="comment">// For template alias</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">template</span>-parameter-<span class="built_in">list</span>&gt;</span><br><span class="line"><span class="keyword">using</span> alias_name = type_id;</span><br></pre></td></tr></table></figure><p>举个例子：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">struct</span> <span class="title">Alloc</span> &#123;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">using</span> <span class="title">Vec</span> = <span class="title">vector</span>&lt;T, Alloc&lt;T&gt;&gt;;</span> <span class="comment">// type-id is vector&lt;T, Alloc&lt;T&gt;&gt;</span></span><br><span class="line"></span><br><span class="line">Vec&lt;<span class="keyword">int</span>&gt; v; <span class="comment">// Vec&lt;int&gt; is the same as vector&lt;int, Alloc&lt;int&gt;&gt;</span></span><br></pre></td></tr></table></figure><h2 id="布尔类型">布尔类型</h2><p>C在C99标准之前没有内置布尔类型，因此只能通过<code>typedef int bool</code>的方式模拟；C99及以后在C语言中引入了布尔类型，其关键字是<code>_Bool</code>. 如果想要像C++那样使用布尔类型的话，包含头文件<code>stdbool.h</code>.</p><p>C++自带布尔类型，关键字是<code>bool</code>.</p><h2 id="数组">数组</h2><p>就定长数组（编译期可确定其长度）而言，C和C++毫无区别。而C99引入了变长数组(<a href="https://en.wikipedia.org/wiki/Variable-length_array" target="_blank" rel="noopener">Variadic Length Array</a>, VLA)之后，一切就变得不一样了。</p><p>就行为上来说，VLA相当于自动帮你使用了<code>malloc</code>和<code>free</code>, 只是开辟的空间在栈上罢了。同时对数组引入了新的语法（一般用在函数声明的参数列表里面），来描述新引入的VLA. 比如<code>int[*]</code>代表这是一个<code>int</code>的VLA, <code>int[static 10]</code>代表这是一个至少有10个<code>int</code>的VLA(该语法有利于优化).</p><p>C++中没有VLA, 如果一定要长度可变的数组那么使用<code>std::vector</code>; 要封装原生数组使用C++11引入的<code>std::array</code>.</p><h2 id="泛型">泛型</h2><p>这里的泛型是针对C11引入的<code>_Generic</code>的直译。</p><p>在C11之前，我们无法在C语言中写一个针对所有数据类型都可用的算法（比如针对任何类型的数组都可用的排序函数），所能做的只有全部转换成<code>void*</code>然后提供一个自定义的处理函数，通过这样拐弯抹角的方式来实现泛型。一个典型的例子就是<code>stdlib.h</code>里的<code>qsort</code>, 其原型定义如下：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">qsort</span><span class="params">( <span class="keyword">void</span> *ptr, <span class="keyword">size_t</span> count, <span class="keyword">size_t</span> size,</span></span></span><br><span class="line">            int (*comp)(const void *, const void *) );</span><br></pre></td></tr></table></figure><p>在C11中提供了<code>_Generic</code>的功能，它能根据传入参数的类型来决定对应的操作。如下就是一个<code>_Generic</code>的例子，可以根据传入的参数到底是<code>long double</code>还是<code>float</code>来决定调用的函数到底是<code>cbrtl</code>还是<code>cbrtf</code>. 如果提供的类型无一满足，那么会使用<code>default</code>条目定义的规则。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> cbrt(X) _Generic((X), \</span></span><br><span class="line">                         <span class="keyword">long</span> <span class="keyword">double</span>: cbrtl, \</span><br><span class="line">                         <span class="keyword">default</span>: cbrt, \</span><br><span class="line">                         <span class="keyword">float</span>: cbrtf \</span><br><span class="line">                        )(X)</span><br></pre></td></tr></table></figure><p>在C++中，语言自带的重载和模板特性就不知道比C高到哪里去了，虽然会有<a href="https://en.wikipedia.org/wiki/Name_mangling" target="_blank" rel="noopener">Name Mangling</a>使ABI不稳定这种副作用。</p><h2 id="struct">struct</h2><p>在C中，<code>struct</code>只能内含数据类型，不能包有函数和<code>static</code>成员。但C99之后也有一些C++没有的特性，比如<a href="https://en.wikipedia.org/wiki/Flexible_array_member" target="_blank" rel="noopener">Flexible array member</a>（其实这个特性在进标准之前就有很多类似手法了），<a href="http://en.cppreference.com/w/c/language/compound_literal" target="_blank" rel="noopener">compound literal</a>和<a href="http://en.cppreference.com/w/c/language/struct_initialization" target="_blank" rel="noopener">designated initialization</a>（这两个不光可用于<code>struct</code>）。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">test</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="keyword">char</span> c;</span><br><span class="line">&#125; test;</span><br><span class="line"><span class="comment">// compound literal</span></span><br><span class="line">test t1 = (test)&#123;<span class="number">0</span>, <span class="string">'0'</span>&#125;;</span><br><span class="line"><span class="comment">// designated initialization</span></span><br><span class="line">test t2 = &#123;.c = <span class="string">'0'</span>, .i = <span class="number">0</span>&#125;;</span><br></pre></td></tr></table></figure><p>这种缺乏导致C不能很方便地写出很“面向对象”的代码。成员函数和<a href="https://en.wikipedia.org/wiki/Virtual_method_table" target="_blank" rel="noopener">vtable</a>可以手动添加<code>struct</code>的函数指针成员来实现，<a href="http://stackoverflow.com/a/351745" target="_blank" rel="noopener">假装自己有OOP的样子</a>；而OOP中的继承特性就不太好写了。方法、成员的继承可以通过复制粘贴来实现，但基类可以指向子类，虚函数这些语义怎么办呢？</p><p>为了保持与C的兼容，C++让<a href="http://en.cppreference.com/w/cpp/concept/PODType" target="_blank" rel="noopener">简单的</a><code>struct</code>, <code>class</code>, <code>union</code>保持C风格，让它们能够与C传统的<code>malloc</code>, <code>memmove</code>等函数交互。</p><p>此外，在C中<code>struct</code>, <code>union</code>, <code>enum</code>的类型名称和变量名、函数名等等是区别对待的，即使二者重名也是可以的。因此<code>typedef struct tag tag</code>这样的语句很有必要，如果不写那么声明一个<code>tag</code>结构体一定要使用<code>struct tag var</code>而不是<code>tag var</code>. 在C++中你可以认为是自动插入了这样的<code>typedef</code>语句。</p><h2 id="空指针">空指针</h2><p>C语言中，任何类型的两个空指针值相等。宏定义<code>NULL</code>的值具体取决于实现。C99中规定<code>NULL</code>应该是从整数类型的<code>0</code>显式或隐式地转换而来。</p><p>C++出于兼容C的考虑保留了<code>NULL</code>, 其内容可能是：</p><ul><li>整数类型的右值(rvalue)常量表达式，该值为0 (C++11之前)</li><li>整数类型的纯右值(prvalue)常量表达式，该值为0; 或是<code>std::nullptr_t</code>类型的纯右值 (C++11到C++14)</li><li>值为0的整型字面值，或是或是<code>std::nullptr_t</code>类型的纯右值 (C++14起)</li></ul><p>C++引入新的关键字<code>nullptr</code>来代表空指针，来解决之前<code>0</code>同时具有整数0和空指针语义的问题。例如如下的程序：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstddef&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span> <span class="title">F</span>, <span class="title">class</span> <span class="title">A</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">void</span> <span class="title">Fwd</span>(<span class="title">F</span> <span class="title">f</span>, <span class="title">A</span> <span class="title">a</span>)</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    f(a);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">g</span><span class="params">(<span class="keyword">int</span>* i)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Function g called\n"</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    g(<span class="literal">NULL</span>);           <span class="comment">// Fine</span></span><br><span class="line">    g(<span class="number">0</span>);              <span class="comment">// Fine</span></span><br><span class="line"> </span><br><span class="line">    Fwd(g, <span class="literal">nullptr</span>);   <span class="comment">// Fine</span></span><br><span class="line"><span class="comment">//  Fwd(g, NULL);  // ERROR: No function g(int)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上面的程序中，<code>Fwd(g,NULL)</code>并不是如想象中一般地调用了<code>g(int*)</code>，反而去寻找<code>g(int)</code>的重载。使用<code>nullptr</code>就不会出现这样的问题。</p><p>二者<code>NULL</code>最原始的宏定义都在<code>stddef.h</code>(或<code>cstddef</code>)里。</p><h2 id="类型转换">类型转换</h2><p>C支持隐式和显式的两种转换，隐式的由编译器自动完成，显式的只有<code>(type)expression</code>这一种方式。</p><p>C++兼容C的类型转换方式，但它引入了对象机制后更加复杂。首先为了与C兼容保留了上面的转换方式，同时引入了等价的<code>type(expression)</code>方式。除此之外，还存在<code>static_cast</code>, <code>const_cast</code>, <code>dynamic_cast</code>, <code>reinterpret_cast</code>这四种。从理论上来说，<code>(type) expression</code>和<code>type(expression)</code>都是以上几种<code>XXXX_cast</code>的组合。在C++中，类型转换推荐使用<code>XXXX_cast</code>的形式。</p><p>由于C++里面的构造函数和自定义转换函数，隐式转换可能会发生在各种意想不到的地方。关于类型转换的知识十分繁杂，具体详见<a href="http://en.cppreference.com/w/cpp/language/implicit_cast" target="_blank" rel="noopener">C++隐式类型转换</a>、<a href="http://en.cppreference.com/w/c/language/conversion" target="_blank" rel="noopener">C隐式类型转换</a>。</p><h2 id="指针和内存管理">指针和内存管理</h2><p>这部分主要就是体现出C++强于C的地方了。涉及到动态内存管理，大家都只能向操作系统申请空间，到时候都得释放，但是C++能够玩出花来。利用类封装加上<a href="https://en.wikipedia.org/wiki/Resource_acquisition_is_initialization" target="_blank" rel="noopener">RAII</a>机制，C++标准库实现了智能指针，一个是基于引用计数的<a href="http://en.cppreference.com/w/cpp/memory/shared_ptr" target="_blank" rel="noopener"><code>shared_ptr</code></a>, 另一个是独享资源所有权的<a href="http://en.cppreference.com/w/cpp/memory/unique_ptr" target="_blank" rel="noopener"><code>unique_ptr</code></a>, 利用这两样工具，基本能摆脱手动<code>delete</code>的烦恼。</p><h2 id="异常处理">异常处理</h2><p>C语言没有什么方便的异常处理机制，一般是在每个可能出异常的地方套上个if-else, 异常来临时<code>exit</code>, 申请的资源通过在<code>atexit</code>注册的函数来处理。或者使用<code>setjmp</code>和<code>longjmp</code>.</p><p>在C++中有现在满地都是的 try-catch 流，使用这个的时候需要时刻留心，保证代码的异常安全性。同时，在异常发生时使用原生指针管理的内存如果不在catch块处理那么内存就这么泄露了。</p><h2 id="参考资料">参考资料</h2><p>auto部分：</p><ol><li><p><a href="http://en.cppreference.com/w/cpp/language/auto" target="_blank" rel="noopener">http://en.cppreference.com/w/cpp/language/auto</a></p></li><li><p><a href="http://en.cppreference.com/w/cpp/keyword" target="_blank" rel="noopener">http://en.cppreference.com/w/cpp/keyword</a></p></li></ol><p>类型别名部分：</p><ol><li><p><a href="http://en.cppreference.com/w/cpp/language/typedef" target="_blank" rel="noopener">http://en.cppreference.com/w/cpp/language/typedef</a></p></li><li><p><a href="http://en.cppreference.com/w/c/language/typedef" target="_blank" rel="noopener">http://en.cppreference.com/w/c/language/typedef</a></p></li><li><p><a href="http://en.cppreference.com/w/cpp/language/type_alias" target="_blank" rel="noopener">http://en.cppreference.com/w/cpp/language/type_alias</a></p></li></ol><p>布尔类型部分：</p><ol><li><a href="https://en.wikipedia.org/wiki/C99" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/C99</a></li></ol><p>泛型部分：</p><ol><li><a href="http://en.cppreference.com/w/c/language/generic" target="_blank" rel="noopener">http://en.cppreference.com/w/c/language/generic</a></li></ol><p>空指针部分：</p><ol><li><p><a href="https://en.wikipedia.org/wiki/Null_pointer" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Null_pointer</a></p></li><li><p><a href="http://en.cppreference.com/w/cpp/language/nullptr" target="_blank" rel="noopener">http://en.cppreference.com/w/cpp/language/nullptr</a></p></li><li><p><a href="http://en.cppreference.com/w/cpp/types/NULL" target="_blank" rel="noopener">http://en.cppreference.com/w/cpp/types/NULL</a></p></li></ol><p>类型转换部分：</p><ol><li><a href="http://stackoverflow.com/a/332086" target="_blank" rel="noopener">http://stackoverflow.com/a/332086</a></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;UPDATE 2017/03/10: 填了一部分&lt;/p&gt;
    
    </summary>
    
      <category term="学习" scheme="https://unnamed42.github.io/categories/%E5%AD%A6%E4%B9%A0/"/>
    
    
  </entry>
  
  <entry>
    <title>Leetcode 8 String to Integer(atoi)</title>
    <link href="https://unnamed42.github.io/2015-12-06-Leetcode-8-String-to-Integer-atoi.html"/>
    <id>https://unnamed42.github.io/2015-12-06-Leetcode-8-String-to-Integer-atoi.html</id>
    <published>2015-12-05T16:09:09.000Z</published>
    <updated>2017-06-10T05:52:13.000Z</updated>
    
    <content type="html"><![CDATA[<p>一个不难但是坑的题的题解——《论健壮性》</p><a id="more"></a><p>题目如下：</p><blockquote><p>Implement atoi to convert a string to an integer.</p><p><strong>Hint</strong>: Carefully consider all possible input cases. If you want a challenge, please do not see below and ask yourself what are the possible input cases.</p><p><strong>Notes</strong>: It is intended for this problem to be specified vaguely (ie, no given input specs). You are responsible to gather all the input requirements up front.</p></blockquote><hr><p>本题让我们实现标准库<code>stdlib.h</code>里的<code>atoi</code>函数。</p><p>收录这个题的解法并不是因为它有多么难，而是给大家展示一下要满足算法健壮性是多么地不容易。</p><p>首先，由于我以前写过一个简单版本的<code>atoi</code>, 因此第一版轻车熟路地就出来了：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">myAtoi</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span>* str)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> sign=<span class="number">1</span>,l=<span class="built_in">strlen</span>(str),res=<span class="number">0</span>;    <span class="comment">//使用l记录长度然后用 i&lt;l 能够比使用 s[i]!='\0' 要快</span></span><br><span class="line">    <span class="keyword">int</span> i=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(str[<span class="number">0</span>]==<span class="string">'-'</span>)</span><br><span class="line">        sign=<span class="number">-1</span>,i=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(;i&lt;l;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">'0'</span>&lt;=str[i]&amp;&amp;str[i]&lt;=<span class="string">'9'</span>)&#123;</span><br><span class="line">            res*=<span class="number">10</span>;</span><br><span class="line">            res+=str[i]-<span class="string">'0'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sign*res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在这个版本里，考虑了各种因素：首位的符号可能是数字也可能是负号；<code>str</code>字符串里一些可能的乱七八糟非数字的字符，这种情况下我们只处理前面合法的数字部分。我信心满满地提交了，然后它告诉我：</p><p><code>myAtoi(&quot;+1&quot;)==1</code></p><p>…于是修改成了这个版本：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">myAtoi</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span>* str)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> sign=<span class="number">1</span>,l=<span class="built_in">strlen</span>(str),res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> i=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">switch</span>(str[<span class="number">0</span>])&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'-'</span>:sign=<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'+'</span>:i=<span class="number">1</span>;<span class="keyword">break</span>;    <span class="comment">//无论str[0]是'+'还是'-' i都是1,就让case穿透吧，我少写一句</span></span><br><span class="line">        <span class="keyword">default</span>:<span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(;i&lt;l;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">'0'</span>&lt;=str[i]&amp;&amp;str[i]&lt;=<span class="string">'9'</span>)&#123;</span><br><span class="line">            res*=<span class="number">10</span>;</span><br><span class="line">            res+=str[i]-<span class="string">'0'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sign*res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后它告诉我：</p><p><code>myAtoi(&quot; 123&quot;)==123</code></p><p>我之后做了个测试，发现数字之后的空格视为非法字符，比如<code>myAtoi(&quot; 1 2 3 &quot;)==1</code>. ……于是修改成了这个版本：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">myAtoi</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span>* str)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> sign=<span class="number">1</span>,l=<span class="built_in">strlen</span>(str),res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> i=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">switch</span>(str[<span class="number">0</span>])&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'-'</span>:sign=<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'+'</span>:i=<span class="number">1</span>;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">' '</span>:</span><br><span class="line">            <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;l<span class="number">-1</span>;i++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(str[i+<span class="number">1</span>]!=<span class="string">' '</span>)</span><br><span class="line">                    <span class="keyword">return</span> myAtoi(str+i+<span class="number">1</span>);    <span class="comment">//跳过开头所有的空格，然后递归处理</span></span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">default</span>:<span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(;i&lt;l;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">'0'</span>&lt;=str[i]&amp;&amp;str[i]&lt;=<span class="string">'9'</span>)&#123;</span><br><span class="line">            res*=<span class="number">10</span>;</span><br><span class="line">            res+=str[i]-<span class="string">'0'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sign*res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后它告诉我：</p><p><code>myAtoi(&quot;2147483648&quot;)==2147483647</code></p><p>也就是说，如果正数溢出返回<code>INT_MAX</code>; 负数溢出返回<code>INT_MIN</code>.</p><p>………于是改成了下面这个最终版本：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">myAtoi</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span>* str)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> sign=<span class="number">1</span>,l=<span class="built_in">strlen</span>(str),res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> i=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">switch</span>(str[<span class="number">0</span>])&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'-'</span>:sign=<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'+'</span>:i=<span class="number">1</span>;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">' '</span>:</span><br><span class="line">            <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;l<span class="number">-1</span>;i++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(str[i+<span class="number">1</span>]!=<span class="string">' '</span>)</span><br><span class="line">                    <span class="keyword">return</span> myAtoi(str+i+<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">default</span>:<span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(;i&lt;l;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">'0'</span>&lt;=str[i]&amp;&amp;str[i]&lt;=<span class="string">'9'</span>)&#123;</span><br><span class="line">            <span class="comment">/* In case that res*=10 overflows */</span></span><br><span class="line">            <span class="keyword">if</span>(res&gt;INT_MAX/<span class="number">10</span>&amp;&amp;res&gt;<span class="number">0</span>)</span><br><span class="line">                <span class="keyword">return</span> sign==<span class="number">1</span>?INT_MAX:INT_MIN;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                res*=<span class="number">10</span>;</span><br><span class="line">            <span class="comment">/* In case that res+=str[i]-'0' overflows */</span></span><br><span class="line">            <span class="keyword">int</span> digit=str[i]-<span class="string">'0'</span>;<span class="comment">//避免反复计算str[i]-'0'</span></span><br><span class="line">            <span class="keyword">if</span>(res&gt;INT_MAX-digit&amp;&amp;res&gt;<span class="number">0</span>)</span><br><span class="line">                <span class="keyword">return</span> sign==<span class="number">1</span>?INT_MAX:INT_MIN;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                res+=digit;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sign*res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后，提交，判断——终于通过了，不容易啊。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;一个不难但是坑的题的题解——《论健壮性》&lt;/p&gt;
    
    </summary>
    
      <category term="编程" scheme="https://unnamed42.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
    
      <category term="Leetcode" scheme="https://unnamed42.github.io/tags/Leetcode/"/>
    
      <category term="算法" scheme="https://unnamed42.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
</feed>
